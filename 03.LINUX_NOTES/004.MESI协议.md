# MESI协议
> 阅读: [奔跑吧Linux内核（第2版）卷1：基础架构#1.1.11 MESI协议](../006.BOOKs/Run%20Linux%20Kernel%20(2nd%20Edition)%20Volume%201:%20Infrastructure.epub)

MESI是 高速缓存一致性协议: 监听类协议，MESI是一种总线监听协议 (本地读写和总线操作)

|操作类型|描　　述|
|-|-|
|本地读（Local Read/PrRd）|本地CPU读取缓存行数据|
|本地写（Local Write/PrWr）|本地CPU更新缓存行数据|
|总线读（Bus Read/BusRd）|总线监听到一个来自其他CPU的读缓存请求。收到信号的CPU先检查自己的高速缓存中是否缓存了该数据，然后广播应答信号|
|总线写（Bus Write/BusRdX）|总线监听到一个来自其他CPU的写缓存请求。收到信号的CPU先检查自己的高速缓存中是否缓存了该数据，然后广播应答信号|
|总线更新（BusUpgr）|总线监听到更新请求，请求其他CPU做一些额外事情。其他CPU收到请求后，若CPU上有缓存副本，则需要做额外的一些更新操作，如使本地的高速缓存行无效等|
|刷新（Flush）|总线监听到刷新请求。收到请求的CPU把自己的高速缓存行的内容写回主内存中|
|刷新到总线（FlushOpt）|收到该请求的CPU会把高速缓存行内容发送到总线上，这样发送请求的CPU就可以获取到这个高速缓存行的内容|

总线读写指的是有总线的事务（bus transaction），因为实现的是总线监听协议，所以CPU可以发送请求到总线上，所有的CPU都可以收到这个请求。总之，总线读写的目标对象是远端CPU的高速缓存行，而本地读写的目标对象是本地CPU的高速缓存行。


在一个处理器系统中不同CPU内核上的高速缓存和内存可能具有同一个数据的多个副本
