(function(){"use strict";const t=(t,n=300)=>{let o=null;return(...e)=>{if(o){clearTimeout(o)}o=setTimeout(()=>{t(...e)},n)}};const u=typeof window.URL==="function"?window.URL:window.URL_WORKER||window.webkitURL||window.moxURL;var s=function(e){if(e===null){return"null"}if(e===undefined){return"undefined"}var t=typeof e;if(t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")){return"array"}if(t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")){return"string"}return t};var r=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1};var n=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)};var o=function(n,o){return i(function(e,t){return n.eq(o(e),o(t))})};var i=function(e){return{eq:e}};var b=i(function(e,t){return e===t});var v=b;var w=function(s){return i(function(e,t){if(e.length!==t.length){return false}var n=e.length;for(var o=0;o<n;o++){if(!s.eq(e[o],t[o])){return false}}return true})};var x=function(e,t){return o(w(e),function(e){return n(e,t)})};var N=function(c){return i(function(e,t){var n=Object.keys(e);var o=Object.keys(t);if(!x(v).eq(n,o)){return false}var s=n.length;for(var r=0;r<s;r++){var i=n[r];if(!c.eq(e[i],t[i])){return false}}return true})};var R=i(function(e,t){if(e===t){return true}var n=s(e);var o=s(t);if(n!==o){return false}if(r(n)){return e===t}else if(n==="array"){return w(R).eq(e,t)}else if(n==="object"){return N(R).eq(e,t)}return false});const A=Object.getPrototypeOf;const D=(e,t,n)=>{var o;if(n(e,t.prototype)){return true}else{return((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name}};const O=e=>{const t=typeof e;if(e===null){return"null"}else if(t==="object"&&Array.isArray(e)){return"array"}else if(t==="object"&&D(e,String,(e,t)=>t.isPrototypeOf(e))){return"string"}else{return t}};const T=t=>e=>O(e)===t;const B=t=>e=>typeof e===t;const P=t=>e=>t===e;const L=(e,t)=>I(e)&&D(e,t,(e,t)=>A(e)===t);const Re=T("string");const I=T("object");const F=e=>L(e,Object);const Ve=T("array");const z=P(null);const j=B("boolean");const V=P(undefined);const Ae=e=>e===null||e===undefined;const De=e=>!Ae(e);const Oe=B("function");const q=B("number");const W=(n,o)=>{if(Ve(n)){for(let e=0,t=n.length;e<t;++e){if(!o(n[e])){return false}}return true}return false};const Te=()=>{};const K=(t,n)=>{return(...e)=>{return t(n.apply(null,e))}};const G=(t,n)=>e=>t(n(e));const Be=e=>{return()=>{return e}};const Y=e=>{return e};const X=(e,t)=>{return e===t};function h(n,...o){return(...e)=>{const t=o.concat(e);return n.apply(null,t)}}const Q=t=>e=>!t(e);const J=e=>{return()=>{throw new Error(e)}};const Z=e=>{return e()};const ee=e=>{e()};const a=Be(false);const f=Be(true);class C{constructor(e,t){this.tag=e;this.value=t}static some(e){return new C(true,e)}static none(){return C.singletonNone}fold(e,t){if(this.tag){return t(this.value)}else{return e()}}isSome(){return this.tag}isNone(){return!this.tag}map(e){if(this.tag){return C.some(e(this.value))}else{return C.none()}}bind(e){if(this.tag){return e(this.value)}else{return C.none()}}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){if(!this.tag||e(this.value)){return this}else{return C.none()}}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(!this.tag){throw new Error(e!==null&&e!==void 0?e:"Called getOrDie on None")}else{return this.value}}static from(e){return De(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){if(this.tag){e(this.value)}}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(false);const te=Array.prototype.slice;const ne=Array.prototype.indexOf;const oe=Array.prototype.push;const se=(e,t)=>ne.call(e,t);const re=(e,t)=>{const n=se(e,t);return n===-1?C.none():C.some(n)};const m=(e,t)=>se(e,t)>-1;const Pe=(n,o)=>{for(let e=0,t=n.length;e<t;e++){const s=n[e];if(o(s,e)){return true}}return false};const y=(t,n)=>{const o=t.length;const s=new Array(o);for(let e=0;e<o;e++){const r=t[e];s[e]=n(r,e)}return s};const Le=(n,o)=>{for(let e=0,t=n.length;e<t;e++){const s=n[e];o(s,e)}};const ie=(t,n)=>{for(let e=t.length-1;e>=0;e--){const o=t[e];n(o,e)}};const ce=(n,o)=>{const s=[];const r=[];for(let e=0,t=n.length;e<t;e++){const i=n[e];const c=o(i,e)?s:r;c.push(i)}return{pass:s,fail:r}};const S=(n,o)=>{const s=[];for(let e=0,t=n.length;e<t;e++){const r=n[e];if(o(r,e)){s.push(r)}}return s};const ae=(e,n,o)=>{ie(e,(e,t)=>{o=n(o,e,t)});return o};const le=(e,n,o)=>{Le(e,(e,t)=>{o=n(o,e,t)});return o};const de=(n,o,s)=>{for(let e=0,t=n.length;e<t;e++){const r=n[e];if(o(r,e)){return C.some(r)}else if(s(r,e)){break}}return C.none()};const ue=(e,t)=>{return de(e,t,a)};const fe=(n,o)=>{for(let e=0,t=n.length;e<t;e++){const s=n[e];if(o(s,e)){return C.some(e)}}return C.none()};const me=n=>{const o=[];for(let e=0,t=n.length;e<t;++e){if(!Ve(n[e])){throw new Error("Arr.flatten item "+e+" was not an array, input: "+n)}oe.apply(o,n[e])}return o};const ge=(e,t)=>me(y(e,t));const qe=(n,o)=>{for(let e=0,t=n.length;e<t;++e){const s=n[e];if(o(s,e)!==true){return false}}return true};const pe=e=>{const t=te.call(e,0);t.reverse();return t};const he=(e,t)=>S(e,e=>!m(t,e));const be=(n,o)=>{const s={};for(let e=0,t=n.length;e<t;e++){const r=n[e];s[String(r)]=o(r,e)}return s};const ve=(e,t)=>{const n=te.call(e,0);n.sort(t);return n};const ye=(e,t)=>t>=0&&t<e.length?C.some(e[t]):C.none();const Ce=e=>ye(e,0);const we=e=>ye(e,e.length-1);const We=Oe(Array.from)?Array.from:e=>te.call(e);const xe=(n,o)=>{for(let t=0;t<n.length;t++){const e=o(n[t],t);if(e.isSome()){return e}}return C.none()};const ke=(n,o)=>{const s=[];const r=Oe(o)?t=>Pe(s,e=>o(e,t)):e=>m(s,e);for(let e=0,t=n.length;e<t;e++){const i=n[e];if(!r(i)){s.push(i)}}return s};const Ee=Object.keys;const Se=Object.hasOwnProperty;const Me=(n,o)=>{const s=Ee(n);for(let e=0,t=s.length;e<t;e++){const r=s[e];const i=n[r];o(i,r)}};const _e=(e,n)=>{return Ne(e,(e,t)=>({k:t,v:n(e,t)}))};const Ne=(e,o)=>{const s={};Me(e,(e,t)=>{const n=o(e,t);s[n.k]=n.v});return s};const Ke=n=>(e,t)=>{n[t]=e};const Ge=(e,n,o,s)=>{Me(e,(e,t)=>{(n(e,t)?o:s)(e,t)})};const Ye=(e,t)=>{const n={};const o={};Ge(e,t,Ke(n),Ke(o));return{t:n,f:o}};const Xe=(e,t)=>{const n={};Ge(e,t,Ke(n),Te);return n};const Qe=(e,n)=>{const o=[];Me(e,(e,t)=>{o.push(n(e,t))});return o};const Je=e=>{return Qe(e,Y)};const p=(e,t)=>{return Ie(e,t)?C.from(e[t]):C.none()};const Ie=(e,t)=>Se.call(e,t);const Ze=(e,t)=>Ie(e,t)&&e[t]!==undefined&&e[t]!==null;const et=(e,t,n=R)=>N(n).eq(e,t);const tt=e=>{const t={};Le(e,e=>{t[e]={}});return Ee(t)};const nt=e=>e.length!==undefined;const ot=Array.isArray;const st=n=>{if(!ot(n)){const o=[];for(let e=0,t=n.length;e<t;e++){o[e]=n[e]}return o}else{return n}};const rt=(n,o,s)=>{if(!n){return false}s=s||n;if(nt(n)){for(let e=0,t=n.length;e<t;e++){if(o.call(s,n[e],e,n)===false){return false}}}else{for(const e in n){if(Ie(n,e)){if(o.call(s,n[e],e,n)===false){return false}}}}return true};const it=(n,o)=>{const s=[];rt(n,(e,t)=>{s.push(o(e,t,n))});return s};const ct=(n,o)=>{const s=[];rt(n,(e,t)=>{if(!o||o(e,t,n)){s.push(e)}});return s};const at=(n,o)=>{if(n){for(let e=0,t=n.length;e<t;e++){if(n[e]===o){return e}}}return-1};const lt=(t,n,e,o)=>{let s=V(e)?t[0]:e;for(let e=0;e<t.length;e++){s=n.call(o,s,t[e],e)}return s};const dt=(n,o,s)=>{for(let e=0,t=n.length;e<t;e++){if(o.call(s,n[e],e,n)){return e}}return-1};const ut=e=>e[e.length-1];const ft=t=>{let n=false;let o;return(...e)=>{if(!n){n=true;o=t.apply(null,e)}return o}};const mt=(e,t,n,o)=>{const s=e.isiOS()&&/ipad/i.test(n)===true;const r=e.isiOS()&&!s;const i=e.isiOS()||e.isAndroid();const c=i||o("(pointer:coarse)");const a=s||!r&&i&&o("(min-device-width:768px)");const l=r||i&&!a;const d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;const u=!l&&!a&&!d;return{isiPad:Be(s),isiPhone:Be(r),isTablet:Be(a),isPhone:Be(l),isTouch:Be(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Be(d),isDesktop:Be(u)}};const gt=(t,n)=>{for(let e=0;e<t.length;e++){const o=t[e];if(o.test(n)){return o}}return undefined};const pt=(e,t)=>{const n=gt(e,t);if(!n){return{major:0,minor:0}}const o=e=>{return Number(t.replace(n,"$"+e))};return vt(o(1),o(2))};const ht=(e,t)=>{const n=String(t).toLowerCase();if(e.length===0){return bt()}return pt(e,n)};const bt=()=>{return vt(0,0)};const vt=(e,t)=>{return{major:e,minor:t}};const yt={nu:vt,detect:ht,unknown:bt};const Ct=(e,t)=>{return xe(t.brands,t=>{const n=t.brand.toLowerCase();return ue(e,e=>{var t;return n===((t=e.brand)===null||t===void 0?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:yt.nu(parseInt(t.version,10),0)}))})};const wt=(e,t)=>{const n=String(t).toLowerCase();return ue(e,e=>{return e.search(n)})};const xt=(e,n)=>{return wt(e,n).map(e=>{const t=yt.detect(e.versionRegexes,n);return{current:e.name,version:t}})};const kt=(e,n)=>{return wt(e,n).map(e=>{const t=yt.detect(e.versionRegexes,n);return{current:e.name,version:t}})};const Et=(e,t)=>{return e.substring(t)};const St=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t;const _t=(e,t)=>{return Rt(e,t)?Et(e,t.length):e};const Nt=(e,t,n=0,o)=>{const s=e.indexOf(t,n);if(s!==-1){return V(o)?true:s+t.length<=o}else{return false}};const Rt=(e,t)=>{return St(e,t,0)};const At=(e,t)=>{return St(e,t,e.length-t.length)};const Dt=t=>e=>e.replace(t,"");const Ot=Dt(/^\s+|\s+$/g);const Tt=Dt(/^\s+/g);const Bt=Dt(/\s+$/g);const Pt=e=>e.length>0;const Lt=e=>!Pt(e);const Mt=(e,t)=>t<=0?"":new Array(t+1).join(e);const It=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?C.none():C.some(n)};const Ft=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;const Ut=t=>{return e=>{return Nt(e,t)}};const zt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>{return Nt(e,"edge/")&&Nt(e,"chrome")&&Nt(e,"safari")&&Nt(e,"applewebkit")}},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ft],search:e=>{return Nt(e,"chrome")&&!Nt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>{return Nt(e,"msie")||Nt(e,"trident")}},{name:"Opera",versionRegexes:[Ft,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ut("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ut("firefox")},{name:"Safari",versionRegexes:[Ft,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>{return(Nt(e,"safari")||Nt(e,"mobile/"))&&Nt(e,"applewebkit")}}];const jt=[{name:"Windows",search:Ut("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>{return Nt(e,"iphone")||Nt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ut("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ut("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ut("linux"),versionRegexes:[]},{name:"Solaris",search:Ut("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ut("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ut("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}];const Ht={browsers:Be(zt),oses:Be(jt)};const $t="Edge";const Vt="Chromium";const qt="IE";const Wt="Opera";const Kt="Firefox";const Gt="Safari";const Yt=()=>{return Xt({current:undefined,version:yt.unknown()})};const Xt=e=>{const t=e.current;const n=e.version;const o=e=>()=>t===e;return{current:t,version:n,isEdge:o($t),isChromium:o(Vt),isIE:o(qt),isOpera:o(Wt),isFirefox:o(Kt),isSafari:o(Gt)}};const Qt={unknown:Yt,nu:Xt,edge:Be($t),chromium:Be(Vt),ie:Be(qt),opera:Be(Wt),firefox:Be(Kt),safari:Be(Gt)};const Jt="Windows";const Zt="iOS";const en="Android";const tn="Linux";const nn="macOS";const on="Solaris";const sn="FreeBSD";const rn="ChromeOS";const cn=()=>{return an({current:undefined,version:yt.unknown()})};const an=e=>{const t=e.current;const n=e.version;const o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Jt),isiOS:o(Zt),isAndroid:o(en),isMacOS:o(nn),isLinux:o(tn),isSolaris:o(on),isFreeBSD:o(sn),isChromeOS:o(rn)}};const ln={unknown:cn,nu:an,windows:Be(Jt),ios:Be(Zt),android:Be(en),linux:Be(tn),macos:Be(nn),solaris:Be(on),freebsd:Be(sn),chromeos:Be(rn)};const dn=(e,t,n)=>{const o=Ht.browsers();const s=Ht.oses();const r=t.bind(e=>Ct(o,e)).orThunk(()=>xt(o,e)).fold(Qt.unknown,Qt.nu);const i=kt(s,e).fold(ln.unknown,ln.nu);const c=mt(i,r,e,n);return{browser:r,os:i,deviceType:c}};const un={detect:dn};const fn=e=>window.matchMedia(e).matches;let mn=ft(()=>un.detect(navigator.userAgent,C.from(navigator.userAgentData),fn));const gn=()=>mn();const pn=navigator.userAgent;const hn=gn();const bn=hn.browser;const vn=hn.os;const yn=hn.deviceType;const Cn=pn.indexOf("Windows Phone")!==-1;const H={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:bn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!bn.isIE(),windowsPhone:Cn,browser:{current:bn.current,version:bn.version,isChromium:bn.isChromium,isEdge:bn.isEdge,isFirefox:bn.isFirefox,isIE:bn.isIE,isOpera:bn.isOpera,isSafari:bn.isSafari},os:{current:vn.current,version:vn.version,isAndroid:vn.isAndroid,isChromeOS:vn.isChromeOS,isFreeBSD:vn.isFreeBSD,isiOS:vn.isiOS,isLinux:vn.isLinux,isMacOS:vn.isMacOS,isSolaris:vn.isSolaris,isWindows:vn.isWindows},deviceType:{isDesktop:yn.isDesktop,isiPad:yn.isiPad,isiPhone:yn.isiPhone,isPhone:yn.isPhone,isTablet:yn.isTablet,isTouch:yn.isTouch,isWebView:yn.isWebView}};const wn=/^\s*|\s*$/g;const xn=e=>{return Ae(e)?"":(""+e).replace(wn,"")};const kn=(e,t)=>{if(!t){return e!==undefined}if(t==="array"&&ot(e)){return true}return typeof e===t};const En=(e,t,n={})=>{const o=Re(e)?e.split(t||","):e||[];let s=o.length;while(s--){n[o[s]]={}}return n};const Sn=Ie;const _n=(n,...t)=>{for(let e=0;e<t.length;e++){const o=t[e];for(const t in o){if(Ie(o,t)){const e=o[t];if(e!==undefined){n[t]=e}}}}return n};const Nn=function(e,n,o,s){s=s||this;if(e){if(o){e=e[o]}rt(e,(e,t)=>{if(n.call(s,e,t,o)===false){return false}else{Nn(e,n,o,s);return true}})}};const Rn=(e,n=window)=>{const o=e.split(".");for(let e=0,t=o.length;e<t;e++){n=n[o[e]];if(!n){break}}return n};const An=(e,t)=>{if(Ve(e)){return e}else if(e===""){return[]}else{return it(e.split(t||","),xn)}};const Dn=e=>{const t=H.cacheSuffix;if(t){e+=(e.indexOf("?")===-1?"?":"&")+t}return e};const U={trim:xn,isArray:ot,is:kn,toArray:st,makeMap:En,each:rt,map:it,grep:ct,inArray:at,hasOwn:Sn,extend:_n,walk:Nn,resolve:Rn,explode:An,_addCacheSuffix:Dn};const On=(e,t,n=X)=>e.exists(e=>n(e,t));const Tn=t=>{const n=[];const o=e=>{n.push(e)};for(let e=0;e<t.length;e++){t[e].each(o)}return n};const Bn=(e,t,n)=>e.isSome()&&t.isSome()?C.some(n(e.getOrDie(),t.getOrDie())):C.none();const Pn=(e,t,n,o)=>e.isSome()&&t.isSome()&&n.isSome()?C.some(o(e.getOrDie(),t.getOrDie(),n.getOrDie())):C.none();const Ln=(e,t)=>e?C.some(t):C.none();const Mn=typeof window!=="undefined"?window:Function("return this;")();const In=(t,e)=>{let n=e!==undefined&&e!==null?e:Mn;for(let e=0;e<t.length&&n!==undefined&&n!==null;++e){n=n[t[e]]}return n};const Fn=(e,t)=>{const n=e.split(".");return In(n,t)};const Un=(e,t)=>{return Fn(e,t)};const zn=(e,t)=>{const n=Un(e,t);if(n===undefined||n===null){throw new Error(e+" not available on this browser")}return n};const jn=Object.getPrototypeOf;const Hn=e=>{return zn("HTMLElement",e)};const $n=e=>{const t=Fn("ownerDocument.defaultView",e);return I(e)&&(Hn(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(jn(e).constructor.name))};const Vn=8;const qn=9;const Wn=11;const Kn=1;const Gn=3;const g=e=>{const t=e.dom.nodeName;return t.toLowerCase()};const Yn=e=>e.dom.nodeType;const Xn=t=>e=>Yn(e)===t;const Qn=e=>Yn(e)===Vn||g(e)==="#comment";const Jn=e=>Zn(e)&&$n(e.dom);const Zn=Xn(Kn);const eo=Xn(Gn);const to=Xn(qn);const no=Xn(Wn);const oo=t=>e=>Zn(e)&&g(e)===t;const so=(e,t,n)=>{if(Re(n)||j(n)||q(n)){e.setAttribute(t,n+"")}else{console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}};const ro=(e,t,n)=>{so(e.dom,t,n)};const io=(e,t)=>{const n=e.dom;Me(t,(e,t)=>{so(n,t,e)})};const co=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?undefined:n};const ao=(e,t)=>C.from(co(e,t));const lo=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):false};const uo=(e,t)=>{e.dom.removeAttribute(t)};const fo=e=>{const t=e.dom.attributes;return t===undefined||t===null||t.length===0};const mo=e=>le(e.dom.attributes,(e,t)=>{e[t.name]=t.value;return e},{});const go=(e,t)=>{const n=co(e,t);return n===undefined||n===""?[]:n.split(" ")};const po=(e,t,n)=>{const o=go(e,t);const s=o.concat([n]);ro(e,t,s.join(" "));return true};const ho=(e,t,n)=>{const o=S(go(e,t),e=>e!==n);if(o.length>0){ro(e,t,o.join(" "))}else{uo(e,t)}return false};const bo=e=>e.dom.classList!==undefined;const vo=e=>go(e,"class");const yo=(e,t)=>po(e,"class",t);const Co=(e,t)=>ho(e,"class",t);const wo=(e,t)=>{if(m(vo(e),t)){return Co(e,t)}else{return yo(e,t)}};const xo=(e,t)=>{if(bo(e)){e.dom.classList.add(t)}else{yo(e,t)}};const ko=e=>{const t=bo(e)?e.dom.classList:vo(e);if(t.length===0){uo(e,"class")}};const Eo=(e,t)=>{if(bo(e)){const n=e.dom.classList;n.remove(t)}else{Co(e,t)}ko(e)};const So=(e,t)=>{const n=bo(e)?e.dom.classList.toggle(t):wo(e,t);ko(e);return n};const _o=(e,t)=>bo(e)&&e.dom.classList.contains(t);const No=(e,t)=>{const n=t||document;const o=n.createElement("div");o.innerHTML=e;if(!o.hasChildNodes()||o.childNodes.length>1){const s="HTML does not have a single root node";console.error(s,e);throw new Error(s)}return Do(o.childNodes[0])};const Ro=(e,t)=>{const n=t||document;const o=n.createElement(e);return Do(o)};const Ao=(e,t)=>{const n=t||document;const o=n.createTextNode(e);return Do(o)};const Do=e=>{if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:e}};const Oo=(e,t,n)=>C.from(e.dom.elementFromPoint(t,n)).map(Do);const Fe={fromHtml:No,fromTag:Ro,fromText:Ao,fromDom:Do,fromPoint:Oo};const To=(e,t)=>{const n=[];const o=e=>{n.push(e);return t(e)};let s=t(e);do{s=s.bind(o)}while(s.isSome());return n};const Bo=(e,t)=>{const n=e.dom;if(n.nodeType!==Kn){return false}else{const o=n;if(o.matches!==undefined){return o.matches(t)}else if(o.msMatchesSelector!==undefined){return o.msMatchesSelector(t)}else if(o.webkitMatchesSelector!==undefined){return o.webkitMatchesSelector(t)}else if(o.mozMatchesSelector!==undefined){return o.mozMatchesSelector(t)}else{throw new Error("Browser lacks native selectors")}}};const Po=e=>e.nodeType!==Kn&&e.nodeType!==qn&&e.nodeType!==Wn||e.childElementCount===0;const Lo=(e,t)=>{const n=t===undefined?document:t.dom;return Po(n)?[]:y(n.querySelectorAll(e),Fe.fromDom)};const Mo=(e,t)=>{const n=t===undefined?document:t.dom;return Po(n)?C.none():C.from(n.querySelector(e)).map(Fe.fromDom)};const k=(e,t)=>e.dom===t.dom;const Io=(e,t)=>{const n=e.dom;const o=t.dom;return n===o?false:n.contains(o)};const Fo=e=>Fe.fromDom(e.dom.ownerDocument);const Uo=e=>to(e)?e:Fo(e);const zo=e=>Fe.fromDom(Uo(e).dom.documentElement);const jo=e=>Fe.fromDom(Uo(e).dom.defaultView);const Ho=e=>C.from(e.dom.parentNode).map(Fe.fromDom);const $o=e=>C.from(e.dom.parentElement).map(Fe.fromDom);const Vo=(e,t)=>{const n=Oe(t)?t:a;let o=e.dom;const s=[];while(o.parentNode!==null&&o.parentNode!==undefined){const r=o.parentNode;const i=Fe.fromDom(r);s.push(i);if(n(i)===true){break}else{o=r}}return s};const qo=t=>{const e=e=>S(e,e=>!k(t,e));return Ho(t).map(Xo).map(e).getOr([])};const Wo=e=>C.from(e.dom.previousSibling).map(Fe.fromDom);const Ko=e=>C.from(e.dom.nextSibling).map(Fe.fromDom);const Go=e=>pe(To(e,Wo));const Yo=e=>To(e,Ko);const Xo=e=>y(e.dom.childNodes,Fe.fromDom);const Qo=(e,t)=>{const n=e.dom.childNodes;return C.from(n[t]).map(Fe.fromDom)};const Jo=e=>Qo(e,0);const Zo=e=>Qo(e,e.dom.childNodes.length-1);const es=e=>e.dom.childNodes.length;const ts=e=>{const t=e.dom.head;if(t===null||t===undefined){throw new Error("Head is not available yet")}return Fe.fromDom(t)};const ns=e=>no(e)&&De(e.dom.host);const os=Oe(Element.prototype.attachShadow)&&Oe(Node.prototype.getRootNode);const ss=Be(os);const rs=os?e=>Fe.fromDom(e.dom.getRootNode()):Uo;const is=e=>ns(e)?e:ts(Uo(e));const cs=e=>ns(e)?e:Fe.fromDom(Uo(e).dom.body);const as=e=>{const t=rs(e);return ns(t)?C.some(t):C.none()};const ls=e=>Fe.fromDom(e.dom.host);const ds=e=>{if(ss()&&De(e.target)){const t=Fe.fromDom(e.target);if(Zn(t)&&us(t)){if(e.composed&&e.composedPath){const n=e.composedPath();if(n){return Ce(n)}}}}return C.from(e.target)};const us=e=>De(e.dom.shadowRoot);const fs=e=>{const t=eo(e)?e.dom.parentNode:e.dom;if(t===undefined||t===null||t.ownerDocument===null){return false}const n=t.ownerDocument;return as(Fe.fromDom(t)).fold(()=>n.body.contains(t),G(fs,ls))};var ms=(e,t,n,o,s)=>{if(e(n,o)){return C.some(n)}else if(Oe(s)&&s(n)){return C.none()}else{return t(n,o,s)}};const gs=(e,t,n)=>{let o=e.dom;const s=Oe(n)?n:a;while(o.parentNode){o=o.parentNode;const r=Fe.fromDom(o);if(t(r)){return C.some(r)}else if(s(r)){break}}return C.none()};const ps=(e,t,n)=>{const o=(e,t)=>t(e);return ms(o,gs,e,t,n)};const hs=(t,n)=>{const e=t.dom;if(!e.parentNode){return C.none()}return bs(Fe.fromDom(e.parentNode),e=>!k(t,e)&&n(e))};const bs=(e,t)=>{const n=e=>t(Fe.fromDom(e));const o=ue(e.dom.childNodes,n);return o.map(Fe.fromDom)};const vs=(e,s)=>{const r=n=>{for(let t=0;t<n.childNodes.length;t++){const e=Fe.fromDom(n.childNodes[t]);if(s(e)){return C.some(e)}const o=r(n.childNodes[t]);if(o.isSome()){return o}}return C.none()};return r(e.dom)};const ys=(e,t,n)=>gs(e,e=>Bo(e,t),n);const Cs=(e,t)=>Mo(t,e);const ws=(e,t,n)=>{const o=(e,t)=>Bo(e,t);return ms(o,ys,e,t,n)};const xs=e=>ws(e,"[contenteditable]");const ks=(e,t=false)=>{if(fs(e)){return e.dom.isContentEditable}else{return xs(e).fold(Be(t),e=>Es(e)==="true")}};const Es=e=>e.dom.contentEditable;const Ss=e=>e.style!==undefined&&Oe(e.style.getPropertyValue);const _s=(e,t,n)=>{if(!Re(n)){console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}if(Ss(e)){e.style.setProperty(t,n)}};const Ns=(e,t)=>{if(Ss(e)){e.style.removeProperty(t)}};const Rs=(e,t,n)=>{const o=e.dom;_s(o,t,n)};const As=(e,t)=>{const n=e.dom;Me(t,(e,t)=>{_s(n,t,e)})};const Ds=(e,t)=>{const n=e.dom;const o=window.getComputedStyle(n);const s=o.getPropertyValue(t);return s===""&&!fs(e)?Os(n,t):s};const Os=(e,t)=>Ss(e)?e.style.getPropertyValue(t):"";const Ts=(e,t)=>{const n=e.dom;const o=Os(n,t);return C.from(o).filter(e=>e.length>0)};const Bs=e=>{const t={};const n=e.dom;if(Ss(n)){for(let e=0;e<n.style.length;e++){const o=n.style.item(e);t[o]=n.style[o]}}return t};const Ps=(e,t)=>{const n=e.dom;Ns(n,t);if(On(ao(e,"style").map(Ot),"")){uo(e,"style")}};const Ls=e=>e.dom.offsetWidth;const Ms=(t,n)=>{const e=Ho(t);e.each(e=>{e.dom.insertBefore(n.dom,t.dom)})};const Is=(t,n)=>{const e=Ko(t);e.fold(()=>{const e=Ho(t);e.each(e=>{Us(e,n)})},e=>{Ms(e,n)})};const Fs=(t,n)=>{const e=Jo(t);e.fold(()=>{Us(t,n)},e=>{t.dom.insertBefore(n.dom,e.dom)})};const Us=(e,t)=>{e.dom.appendChild(t.dom)};const zs=(e,t)=>{Ms(e,t);Us(t,e)};const js=(o,s)=>{Le(s,(e,t)=>{const n=t===0?o:s[t-1];Is(n,e)})};const Hs=(t,e)=>{Le(e,e=>{Us(t,e)})};const $s=e=>{e.dom.textContent="";Le(Xo(e),e=>{Ue(e)})};const Ue=e=>{const t=e.dom;if(t.parentNode!==null){t.parentNode.removeChild(t)}};const Vs=e=>{const t=Xo(e);if(t.length>0){js(e,t)}Ue(e)};const qs=(e,t)=>{const n=t||document;const o=n.createElement("div");o.innerHTML=e;return Xo(Fe.fromDom(o))};const Ws=e=>y(e,Fe.fromDom);const Ks=e=>e.dom.innerHTML;const Gs=(e,t)=>{const n=Fo(e);const o=n.dom;const s=Fe.fromDom(o.createDocumentFragment());const r=qs(t,o);Hs(s,r);$s(e);Us(e,s)};const Ys=e=>{const t=Fe.fromTag("div");const n=Fe.fromDom(e.dom.cloneNode(true));Us(t,n);return Ks(t)};const Xs=(e,t,n,o,s,r,i)=>({target:e,x:t,y:n,stop:o,prevent:s,kill:r,raw:i});const Qs=e=>{const t=Fe.fromDom(ds(e).getOr(e.target));const n=()=>e.stopPropagation();const o=()=>e.preventDefault();const s=K(o,n);return Xs(t,e.clientX,e.clientY,n,o,s,e)};const Js=(t,n)=>e=>{if(t(e)){n(Qs(e))}};const Zs=(e,t,n,o,s)=>{const r=Js(n,o);e.dom.addEventListener(t,r,s);return{unbind:h(tr,e,t,r,s)}};const er=(e,t,n,o)=>Zs(e,t,n,o,false);const tr=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)};const nr=(n,o)=>{const e=(e,t)=>nr(n+e,o+t);return{left:n,top:o,translate:e}};const or=nr;const sr=e=>{const t=e.getBoundingClientRect();return or(t.left,t.top)};const rr=(e,t)=>{if(e!==undefined){return e}else{return t!==undefined?t:0}};const ir=e=>{const t=e.dom.ownerDocument;const n=t.body;const o=t.defaultView;const s=t.documentElement;if(n===e.dom){return or(n.offsetLeft,n.offsetTop)}const r=rr(o===null||o===void 0?void 0:o.pageYOffset,s.scrollTop);const i=rr(o===null||o===void 0?void 0:o.pageXOffset,s.scrollLeft);const c=rr(s.clientTop,n.clientTop);const a=rr(s.clientLeft,n.clientLeft);return cr(e).translate(i-a,r-c)};const cr=e=>{const t=e.dom;const n=t.ownerDocument;const o=n.body;if(o===t){return or(o.offsetLeft,o.offsetTop)}if(!fs(e)){return or(0,0)}return sr(t)};const ar=e=>{const t=e!==undefined?e.dom:document;const n=t.body.scrollLeft||t.documentElement.scrollLeft;const o=t.body.scrollTop||t.documentElement.scrollTop;return or(n,o)};const lr=(e,t,n)=>{const o=n!==undefined?n.dom:document;const s=o.defaultView;if(s){s.scrollTo(e,t)}};const dr=(e,t)=>{const n=gn().browser.isSafari();if(n&&Oe(e.dom.scrollIntoViewIfNeeded)){e.dom.scrollIntoViewIfNeeded(false)}else{e.dom.scrollIntoView(t)}};const ur=e=>{const t=e===undefined?window:e;if(gn().browser.isFirefox()){return C.none()}else{return C.from(t.visualViewport)}};const fr=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o});const mr=e=>{const o=e===undefined?window:e;const t=o.document;const s=ar(Fe.fromDom(t));return ur(o).fold(()=>{const e=o.document.documentElement;const t=e.clientWidth;const n=e.clientHeight;return fr(s.left,s.top,t,n)},e=>fr(Math.max(e.pageLeft,s.left),Math.max(e.pageTop,s.top),e.width,e.height))};const gr=(e,t)=>S(Xo(e),t);const pr=(e,t)=>{let n=[];Le(Xo(e),e=>{if(t(e)){n=n.concat([e])}n=n.concat(pr(e,t))});return n};const hr=(e,t)=>Lo(t,e);const br=(e,t,n)=>ys(e,t,n).isSome();class vr{constructor(e,t){this.node=e;this.rootNode=t;this.current=this.current.bind(this);this.next=this.next.bind(this);this.prev=this.prev.bind(this);this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){this.node=this.findSibling(this.node,"firstChild","nextSibling",e);return this.node}prev(e){this.node=this.findSibling(this.node,"lastChild","previousSibling",e);return this.node}prev2(e){this.node=this.findPreviousNode(this.node,e);return this.node}findSibling(n,e,o,t){if(n){if(!t&&n[e]){return n[e]}if(n!==this.rootNode){let t=n[o];if(t){return t}for(let e=n.parentNode;e&&e!==this.rootNode;e=e.parentNode){t=e[o];if(t){return t}}}}return undefined}findPreviousNode(n,o){if(n){const t=n.previousSibling;if(this.rootNode&&t===this.rootNode){return}if(t){if(!o){for(let e=t.lastChild;e;e=e.lastChild){if(!e.lastChild){return e}}}return t}const e=n.parentNode;if(e&&e!==this.rootNode){return e}}return undefined}}const yr=t=>{return e=>{return!!e&&e.nodeType===t}};const Cr=e=>!!e&&!Object.getPrototypeOf(e);const ze=yr(1);const wr=e=>{const t=e.toLowerCase();return e=>De(e)&&e.nodeName.toLowerCase()===t};const xr=e=>{const n=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){const t=e.nodeName.toLowerCase();return m(n,t)}return false}};const kr=(r,e)=>{const i=e.toLowerCase().split(" ");return t=>{if(ze(t)){const n=t.ownerDocument.defaultView;if(n){for(let e=0;e<i.length;e++){const o=n.getComputedStyle(t,null);const s=o?o.getPropertyValue(r):null;if(s===i[e]){return true}}}}return false}};const Er=t=>{return e=>{return ze(e)&&e.hasAttribute(t)}};const Sr=(t,n)=>{return e=>{return ze(e)&&e.getAttribute(t)===n}};const _r=e=>ze(e)&&e.hasAttribute("data-mce-bogus");const Nr=e=>ze(e)&&e.getAttribute("data-mce-bogus")==="all";const Rr=e=>ze(e)&&e.tagName==="TABLE";const Ar=t=>{return e=>{if(ze(e)){if(e.contentEditable===t){return true}if(e.getAttribute("data-mce-contenteditable")===t){return true}}return false}};const Dr=xr(["textarea","input"]);const je=yr(3);const Or=yr(4);const Tr=yr(7);const Br=yr(8);const Pr=yr(9);const Lr=yr(11);const E=wr("br");const Mr=wr("img");const Ir=Ar("true");const _=Ar("false");const Fr=xr(["td","th"]);const Ur=xr(["td","th","caption"]);const zr=xr(["video","audio","object","embed"]);const jr=wr("li");const Hr="\ufeff";const $r=" ";const Vr=e=>e===Hr;const qr=e=>e.replace(/\uFEFF/g,"");const Wr=(n,o)=>{const e=e=>{if(!n(e)){throw new Error("Can only get "+o+" value of a "+o+" node")}return t(e).getOr("")};const t=e=>n(e)?C.from(e.dom.nodeValue):C.none();const s=(e,t)=>{if(!n(e)){throw new Error("Can only set raw "+o+" value of a "+o+" node")}e.dom.nodeValue=t};return{get:e,getOption:t,set:s}};const Kr=Wr(eo,"text");const Gr=e=>Kr.get(e);const Yr=e=>Kr.getOption(e);const Xr=(e,t)=>Kr.set(e,t);const Qr=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"];const Jr=["td","th"];const Zr=["thead","tbody","tfoot"];const ei=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"];const ti=["h1","h2","h3","h4","h5","h6"];const ni=["li","dd","dt"];const oi=["ul","ol","dl"];const si=["pre","script","textarea","style"];const ri=["pre"].concat(ti);const ii=t=>{let n;return e=>{n=n?n:be(t,f);return Ie(n,g(e))}};const ci=ii(Qr);const ai=e=>g(e)==="table";const li=e=>Zn(e)&&!ci(e);const di=e=>Zn(e)&&g(e)==="br";const ui=ii(ei);const fi=ii(oi);const mi=ii(ni);const gi=ii(Zr);const pi=ii(Jr);const hi=ii(si);const bi=ii(ri);const vi=e=>bi(e)||li(e);const yi=e=>{const t=[];let n=e.dom;while(n){t.push(Fe.fromDom(n));n=n.lastChild}return t};const Ci=e=>{const t=hr(e,"br");const n=S(yi(e).slice(-1),di);if(t.length===n.length){Le(n,Ue)}};const wi=()=>{const e=Fe.fromTag("br");ro(e,"data-mce-bogus","1");return e};const xi=e=>{$s(e);Us(e,wi())};const ki=n=>{Zo(n).each(t=>{Wo(t).each(e=>{if(ci(n)&&di(t)&&ci(e)){Ue(t)}})})};const Ei=Hr;const Si=Vr;const _i=qr;const Ni=ze;const Ri=je;const Ai=e=>{if(Ri(e)){e=e.parentNode}return Ni(e)&&e.hasAttribute("data-mce-caret")};const Di=e=>Ri(e)&&Si(e.data);const Oi=e=>Ai(e)||Di(e);const Ti=e=>e.firstChild!==e.lastChild||!E(e.firstChild);const Bi=(t,e)=>{var n;const o=(n=t.ownerDocument)!==null&&n!==void 0?n:document;const s=o.createTextNode(Ei);const r=t.parentNode;if(!e){const e=t.nextSibling;if(Ri(e)){if(Oi(e)){return e}if(Ii(e)){e.splitText(1);return e}}if(t.nextSibling){r===null||r===void 0?void 0:r.insertBefore(s,t.nextSibling)}else{r===null||r===void 0?void 0:r.appendChild(s)}}else{const e=t.previousSibling;if(Ri(e)){if(Oi(e)){return e}if(Fi(e)){return e.splitText(e.data.length-1)}}r===null||r===void 0?void 0:r.insertBefore(s,t)}return s};const Pi=e=>{const t=e.container();if(!je(t)){return false}return t.data.charAt(e.offset())===Ei||e.isAtStart()&&Di(t.previousSibling)};const Li=e=>{const t=e.container();if(!je(t)){return false}return t.data.charAt(e.offset()-1)===Ei||e.isAtEnd()&&Di(t.nextSibling)};const Mi=(e,t,n)=>{var o;const s=(o=t.ownerDocument)!==null&&o!==void 0?o:document;const r=s.createElement(e);r.setAttribute("data-mce-caret",n?"before":"after");r.setAttribute("data-mce-bogus","all");r.appendChild(wi().dom);const i=t.parentNode;if(!n){if(t.nextSibling){i===null||i===void 0?void 0:i.insertBefore(r,t.nextSibling)}else{i===null||i===void 0?void 0:i.appendChild(r)}}else{i===null||i===void 0?void 0:i.insertBefore(r,t)}return r};const Ii=e=>Ri(e)&&e.data[0]===Ei;const Fi=e=>Ri(e)&&e.data[e.data.length-1]===Ei;const Ui=e=>{var t;const n=e.getElementsByTagName("br");const o=n[n.length-1];if(_r(o)){(t=o.parentNode)===null||t===void 0?void 0:t.removeChild(o)}};const zi=e=>{if(e&&e.hasAttribute("data-mce-caret")){Ui(e);e.removeAttribute("data-mce-caret");e.removeAttribute("data-mce-bogus");e.removeAttribute("style");e.removeAttribute("data-mce-style");e.removeAttribute("_moz_abspos");return e}return null};const ji=e=>Ai(e.startContainer);const Hi=Ir;const $i=_;const Vi=E;const qi=je;const Wi=xr(["script","style","textarea"]);const Ki=xr(["img","input","textarea","hr","iframe","video","audio","object","embed"]);const Gi=xr(["table"]);const Yi=Oi;const Xi=e=>{if(Yi(e)){return false}if(qi(e)){return!Wi(e.parentNode)}return Ki(e)||Vi(e)||Gi(e)||Ji(e)};const Qi=e=>ze(e)&&e.getAttribute("unselectable")==="true";const Ji=e=>!Qi(e)&&$i(e);const Zi=(t,n)=>{for(let e=t.parentNode;e&&e!==n;e=e.parentNode){if(Ji(e)){return false}if(Hi(e)){return true}}return true};const ec=e=>{if(!Ji(e)){return false}return!le(We(e.getElementsByTagName("*")),(e,t)=>{return e||Hi(t)},false)};const tc=e=>Ki(e)||ec(e);const nc=(e,t)=>Xi(e)&&Zi(e,t);const oc=/^[ \t\r\n]*$/;const sc=e=>oc.test(e);const rc=e=>" \f\t\v".indexOf(e)!==-1;const ic=e=>e==="\n"||e==="\r";const cc=(e,t)=>t<e.length&&t>=0?ic(e[t]):false;const ac=(e,t=4,n=true,o=true)=>{const s=Mt(" ",t);const r=e.replace(/\t/g,s);const i=le(r,(e,t)=>{if(rc(t)||t===$r){if(e.pcIsSpace||e.str===""&&n||e.str.length===r.length-1&&o||cc(r,e.str.length+1)){return{pcIsSpace:false,str:e.str+$r}}else{return{pcIsSpace:true,str:e.str+" "}}}else{return{pcIsSpace:ic(t),str:e.str+t}}},{pcIsSpace:false,str:""});return i.str};const lc=(e,t)=>{const n=Fe.fromDom(t);const o=Fe.fromDom(e);return br(o,"pre,code",h(k,n))};const dc=(e,t)=>{return je(e)&&sc(e.data)&&!lc(e,t)};const uc=e=>{return ze(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))};const fc=(e,t)=>{return Xi(e)&&!dc(e,t)||uc(e)||mc(e)};const mc=Er("data-mce-bookmark");const gc=Er("data-mce-bogus");const pc=Sr("data-mce-bogus","all");const hc=(t,n)=>{let o=0;if(fc(t,t)){return false}else{let e=t.firstChild;if(!e){return true}const s=new vr(e,t);do{if(n){if(pc(e)){e=s.next(true);continue}if(gc(e)){e=s.next();continue}}if(E(e)){o++;e=s.next();continue}if(fc(e,t)){return false}e=s.next()}while(e);return o<=1}};const l=(e,t=true)=>hc(e.dom,t);const bc="data-mce-block";const vc=e=>S(Ee(e),e=>!/[A-Z]/.test(e));const yc=e=>vc(e).join(",");const Cc=(e,t)=>{if(De(t.querySelector(e))){t.setAttribute(bc,"true");if(t.getAttribute("data-mce-selected")==="inline-boundary"){t.removeAttribute("data-mce-selected")}return true}else{t.removeAttribute(bc);return false}};const wc=(e,t)=>{const n=yc(e.getTransparentElements());const o=yc(e.getBlockElements());return S(t.querySelectorAll(n),e=>Cc(o,e))};const xc=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let e=t[o];e;e=e[o]){if(l(Fe.fromDom(e))){(n=e.parentNode)===null||n===void 0?void 0:n.removeChild(e);return}}};const kc=(e,t)=>{const n=document.createRange();const o=e.parentNode;if(o){n.setStartBefore(e);n.setEndBefore(t);const s=n.extractContents();xc(s,true);n.setStartAfter(t);n.setEndAfter(e);const r=n.extractContents();xc(r,false);if(!l(Fe.fromDom(s))){o.insertBefore(s,e)}if(!l(Fe.fromDom(t))){o.insertBefore(t,e)}if(!l(Fe.fromDom(r))){o.insertBefore(r,e)}o.removeChild(e)}};const Ec=(s,e,t)=>{const n=s.getBlockElements();const o=Fe.fromDom(e);const r=e=>g(e)in n;const i=e=>k(e,o);Le(Ws(t),o=>{gs(o,r,i).each(t=>{const e=gr(o,e=>r(e)&&!s.isValidChild(g(t),g(e)));if(e.length>0){const n=$o(t);Le(e,t=>{gs(t,r,i).each(e=>{kc(e.dom,t.dom)})});n.each(e=>wc(s,e.dom))}})})};const Sc=(t,e,n)=>{Le([...n,...Tc(t,e)?[e]:[]],e=>Le(hr(Fe.fromDom(e),e.nodeName.toLowerCase()),e=>{if(Bc(t,e.dom)){Vs(e)}}))};const _c=(e,t)=>{const n=wc(e,t);Ec(e,t,n);Sc(e,t,n)};const Nc=(e,t)=>{if(Oc(e,t)){const n=yc(e.getBlockElements());Cc(n,t)}};const Rc=(t,n,e)=>{const o=e=>k(e,Fe.fromDom(n));const s=Vo(Fe.fromDom(e),o);ye(s,s.length-2).filter(Zn).fold(()=>_c(t,n),e=>_c(t,e.dom))};const Ac=e=>e.hasAttribute(bc);const Dc=(e,t)=>Ie(e.getTransparentElements(),t);const Oc=(e,t)=>ze(t)&&Dc(e,t.nodeName);const Tc=(e,t)=>Oc(e,t)&&Ac(t);const Bc=(e,t)=>Oc(e,t)&&!Ac(t);const Pc=(e,t)=>t.type===1&&Dc(e,t.name)&&Re(t.attr(bc));const Lc=(e,t)=>t.type===1&&Dc(e,t.name)&&V(t.attr(bc));const Mc=gn().browser;const Ic=e=>ue(e,Zn);const Fc=e=>{if(Mc.isFirefox()&&g(e)==="table"){return Ic(Xo(e)).filter(e=>{return g(e)==="caption"}).bind(s=>{return Ic(Yo(s)).map(e=>{const t=e.dom.offsetTop;const n=s.dom.offsetTop;const o=s.dom.offsetHeight;return t<=n?-o:0})}).getOr(0)}else{return 0}};const Uc=(e,t)=>e.children&&m(e.children,t);const zc=(t,n,o)=>{let s=0,r=0;const i=t.ownerDocument;o=o?o:t;if(n){if(o===t&&n.getBoundingClientRect&&Ds(Fe.fromDom(t),"position")==="static"){const c=n.getBoundingClientRect();s=c.left+(i.documentElement.scrollLeft||t.scrollLeft)-i.documentElement.clientLeft;r=c.top+(i.documentElement.scrollTop||t.scrollTop)-i.documentElement.clientTop;return{x:s,y:r}}let e=n;while(e&&e!==o&&e.nodeType&&!Uc(e,o)){const a=e;s+=a.offsetLeft||0;r+=a.offsetTop||0;e=a.offsetParent}e=n.parentNode;while(e&&e!==o&&e.nodeType&&!Uc(e,o)){s-=e.scrollLeft||0;r-=e.scrollTop||0;e=e.parentNode}r+=Fc(Fe.fromDom(n))}return{x:s,y:r}};const jc=(e,d={})=>{let t=0;const u={};const n=Fe.fromDom(e);const f=Uo(n);const o=e=>{d.referrerPolicy=e};const s=e=>{d.contentCssCors=e};const m=e=>{Us(is(n),e)};const r=e=>{const t=is(n);Cs(t,"#"+e).each(Ue)};const g=e=>p(u,e).getOrThunk(()=>({id:"mce-u"+t++,passed:[],failed:[],count:0}));const i=l=>new Promise((e,t)=>{let n;const o=U._addCacheSuffix(l);const s=g(o);u[o]=s;s.count++;const r=(e,t)=>{Le(e,ee);s.status=t;s.passed=[];s.failed=[];if(n){n.onload=null;n.onerror=null;n=null}};const i=()=>r(s.passed,2);const c=()=>r(s.failed,3);if(e){s.passed.push(e)}if(t){s.failed.push(t)}if(s.status===1){return}if(s.status===2){i();return}if(s.status===3){c();return}s.status=1;const a=Fe.fromTag("link",f.dom);io(a,{rel:"stylesheet",type:"text/css",id:s.id});if(d.contentCssCors){ro(a,"crossOrigin","anonymous")}if(d.referrerPolicy){ro(a,"referrerpolicy",d.referrerPolicy)}n=a.dom;n.onload=i;n.onerror=c;m(a);ro(a,"href",o)});const c=e=>{const t=Promise.allSettled(y(e,e=>i(e).then(Be(e))));return t.then(e=>{const t=ce(e,e=>e.status==="fulfilled");if(t.fail.length>0){return Promise.reject(y(t.fail,e=>e.reason))}else{return y(t.pass,e=>e.value)}})};const a=e=>{const n=U._addCacheSuffix(e);p(u,n).each(e=>{const t=--e.count;if(t===0){delete u[n];r(e.id)}})};const l=e=>{Le(e,e=>{a(e)})};return{load:i,loadAll:c,unload:a,unloadAll:l,_setReferrerPolicy:o,_setContentCssCors:s}};const Hc=()=>{const s=new WeakMap;const e=(e,t)=>{const n=rs(e);const o=n.dom;return C.from(s.get(o)).getOrThunk(()=>{const e=jc(o,t);s.set(o,e);return e})};return{forElement:e}};const $c=Hc();const Vc=e=>e.nodeName.toLowerCase()==="span";const qc=(e,t)=>De(e)&&(fc(e,t)||li(Fe.fromDom(e)));const Wc=(e,t)=>{const n=new vr(e,t).prev(false);const o=new vr(e,t).next(false);const s=V(n)||qc(n,t);const r=V(o)||qc(o,t);return s&&r};const Kc=e=>Vc(e)&&e.getAttribute("data-mce-type")==="bookmark";const Gc=(e,t)=>je(e)&&e.data.length>0&&Wc(e,t);const Yc=e=>ze(e)?e.childNodes.length>0:false;const Xc=e=>Lr(e)||Pr(e);const Qc=(t,e,n)=>{var o;const s=n||e;if(ze(e)&&Kc(e)){return e}const r=e.childNodes;for(let e=r.length-1;e>=0;e--){Qc(t,r[e],s)}if(ze(e)){const i=e.childNodes;if(i.length===1&&Kc(i[0])){(o=e.parentNode)===null||o===void 0?void 0:o.insertBefore(i[0],e)}}if(!Xc(e)&&!fc(e,s)&&!Yc(e)&&!Gc(e,s)){t.remove(e)}return e};const Jc=U.makeMap;const Zc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;const ea=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;const ta=/[<>&\"\']/g;const na=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi;const oa={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};const sa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};const ra={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":`'`};const ia=e=>{const t=Fe.fromTag("div").dom;t.innerHTML=e;return t.textContent||t.innerText||e};const ca=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let e=0;e<o.length;e+=2){const s=String.fromCharCode(parseInt(o[e],t));if(!sa[s]){const r="&"+o[e+1]+";";n[s]=r;n[r]=s}}return n}else{return undefined}};const aa=ca("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,"+"5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,"+"5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,"+"5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,"+"68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,"+"6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,"+"6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,"+"75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,"+"7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,"+"7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,"+"sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,"+"st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,"+"t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,"+"tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,"+"u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,"+"81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,"+"8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,"+"8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,"+"8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,"+"8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,"+"nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,"+"rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,"+"Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,"+"80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,"+"811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);const la=(e,t)=>e.replace(t?Zc:ea,e=>{return sa[e]||e});const da=e=>(""+e).replace(ta,e=>{return sa[e]||e});const ua=(e,t)=>e.replace(t?Zc:ea,e=>{if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return sa[e]||"&#"+e.charCodeAt(0)+";"});const fa=(e,t,n)=>{const o=n||aa;return e.replace(t?Zc:ea,e=>{return sa[e]||o[e]||e})};const ma=(e,t)=>{const n=ca(t)||aa;const o=(e,t)=>e.replace(t?Zc:ea,e=>{if(sa[e]!==undefined){return sa[e]}if(n[e]!==undefined){return n[e]}if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return"&#"+e.charCodeAt(0)+";"});const s=(e,t)=>{return fa(e,t,n)};const r=Jc(e.replace(/\+/g,","));if(r.named&&r.numeric){return o}if(r.named){if(t){return s}return fa}if(r.numeric){return ua}return la};const ga=e=>e.replace(na,(e,t)=>{if(t){if(t.charAt(0).toLowerCase()==="x"){t=parseInt(t.substr(1),16)}else{t=parseInt(t,10)}if(t>65535){t-=65536;return String.fromCharCode(55296+(t>>10),56320+(t&1023))}return oa[t]||String.fromCharCode(t)}return ra[e]||aa[e]||ia(e)});const pa={encodeRaw:la,encodeAllRaw:da,encodeNumeric:ua,encodeNamed:fa,getEncodeFunc:ma,decode:ga};const ha={};const ba={};const va={};const ya=U.makeMap,Ca=U.each,wa=U.extend,xa=U.explode,ka=U.inArray;const Ea=(e,t)=>{e=U.trim(e);return e?e.split(t||" "):[]};const Sa=(e,t={})=>{const n=ya(e," ",ya(e.toUpperCase()," "));return wa(n,t)};const _a=e=>Sa("td th li dt dd figcaption caption details summary",e.getTextBlockElements());const Na=e=>{const c={};let a,t;let n,o;const s=(e,t="",n="")=>{const o=Ea(n);const s=Ea(e);let r=s.length;while(r--){const i=Ea([a,t].join(" "));c[s[r]]={attributes:be(i,()=>({})),attributesOrder:i,children:be(o,Be(va))}}};const r=(e,t)=>{const n=Ea(e);const o=Ea(t);let s=n.length;while(s--){const r=c[n[s]];for(let e=0,t=o.length;e<t;e++){r.attributes[o[e]]={};r.attributesOrder.push(o[e])}}};if(ha[e]){return ha[e]}a="id accesskey class dir lang style tabindex title role";t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment";if(e!=="html4"){const i="a ins del canvas map";a+=" contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate";t+=" article aside details dialog figure main header footer hgroup section nav "+i;n+=" audio canvas command datalist mark meter output picture "+"progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){a+=" xml:lang";const l="acronym applet basefont big font strike tt";n=[n,l].join(" ");Ca(Ea(l),e=>{s(e,"",n)});const d="center dir isindex noframes";t=[t,d].join(" ");o=[t,n].join(" ");Ca(Ea(d),e=>{s(e,"",o)})}o=o||[t,n].join(" ");s("html","manifest","head body");s("head","","base command link meta noscript script style title");s("title hr noscript br");s("base","href target");s("link","href rel media hreflang type sizes hreflang");s("meta","name http-equiv content charset");s("style","media type scoped");s("script","src async defer type charset");s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",o);s("address dt dd div caption","",o);s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n);s("blockquote","cite",o);s("ol","reversed start type","li");s("ul","","li");s("li","value",o);s("dl","","dt dd");s("a","href target rel media hreflang type",o);s("q","cite",n);s("ins del","cite datetime",o);s("img","src sizes srcset alt usemap ismap width height onerror onload attach_filter_duplicate_id id count cloud_disk");s("iframe","src name width height",o);s("embed","src type width height");s("object","data type typemustmatch name usemap form width height",[o,"param"].join(" "));s("param","name value");s("map","name",[o,"area"].join(" "));s("area","alt coords shape href target rel media hreflang type");s("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":""));s("colgroup","span","col");s("col","span");s("tbody thead tfoot","","tr");s("tr","","td th");s("td","colspan rowspan headers bgcolor",o);s("th","colspan rowspan headers scope abbr",o);s("form","accept-charset action autocomplete enctype method name novalidate target",o);s("fieldset","disabled form name",[o,"legend"].join(" "));s("label","form for",n);s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?o:n);s("select","disabled form multiple name required size","option optgroup");s("optgroup","disabled label","option");s("option","disabled label selected value");s("textarea","cols dirname disabled form maxlength name readonly required rows wrap");s("menu","type label",[o,"li"].join(" "));s("noscript","",o);if(e!=="html4"){s("wbr");s("ruby","",[n,"rt rp"].join(" "));s("figcaption","",o);s("mark rt rp summary bdi","",n);s("canvas","width height",o);s("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",[o,"track source"].join(" "));s("audio","src crossorigin preload autoplay mediagroup loop muted controls "+"buffered volume",[o,"track source"].join(" "));s("picture","","img source");s("source","src srcset type media sizes");s("track","kind src srclang label default");s("datalist","",[n,"option"].join(" "));s("article section nav aside main header footer","",o);s("hgroup","","h1 h2 h3 h4 h5 h6");s("figure","",[o,"figcaption"].join(" "));s("time","datetime",n);s("dialog","open",o);s("command","type label icon disabled checked radiogroup command");s("output","for form name",n);s("progress","value max",n);s("meter","value min max low high optimum",n);s("details","open",[o,"summary"].join(" "));s("keygen","autofocus challenge disabled form keytype name")}if(e!=="html5-strict"){r("script","language xml:space");r("style","xml:space");r("object","declare classid code codebase codetype archive standby align border hspace vspace");r("embed","align name hspace vspace");r("param","valuetype type");r("a","charset name rev shape coords");r("br","clear");r("applet","codebase archive code object alt name width height align hspace vspace");r("img","name longdesc align border hspace vspace");r("iframe","longdesc frameborder marginwidth marginheight scrolling align");r("font basefont","size color face");r("input","usemap align");r("select");r("textarea");r("h1 h2 h3 h4 h5 h6 div p legend caption","align");r("ul","type compact");r("li","type");r("ol dl menu dir","compact");r("pre","width xml:space");r("hr","align noshade size width");r("isindex","prompt");r("table","summary width frame rules cellspacing cellpadding align bgcolor");r("col","width align char charoff valign");r("colgroup","width align char charoff valign");r("thead","align char charoff valign");r("tr","align char charoff valign bgcolor");r("th","axis align char charoff valign nowrap bgcolor width height");r("form","accept");r("td","abbr axis scope align char charoff valign nowrap bgcolor width height");r("tfoot","align char charoff valign");r("tbody","align char charoff valign");r("area","nohref");r("body","background bgcolor text link vlink alink")}if(e!=="html4"){r("input button select textarea","autofocus");r("input textarea","placeholder");r("a","download");r("link script img","crossorigin");r("img","loading");r("iframe","sandbox seamless allow allowfullscreen loading")}if(e!=="html4"){Le([c.video,c.audio],e=>{delete e.children.audio;delete e.children.video})}Ca(Ea("a form meter progress dfn"),e=>{if(c[e]){delete c[e].children[e]}});delete c.caption.children.table;delete c.script;ha[e]=c;return c};const Ra=(e,n)=>{if(e){const o={};if(Re(e)){e={"*":e}}Ca(e,(e,t)=>{o[t]=o[t.toUpperCase()]=n==="map"?ya(e,/[, ]/):xa(e,/[, ]/)});return o}else{return undefined}};const Aa=(s={})=>{var e;const k={};const r={};let E=[];const i={};const t={};const n=(t,n,o)=>{const e=s[t];if(!e){let e=ba[t];if(!e){e=Sa(n,o);ba[t]=e}return e}else{return ya(e,/[, ]/,ya(e.toUpperCase(),/[, ]/))}};const o=(e=s.schema)!==null&&e!==void 0?e:"html5";const c=Na(o);if(s.verify_html===false){s.valid_elements="*[*]"}const a=Ra(s.valid_styles);const l=Ra(s.invalid_styles,"map");const d=Ra(s.valid_classes,"map");const u=n("whitespace_elements","pre script noscript style textarea video audio iframe object code");const f=n("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");const m=n("void_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track");const g=n("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls allowfullscreen");const p="td th iframe video audio object script code";const h=n("non_empty_elements",p+" pre",m);const b=n("move_caret_before_on_enter_elements",p+" table",m);const v=n("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside main nav figure");const y=n("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup figcaption details summary",v);const C=n("text_inline_elements","span strong b em i font s strike u var cite "+"dfn code mark q sup sub samp");const w=n("transparent_elements","a ins del canvas map");Ca("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{t[e]=new RegExp("</"+e+"[^>]*>","gi")});const S=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$");const x=e=>{const r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;const i=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/;const c=/[*?+]/;if(e){const a=Ea(e,",");let o;let s;if(k["@"]){o=k["@"].attributes;s=k["@"].attributesOrder}for(let e=0,t=a.length;e<t;e++){let n=r.exec(a[e]);if(n){const l=n[1];const d=n[2];const u=n[3];const f=n[5];const m={};const g=[];const p={attributes:m,attributesOrder:g};if(l==="#"){p.paddEmpty=true}if(l==="-"){p.removeEmpty=true}if(n[4]==="!"){p.removeEmptyAttrs=true}if(o){Me(o,(e,t)=>{m[t]=e});if(s){g.push(...s)}}if(f){const h=Ea(f,"|");for(let e=0,t=h.length;e<t;e++){n=i.exec(h[e]);if(n){const b={};const v=n[1];const y=n[2].replace(/[\\:]:/g,":");const C=n[3];const e=n[4];if(v==="!"){p.attributesRequired=p.attributesRequired||[];p.attributesRequired.push(y);b.required=true}if(v==="-"){delete m[y];g.splice(ka(g,y),1);continue}if(C){if(C==="="){p.attributesDefault=p.attributesDefault||[];p.attributesDefault.push({name:y,value:e});b.defaultValue=e}if(C==="~"){p.attributesForced=p.attributesForced||[];p.attributesForced.push({name:y,value:e});b.forcedValue=e}if(C==="<"){b.validValues=ya(e,"?")}}if(c.test(y)){const w=b;p.attributePatterns=p.attributePatterns||[];w.pattern=S(y);p.attributePatterns.push(w)}else{if(!m[y]){g.push(y)}m[y]=b}}}}if(!o&&d==="@"){o=m;s=g}if(u){p.outputName=d;k[u]=p}if(c.test(d)){const x=p;x.pattern=S(d);E.push(x)}else{k[d]=p}}}}};const _=e=>{E=[];Le(Ee(k),e=>{delete k[e]});x(e);Ca(c,(e,t)=>{r[t]=e.children})};const N=e=>{const n=/^(~)?(.+)$/;if(e){delete ba.text_block_elements;delete ba.block_elements;Ca(Ea(e,","),e=>{const t=n.exec(e);if(t){const o=t[1]==="~";const s=o?"span":"div";const n=t[2];r[n]=r[s];i[n]=s;h[n.toUpperCase()]={};h[n]={};if(!o){y[n.toUpperCase()]={};y[n]={}}if(!k[n]){let e=k[s];e=wa({},e);delete e.removeEmptyAttrs;delete e.removeEmpty;k[n]=e}Ca(r,(e,t)=>{if(e[s]){r[t]=e=wa({},r[t]);e[n]=e[s]}})}})}};const R=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete ha[o];if(e){Ca(Ea(e,","),e=>{const n=t.exec(e);if(n){const o=n[1];let t;if(o){t=r[n[2]]}else{t=r[n[2]]={"#comment":{}}}t=r[n[2]];Ca(Ea(n[3],"|"),e=>{if(o==="-"){delete t[e]}else{t[e]={}}})}})}};const A=e=>{const t=k[e];if(t){return t}let n=E.length;while(n--){const o=E[n];if(o.pattern.test(e)){return o}}return undefined};if(!s.valid_elements){Ca(c,(e,t)=>{k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};r[t]=e.children});Ca(Ea("strong/b em/i"),e=>{const t=Ea(e,"/");k[t[1]].outputName=t[0]});Ca(C,(e,t)=>{if(k[t]){if(s.padd_empty_block_inline_children){k[t].paddInEmptyBlock=true}k[t].removeEmpty=true}});Ca(Ea("ol ul blockquote a table tbody"),e=>{if(k[e]){k[e].removeEmpty=true}});Ca(Ea("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),e=>{k[e].paddEmpty=true});Ca(Ea("span"),e=>{k[e].removeEmptyAttrs=true})}else{_(s.valid_elements)}N(s.custom_elements);R(s.valid_children);x(s.extended_valid_elements);R("+ol[ul|ol],+ul[ul|ol]");Ca({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{if(k[t]){k[t].parentsRequired=Ea(e)}});if(s.invalid_elements){Ca(xa(s.invalid_elements),e=>{if(k[e]){delete k[e]}})}if(!A("span")){x("span[!data-mce-type|*]")}const D=Be(a);const O=Be(l);const T=Be(d);const B=Be(g);const P=Be(y);const L=Be(v);const M=Be(C);const I=Be(Object.seal(m));const F=Be(f);const U=Be(h);const z=Be(b);const j=Be(u);const H=Be(w);const $=Be(Object.seal(t));const V=(e,t)=>{const n=r[e.toLowerCase()];return!!(n&&n[t.toLowerCase()])};const q=(e,t)=>{const n=A(e);if(n){if(t){if(n.attributes[t]){return true}const o=n.attributePatterns;if(o){let e=o.length;while(e--){if(o[e].pattern.test(t)){return true}}}}else{return true}}return false};const W=Be(i);return{type:o,children:r,elements:k,getValidStyles:D,getValidClasses:T,getBlockElements:P,getInvalidStyles:O,getVoidElements:I,getTextBlockElements:L,getTextInlineElements:M,getBoolAttrs:B,getElementRule:A,getSelfClosingElements:F,getNonEmptyElements:U,getMoveCaretBeforeOnEnterElements:z,getWhitespaceElements:j,getTransparentElements:H,getSpecialElements:$,isValidChild:V,isValid:q,getCustomElements:W,addValidElements:x,setValidElements:_,addCustomElements:N,addValidChildren:R}};const Da=(m={},e)=>{const g=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi;const p=/\s*([^:]+):\s*([^;]+);?/g;const h=/\s+$/;const b={};let t;let i;const v=Hr;if(e){t=e.getValidStyles();i=e.getInvalidStyles()}const n=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let e=0;e<n.length;e++){b[n[e]]=v+e;b[v+e]=n[e]}const y={parse:e=>{const l={};let o=false;const c=m.url_converter;const a=m.url_converter_scope||y;const t=(e,t,n)=>{const o=l[e+"-top"+t];if(!o){return}const s=l[e+"-right"+t];if(!s){return}const r=l[e+"-bottom"+t];if(!r){return}const i=l[e+"-left"+t];if(!i){return}const c=[o,s,r,i];let a=c.length-1;while(a--){if(c[a]!==c[a+1]){break}}if(a>-1&&n){return}l[e+t]=a===-1?c[0]:c.join(" ");delete l[e+"-top"+t];delete l[e+"-right"+t];delete l[e+"-bottom"+t];delete l[e+"-left"+t]};const s=e=>{const t=l[e];if(!t){return}const n=t.split(" ");let o=n.length;while(o--){if(n[o]!==n[0]){return false}}l[e]=n[0];return true};const r=(e,t,n,o)=>{if(!s(t)){return}if(!s(n)){return}if(!s(o)){return}l[e]=l[t]+" "+l[n]+" "+l[o];delete l[t];delete l[n];delete l[o]};const i=e=>{o=true;return b[e]};const d=(e,t)=>{if(o){e=e.replace(/\uFEFF[0-9]/g,e=>{return b[e]})}if(!t){e=e.replace(/\\([\'\";:])/g,"$1")}return e};const n=e=>{return String.fromCharCode(parseInt(e.slice(1),16))};const u=e=>{return e.replace(/\\[0-9a-f]+/gi,n)};const f=(e,t,n,o,s,r)=>{s=s||r;if(s){s=d(s);return`'`+s.replace(/\'/g,`\\'`)+`'`}t=d(t||n||o||"");if(!m.allow_script_urls){const i=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(i)){return""}if(!m.allow_svg_data_urls&&/^data:image\/svg/i.test(i)){return""}}if(c){t=c.call(a,t,"style")}return`url('`+t.replace(/\'/g,`\\'`)+`')`};if(e){e=e.replace(/[\u0000-\u001F]/g,"");e=e.replace(/\\[\"\';:\uFEFF]/g,i).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>{return e.replace(/[;:]/g,i)});let n;while(n=p.exec(e)){p.lastIndex=n.index+n[0].length;let e=n[1].replace(h,"").toLowerCase();let t=n[2].replace(h,"");if(e&&t){e=u(e);t=u(t);if(e.indexOf(v)!==-1||e.indexOf('"')!==-1){continue}if(!m.allow_script_urls&&(e==="behavior"||/expression\s*\(|\/\*|\*\//.test(t))){continue}if(e==="font-weight"&&t==="700"){t="bold"}else if(e==="color"||e==="background-color"){t=t.toLowerCase()}t=t.replace(g,f);l[e]=o?d(t,true):t}}t("border","",true);t("border","-width");t("border","-color");t("border","-style");t("padding","");t("margin","");r("border","border-width","border-style","border-color");if(l.border==="medium none"){delete l.border}if(l["border-image"]==="none"){delete l["border-image"]}}return l},serialize:(s,n)=>{let r="";const e=(e,t)=>{const o=t[e];if(o){for(let n=0,e=o.length;n<e;n++){const e=o[n];const t=s[e];if(t){r+=(r.length>0?" ":"")+e+": "+t+";"}}}};const o=(e,t)=>{if(!i||!t){return true}let n=i["*"];if(n&&n[e]){return false}n=i[t];return!(n&&n[e])};if(n&&t){e("*",t);e(n,t)}else{Me(s,(e,t)=>{if(e&&o(t,n)){r+=(r.length>0?" ":"")+t+": "+e+";"}})}return r}};return y};const Oa={keyLocation:true,layerX:true,layerY:true,returnValue:true,webkitMovementX:true,webkitMovementY:true,keyIdentifier:true,mozPressure:true};const Ta=e=>e instanceof Event||Oe(e.initEvent);const Ba=e=>e.isDefaultPrevented===f||e.isDefaultPrevented===a;const Pa=e=>Ae(e.preventDefault)||Ta(e);const La=(t,e)=>{const n=e!==null&&e!==void 0?e:{};for(const e in t){if(!Ie(Oa,e)){n[e]=t[e]}}if(De(t.composedPath)){n.composedPath=()=>t.composedPath()}return n};const Ma=(e,t,n,o)=>{var s;const r=La(t,o);r.type=e;if(Ae(r.target)){r.target=(s=r.srcElement)!==null&&s!==void 0?s:n}if(Pa(t)){r.preventDefault=()=>{r.defaultPrevented=true;r.isDefaultPrevented=f;if(Oe(t.preventDefault)){t.preventDefault()}};r.stopPropagation=()=>{r.cancelBubble=true;r.isPropagationStopped=f;if(Oe(t.stopPropagation)){t.stopPropagation()}};r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=f;r.stopPropagation()};if(!Ba(r)){r.isDefaultPrevented=r.defaultPrevented===true?f:a;r.isPropagationStopped=r.cancelBubble===true?f:a;r.isImmediatePropagationStopped=a}}return r};const Ia="mce-data-";const Fa=/^(?:mouse|contextmenu)|click/;const Ua=(e,t,n,o)=>{e.addEventListener(t,n,o||false)};const za=(e,t,n,o)=>{e.removeEventListener(t,n,o||false)};const ja=e=>De(e)&&Fa.test(e.type);const Ha=(e,t)=>{const n=Ma(e.type,e,document,t);if(ja(e)&&V(e.pageX)&&!V(e.clientX)){const o=n.target.ownerDocument||document;const s=o.documentElement;const r=o.body;const i=n;i.pageX=e.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0);i.pageY=e.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)}return n};const $a=(e,t,n)=>{const o=e.document,s={type:"ready"};if(n.domLoaded){t(s);return}const r=()=>{return o.readyState==="complete"||o.readyState==="interactive"&&o.body};const i=()=>{za(e,"DOMContentLoaded",i);za(e,"load",i);if(!n.domLoaded){n.domLoaded=true;t(s)}e=null};if(r()){i()}else{Ua(e,"DOMContentLoaded",i)}if(!n.domLoaded){Ua(e,"load",i)}};class Va{constructor(){this.domLoaded=false;this.events={};this.count=1;this.expando=Ia+(+new Date).toString(32);this.hasFocusIn="onfocusin"in document.documentElement;this.count=1}bind(s,e,r,i){const c=this;let a;const l=window;const d=e=>{c.executeHandlers(Ha(e||l.event),u)};if(!s||je(s)||Br(s)){return r}let u;if(!s[c.expando]){u=c.count++;s[c.expando]=u;c.events[u]={}}else{u=s[c.expando]}i=i||s;const f=e.split(" ");let m=f.length;while(m--){let e=f[m];let t=d;let n=false;let o=false;if(e==="DOMContentLoaded"){e="ready"}if(c.domLoaded&&e==="ready"&&s.readyState==="complete"){r.call(i,Ha({type:e}));continue}if(!c.hasFocusIn&&(e==="focusin"||e==="focusout")){n=true;o=e==="focusin"?"focus":"blur";t=e=>{const t=Ha(e||l.event);t.type=t.type==="focus"?"focusin":"focusout";c.executeHandlers(t,u)}}a=c.events[u][e];if(!a){c.events[u][e]=a=[{func:r,scope:i}];a.fakeName=o;a.capture=n;a.nativeHandler=t;if(e==="ready"){$a(s,t,c)}else{Ua(s,o||e,t,n)}}else{if(e==="ready"&&c.domLoaded){r(Ha({type:e}))}else{a.push({func:r,scope:i})}}}s=a=null;return r}unbind(o,t,s){if(!o||je(o)||Br(o)){return this}const e=o[this.expando];if(e){let n=this.events[e];if(t){const r=t.split(" ");let e=r.length;while(e--){const t=r[e];const i=n[t];if(i){if(s){let e=i.length;while(e--){if(i[e].func===s){const c=i.nativeHandler;const a=i.fakeName,l=i.capture;const d=i.slice(0,e).concat(i.slice(e+1));d.nativeHandler=c;d.fakeName=a;d.capture=l;n[t]=d}}}if(!s||i.length===0){delete n[t];za(o,i.fakeName||t,i.nativeHandler,i.capture)}}}}else{Me(n,(e,t)=>{za(o,e.fakeName||t,e.nativeHandler,e.capture)});n={}}for(const e in n){if(Ie(n,e)){return this}}delete this.events[e];try{delete o[this.expando]}catch(e){o[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||je(e)||Br(e)){return this}const o=Ha({type:t,target:e},n);do{const s=e[this.expando];if(s){this.executeHandlers(o,s)}e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(n){if(!n||je(n)||Br(n)){return this}if(n[this.expando]){this.unbind(n)}if(!n.getElementsByTagName){n=n.document}if(n&&n.getElementsByTagName){this.unbind(n);const e=n.getElementsByTagName("*");let t=e.length;while(t--){n=e[t];if(n[this.expando]){this.unbind(n)}}}return this}destroy(){this.events={}}cancel(e){if(e){e.preventDefault();e.stopImmediatePropagation()}return false}executeHandlers(n,e){const t=this.events[e];const o=t&&t[n.type];if(o){for(let e=0,t=o.length;e<t;e++){const s=o[e];if(s&&s.func.call(s.scope,n)===false){n.preventDefault()}if(n.isImmediatePropagationStopped()){return}}}}}Va.Event=new Va;const qa=U.each;const Wa=U.grep;const Ka="data-mce-style";const Ga=U.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," ");const Ya=(e,t,n)=>{if(Ae(n)||n===""){uo(e,t)}else{ro(e,t,n)}};const Xa=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase());const Qa=(n,o)=>{let s=0;if(n){for(let e=n.nodeType,t=n.previousSibling;t;t=t.previousSibling){const r=t.nodeType;if(o&&je(t)){if(r===e||!t.data.length){continue}}s++;e=r}}return s};const Ja=(e,t)=>{const n=co(t,"style");const o=e.serialize(e.parse(n),g(t));Ya(t,Ka,o)};const Za=(e,t)=>{if(q(e)){return Ie(Ga,t)?e+"":e+"px"}else{return e}};const el=(e,t,n)=>{const o=Xa(t);if(Ae(n)||n===""){Ps(e,o)}else{Rs(e,o,Za(n,o))}};const tl=(o,r,i)=>{const s=r.keep_values;const e={set:(e,t,n)=>{const o=Fe.fromDom(e);if(Oe(r.url_converter)&&De(t)){t=r.url_converter.call(r.url_converter_scope||i(),String(t),n,e)}const s="data-mce-"+n;Ya(o,s,t);Ya(o,n,t)},get:(e,t)=>{const n=Fe.fromDom(e);return co(n,"data-mce-"+t)||co(n,t)}};const t={style:{set:(e,t)=>{const n=Fe.fromDom(e);if(s){Ya(n,Ka,t)}uo(n,"style");if(Re(t)){As(n,o.parse(t))}},get:e=>{const t=Fe.fromDom(e);const n=co(t,Ka)||co(t,"style");return o.serialize(o.parse(n),g(t))}}};if(s){t.href=t.src=e}return t};const He=(a,c={})=>{const n={};const e=window;const s={};let M=0;const I=true;const F=true;const r=$c.forElement(Fe.fromDom(a),{contentCssCors:c.contentCssCors,referrerPolicy:c.referrerPolicy});const l=[];const d=c.schema?c.schema:Aa({});const i=Da({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);const u=c.ownEvents?new Va:Va.Event;const t=d.getBlockElements();const U=e=>{if(Re(e)){return Ie(t,e)}else{return ze(e)&&(Ie(t,e.nodeName)||Tc(d,e))}};const f=e=>e&&a&&Re(e)?a.getElementById(e):e;const m=e=>{const t=f(e);return De(t)?Fe.fromDom(t):null};const o=(e,t,n="")=>{let o;const s=m(e);if(De(s)&&Zn(s)){const r=Ne[t];if(r&&r.get){o=r.get(s.dom,t)}else{o=co(s,t)}}return De(o)?o:n};const g=e=>{const t=f(e);return Ae(t)?[]:t.attributes};const p=(e,r,i)=>{k(e,e=>{if(ze(e)){const t=Fe.fromDom(e);const n=i===""?null:i;const o=co(t,r);const s=Ne[r];if(s&&s.set){s.set(t.dom,n,r)}else{Ya(t,r,n)}if(o!==n&&c.onSetAttrib){c.onSetAttrib({attrElm:t.dom,attrName:r,attrValue:n})}}})};const z=(e,t)=>{return e.cloneNode(t)};const h=()=>c.root_element||a.body;const j=e=>{const t=mr(e);return{x:t.x,y:t.y,w:t.width,h:t.height}};const b=(e,t)=>zc(a.body,f(e),t);const H=(e,n,o)=>{k(e,e=>{const t=Fe.fromDom(e);el(t,n,o);if(c.update_styles){Ja(i,t)}})};const $=(e,t)=>{k(e,e=>{const n=Fe.fromDom(e);Me(t,(e,t)=>{el(n,t,e)});if(c.update_styles){Ja(i,n)}})};const v=(e,t,n)=>{const o=f(e);if(Ae(o)||!ze(o)){return undefined}if(n){return Ds(Fe.fromDom(o),Xa(t))}else{t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase());if(t==="float"){t="cssFloat"}return o.style?o.style[t]:undefined}};const y=e=>{const t=f(e);if(!t){return{w:0,h:0}}let n=v(t,"width");let o=v(t,"height");if(!n||n.indexOf("px")===-1){n="0"}if(!o||o.indexOf("px")===-1){o="0"}return{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(o,10)||t.offsetHeight||t.clientHeight}};const V=e=>{const t=f(e);const n=b(t);const o=y(t);return{x:n.x,y:n.y,w:o.w,h:o.h}};const C=(e,t)=>{if(!e){return false}const n=Ve(e)?e:[e];return Pe(n,e=>{return Bo(Fe.fromDom(e),t)})};const w=(e,t,n,o)=>{const s=[];let r=f(e);o=o===undefined;const i=n||(h().nodeName!=="BODY"?h().parentNode:null);if(Re(t)){if(t==="*"){t=ze}else{const c=t;t=e=>C(e,c)}}while(r){if(r===i||Ae(r.nodeType)||Pr(r)||Lr(r)){break}if(!t||t(r)){if(o){s.push(r)}else{return[r]}}r=r.parentNode}return o?s:null};const q=(e,t,n)=>{const o=w(e,t,n,false);return o&&o.length>0?o[0]:null};const x=(t,n,o)=>{let s=n;if(t){if(Re(n)){s=e=>{return C(e,n)}}for(let e=t[o];e;e=e[o]){if(Oe(s)&&s(e)){return e}}}return null};const W=(e,t)=>x(e,t,"nextSibling");const K=(e,t)=>x(e,t,"previousSibling");const G=e=>Oe(e.querySelectorAll);const Y=(e,t)=>{var n,o;const s=(o=(n=f(t))!==null&&n!==void 0?n:c.root_element)!==null&&o!==void 0?o:a;return G(s)?We(s.querySelectorAll(e)):[]};const k=function(e,o,t){const s=t!==null&&t!==void 0?t:this;if(Ve(e)){const r=[];qa(e,(e,t)=>{const n=f(e);if(n){r.push(o.call(s,n,t))}});return r}else{const n=f(e);return!n?false:o.call(s,n)}};const E=(e,t)=>{k(e,n=>{Me(t,(e,t)=>{p(n,t,e)})})};const S=(e,n)=>{k(e,e=>{const t=Fe.fromDom(e);Gs(t,n)})};const _=(e,n,o,s,r)=>k(e,e=>{const t=Re(n)?a.createElement(n):n;if(De(o)){E(t,o)}if(s){if(!Re(s)&&s.nodeType){t.appendChild(s)}else if(Re(s)){S(t,s)}}return!r?e.appendChild(t):t});const N=(e,t,n)=>_(a.createElement(e),e,t,n,true);const X=pa.decode;const R=pa.encodeAllRaw;const Q=(e,t,n="")=>{let o="<"+e;for(const s in t){if(Ze(t,s)){o+=" "+s+'="'+R(t[s])+'"'}}if(Lt(n)&&Ie(d.getVoidElements(),e)){return o+" />"}else{return o+">"+n+"</"+e+">"}};const J=e=>{const t=a.createElement("div");const n=a.createDocumentFragment();n.appendChild(t);if(e){t.innerHTML=e}let o;while(o=t.firstChild){n.appendChild(o)}n.removeChild(t);return n};const A=(e,n)=>{return k(e,e=>{const t=Fe.fromDom(e);if(n){Le(Xo(t),e=>{if(eo(e)&&e.dom.length===0){Ue(e)}else{Ms(t,e)}})}Ue(t);return t.dom})};const Z=e=>k(e,t=>{const n=t.attributes;for(let e=n.length-1;e>=0;e--){t.removeAttributeNode(n.item(e))}});const ee=e=>i.parse(e);const te=(e,t)=>i.serialize(e,t);const ne=e=>{if(L!==He.DOM&&a===document){if(n[e]){return}n[e]=true}let t=a.getElementById("mceDefaultStyles");if(!t){t=a.createElement("style");t.id="mceDefaultStyles";t.type="text/css";const e=a.head;if(e.firstChild){e.insertBefore(t,e.firstChild)}else{e.appendChild(t)}}if(t.styleSheet){t.styleSheet.cssText+=e}else{t.appendChild(a.createTextNode(e))}};const oe=e=>{if(!e){e=""}Le(e.split(","),e=>{s[e]=true;r.load(e).catch(Te)})};const D=(e,o,s)=>{k(e,e=>{if(ze(e)){const n=Fe.fromDom(e);const t=o.split(" ");Le(t,e=>{if(De(s)){const t=s?xo:Eo;t(n,e)}else{So(n,e)}})}})};const se=(e,t)=>{D(e,t,true)};const re=(e,t)=>{D(e,t,false)};const ie=(e,t)=>{const n=m(e);const o=t.split(" ");return De(n)&&qe(o,e=>_o(n,e))};const ce=e=>{k(e,e=>Ps(Fe.fromDom(e),"display"))};const ae=e=>{k(e,e=>Rs(Fe.fromDom(e),"display","none"))};const le=e=>{const t=m(e);return De(t)&&On(Ts(t,"display"),"none")};const de=e=>(!e?"mce_":e)+M++;const ue=e=>{const t=m(e);if(De(t)){return ze(t.dom)?t.dom.outerHTML:Ys(t)}else{return""}};const fe=(e,t)=>{k(e,e=>{if(ze(e)){e.outerHTML=t}})};const me=(e,t)=>{const o=f(t);return k(e,e=>{const t=o===null||o===void 0?void 0:o.parentNode;const n=o===null||o===void 0?void 0:o.nextSibling;if(t){if(n){t.insertBefore(e,n)}else{t.appendChild(e)}}return e})};const O=(o,s,r)=>k(s,e=>{var t;const n=Ve(s)?o.cloneNode(true):o;if(r){qa(Wa(e.childNodes),e=>{n.appendChild(e)})}(t=e.parentNode)===null||t===void 0?void 0:t.replaceChild(n,e);return e});const ge=(t,e)=>{if(t.nodeName!==e.toUpperCase()){const n=N(e);qa(g(t),e=>{p(n,e.nodeName,o(t,e.nodeName))});O(n,t,true);return n}else{return t}};const pe=(e,t)=>{let n=e;while(n){let e=t;while(e&&n!==e){e=e.parentNode}if(n===e){break}n=n.parentNode}if(!n&&e.ownerDocument){return e.ownerDocument.documentElement}else{return n}};const T=t=>{if(ze(t)){const e=t.nodeName.toLowerCase()==="a"&&!o(t,"href")&&o(t,"id");if(o(t,"name")||o(t,"data-mce-bookmark")||e){return true}}return false};const he=(e,n)=>{let o=0;if(T(e)){return false}const s=e.firstChild;if(s){const r=new vr(s,e);const i=d?d.getWhitespaceElements():{};const c=n||(d?d.getNonEmptyElements():null);let t=s;do{if(ze(t)){const a=t.getAttribute("data-mce-bogus");if(a){t=r.next(a==="all");continue}const e=t.nodeName.toLowerCase();if(c&&c[e]){if(e==="br"){o++;t=r.next();continue}return false}if(T(t)){return false}}if(Br(t)){return false}if(je(t)&&!sc(t.data)){return false}if(je(t)&&t.parentNode&&i[t.parentNode.nodeName]&&sc(t.data)){return false}t=r.next()}while(t)}return o<=1};const B=()=>a.createRange();const be=(e,t,n)=>{let o=B();let s;let r;if(e&&t&&e.parentNode&&t.parentNode){const i=e.parentNode;o.setStart(i,Qa(e));o.setEnd(t.parentNode,Qa(t));s=o.extractContents();o=B();o.setStart(t.parentNode,Qa(t)+1);o.setEnd(i,Qa(e)+1);r=o.extractContents();i.insertBefore(Qc(L,s),e);if(n){i.insertBefore(n,e)}else{i.insertBefore(t,e)}i.insertBefore(Qc(L,r),e);A(e);return n||t}else{return undefined}};const ve=(t,n,o,s)=>{if(Ve(t)){let e=t.length;const r=[];while(e--){r[e]=ve(t[e],n,o,s)}return r}else{if(c.collect&&(t===a||t===e)){l.push([t,n,o,s])}return u.bind(t,n,o,s||L)}};const ye=(t,n,o)=>{if(Ve(t)){let e=t.length;const s=[];while(e--){s[e]=ye(t[e],n,o)}return s}else{if(l.length>0&&(t===a||t===e)){let e=l.length;while(e--){const[r,i,c]=l[e];if(t===r&&(!n||n===i)&&(!o||o===c)){u.unbind(r,i,c)}}}return u.unbind(t,n,o)}};const Ce=(e,t,n)=>u.dispatch(e,t,n);const we=(e,t,n)=>u.dispatch(e,t,n);const P=e=>{if(e&&ze(e)){const t=e.getAttribute("data-mce-contenteditable");if(t&&t!=="inherit"){return t}return e.contentEditable!=="inherit"?e.contentEditable:null}else{return null}};const xe=t=>{const n=h();let o=null;for(let e=t;e&&e!==n;e=e.parentNode){o=P(e);if(o!==null){break}}return o};const ke=e=>{if(De(e)){const t=ze(e)?e:e.parentElement;const n=P(h())==="true";return De(t)&&ks(Fe.fromDom(t),n)}else{return false}};const Ee=()=>{if(l.length>0){let e=l.length;while(e--){const[t,n,o]=l[e];u.unbind(t,n,o)}}Me(s,(e,t)=>{r.unload(t);delete s[t]})};const Se=(e,t)=>{return e===t||t.contains(e)};const _e=e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset;const L={doc:a,settings:c,win:e,files:s,stdMode:I,boxModel:F,styleSheetLoader:r,boundEvents:l,styles:i,schema:d,events:u,isBlock:U,root:null,clone:z,getRoot:h,getViewPort:j,getRect:V,getSize:y,getParent:q,getParents:w,get:f,getNext:W,getPrev:K,select:Y,is:C,add:_,create:N,createHTML:Q,createFragment:J,remove:A,setStyle:H,getStyle:v,setStyles:$,removeAllAttribs:Z,setAttrib:p,setAttribs:E,getAttrib:o,getPos:b,parseStyle:ee,serializeStyle:te,addStyle:ne,loadCSS:oe,addClass:se,removeClass:re,hasClass:ie,toggleClass:D,show:ce,hide:ae,isHidden:le,uniqueId:de,setHTML:S,getOuterHTML:ue,setOuterHTML:fe,decode:X,encode:R,insertAfter:me,replace:O,rename:ge,findCommonAncestor:pe,run:k,getAttribs:g,isEmpty:he,createRng:B,nodeIndex:Qa,split:be,bind:ve,unbind:ye,fire:we,dispatch:Ce,getContentEditable:P,getContentEditableParent:xe,isEditable:ke,destroy:Ee,isChildOf:Se,dumpRng:_e};const Ne=tl(i,c,Be(L));return L};He.DOM=He(document);He.nodeIndex=Qa;const nl=He.DOM;const ol=0;const sl=1;const rl=2;const il=3;class cl{constructor(e={}){this.states={};this.queue=[];this.scriptLoadedCallbacks={};this.queueLoadedCallbacks=[];this.loading=false;this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(a){return new Promise((e,t)=>{const n=nl;let o;const s=()=>{n.remove(c);if(o){o.onerror=o.onload=o=null}};const r=()=>{s();e()};const i=()=>{s();t("Failed to load script: "+a)};const c=n.uniqueId();o=document.createElement("script");o.id=c;o.type="text/javascript";o.src=U._addCacheSuffix(a);if(this.settings.referrerPolicy){n.setAttrib(o,"referrerpolicy",this.settings.referrerPolicy)}o.onload=r;o.onerror=i;(document.getElementsByTagName("head")[0]||document.body).appendChild(o)})}isDone(e){return this.states[e]===rl}markDone(e){this.states[e]=rl}add(n){const o=this;o.queue.push(n);const e=o.states[n];if(e===undefined){o.states[n]=ol}return new Promise((e,t)=>{if(!o.scriptLoadedCallbacks[n]){o.scriptLoadedCallbacks[n]=[]}o.scriptLoadedCallbacks[n].push({resolve:e,reject:t})})}load(e){return this.add(e)}remove(e){delete this.states[e];delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;this.queue=[];return this.loadScripts(e)}loadScripts(e){const o=this;const n=(t,n)=>{p(o.scriptLoadedCallbacks,n).each(e=>{Le(e,e=>e[t](n))});delete o.scriptLoadedCallbacks[n]};const s=e=>{const t=S(e,e=>e.status==="rejected");if(t.length>0){return Promise.reject(ge(t,({reason:e})=>Ve(e)?e:[e]))}else{return Promise.resolve()}};const r=e=>Promise.allSettled(y(e,t=>{if(o.states[t]===rl){n("resolve",t);return Promise.resolve()}else if(o.states[t]===il){n("reject",t);return Promise.reject(t)}else{o.states[t]=sl;return o.loadScript(t).then(()=>{o.states[t]=rl;n("resolve",t);const e=o.queue;if(e.length>0){o.queue=[];return r(e).then(s)}else{return Promise.resolve()}},()=>{o.states[t]=il;n("reject",t);return Promise.reject(t)})}}));const i=e=>{o.loading=true;return r(e).then(e=>{o.loading=false;const t=o.queueLoadedCallbacks.shift();C.from(t).each(ee);return s(e)})};const c=tt(e);if(o.loading){return new Promise((e,t)=>{o.queueLoadedCallbacks.push(()=>i(c).then(e,t))})}else{return i(c)}}}cl.ScriptLoader=new cl;const al=e=>{let t=e;const n=()=>{return t};const o=e=>{t=e};return{get:n,set:o}};const ll=e=>I(e)&&Ie(e,"raw");const dl=e=>Ve(e)&&e.length>1;const ul={};const fl=al("en");const ml=()=>p(ul,fl.get());const gl=()=>_e(ul,e=>({...e}));const pl=e=>{if(e){fl.set(e)}};const hl=()=>fl.get();const bl=(e,t)=>{let n=ul[e];if(!n){ul[e]=n={}}Me(t,(e,t)=>{n[t.toLowerCase()]=e})};const vl=e=>{const n=ml().getOr({});const o=e=>{if(Oe(e)){return Object.prototype.toString.call(e)}return!t(e)?""+e:""};const t=e=>e===""||e===null||e===undefined;const s=e=>{const t=o(e);return p(n,t.toLowerCase()).map(o).getOr(t)};const r=e=>e.replace(/{context:\w+}$/,"");if(t(e)){return""}if(ll(e)){return o(e.raw)}if(dl(e)){const n=e.slice(1);const i=s(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>Ie(n,t)?o(n[t]):e);return r(i)}return r(s(e))};const yl=()=>ml().bind(e=>p(e,"_dir")).exists(e=>e==="rtl");const Cl=e=>Ie(ul,e);const wl={getData:gl,setCode:pl,getCode:hl,add:bl,translate:vl,isRtl:yl,hasCode:Cl};const xl=()=>{const n=[];const s={};const r={};const o=[];const i=(t,n)=>{const e=S(o,e=>e.name===t&&e.state===n);Le(e,e=>e.resolve())};const c=e=>Ie(s,e);const e=e=>Ie(r,e);const t=e=>{if(r[e]){return r[e].instance}return undefined};const a=(e,t)=>{const n=wl.getCode();const o=","+(t||"")+",";if(!n||t&&o.indexOf(","+n+",")===-1){return}cl.ScriptLoader.add(s[e]+"/langs/"+n+".js")};const l=(e,t)=>{if(xl.languageLoad!==false){if(c(e)){a(e,t)}else{g(e,"loaded").then(()=>a(e,t))}}};const d=(e,t)=>{n.push(t);r[e]={instance:t};i(e,"added");return t};const u=e=>{delete s[e];delete r[e]};const f=(e,t)=>{if(Re(t)){return Re(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}}else{return t}};const m=(e,t)=>{if(s[e]){return Promise.resolve()}let n=Re(t)?t:t.prefix+t.resource+t.suffix;if(n.indexOf("/")!==0&&n.indexOf("://")===-1){n=xl.baseURL+"/"+n}s[e]=n.substring(0,n.lastIndexOf("/"));const o=()=>{i(e,"loaded");return Promise.resolve()};if(r[e]){return o()}else{return cl.ScriptLoader.add(n).then(o)}};const g=(t,n="added")=>{if(n==="added"&&e(t)){return Promise.resolve()}else if(n==="loaded"&&c(t)){return Promise.resolve()}else{return new Promise(e=>{o.push({name:t,state:n,resolve:e})})}};return{items:n,urls:s,lookup:r,get:t,requireLangPack:l,add:d,remove:u,createUrl:f,load:m,waitFor:g}};xl.languageLoad=true;xl.baseURL="";xl.PluginManager=xl();xl.ThemeManager=xl();xl.ModelManager=xl();const kl=e=>{const t=al(C.none());const n=()=>t.get().each(e);const o=()=>{n();t.set(C.none())};const s=()=>t.get().isSome();const r=()=>t.get();const i=e=>{n();t.set(C.some(e))};return{clear:o,isSet:s,get:r,set:i}};const El=t=>{const n=al(C.none());const o=()=>n.get().each(e=>clearInterval(e));const e=()=>{o();n.set(C.none())};const s=()=>n.get().isSome();const r=()=>n.get();const i=e=>{o();n.set(C.some(setInterval(e,t)))};return{clear:e,isSet:s,get:r,set:i}};const Sl=()=>{const t=kl(Te);const e=e=>t.get().each(e);return{...t,on:e}};const _l=(t,n)=>{let o=null;const e=()=>{if(!z(o)){clearTimeout(o);o=null}};const s=(...e)=>{if(z(o)){o=setTimeout(()=>{o=null;t.apply(null,e)},n)}};return{cancel:e,throttle:s}};const Nl=(t,n)=>{let o=null;const s=()=>{if(!z(o)){clearTimeout(o);o=null}};const e=(...e)=>{s();o=setTimeout(()=>{o=null;t.apply(null,e)},n)};return{cancel:s,throttle:e}};const Rl=Be("mce-annotation");const Al=Be("data-mce-annotation");const Dl=Be("data-mce-annotation-uid");const Ol=Be("data-mce-annotation-active");const Tl=Be("data-mce-annotation-classes");const Bl=Be("data-mce-annotation-attrs");const Pl=t=>e=>k(e,t);const Ll=(o,e)=>{const t=o.selection.getRng();const n=Fe.fromDom(t.startContainer);const s=Fe.fromDom(o.getBody());const r=e.fold(()=>"."+Rl(),e=>`[${Al()}="${e}"]`);const i=Qo(n,t.startOffset).getOr(n);const c=ws(i,r,Pl(s));return c.bind(e=>ao(e,`${Dl()}`).bind(n=>ao(e,`${Al()}`).map(e=>{const t=Fl(o,n);return{uid:n,name:e,elements:t}})))};const Ml=e=>Zn(e)&&_o(e,Rl());const Il=(e,t)=>lo(e,"data-mce-bogus")||br(e,'[data-mce-bogus="all"]',Pl(t));const Fl=(e,t)=>{const n=Fe.fromDom(e.getBody());const o=hr(n,`[${Dl()}="${t}"]`);return S(o,e=>!Il(e,n))};const Ul=(e,t)=>{const o=Fe.fromDom(e.getBody());const n=hr(o,`[${Al()}="${t}"]`);const s={};Le(n,t=>{if(!Il(t,o)){const e=co(t,Dl());const n=p(s,e).getOr([]);s[e]=n.concat([t])}});return s};const zl=(n,t)=>{const r=al({});const i=()=>({listeners:[],previous:Sl()});const e=(e,t)=>{o(e,e=>{t(e);return e})};const o=(e,t)=>{const n=r.get();const o=p(n,e).getOrThunk(i);const s=t(o);n[e]=s;r.set(n)};const c=(t,n,o)=>{e(t,e=>{Le(e.listeners,e=>e(true,t,{uid:n,nodes:y(o,e=>e.dom)}))})};const a=t=>{e(t,e=>{Le(e.listeners,e=>e(false,t))})};const l=(e,t)=>{Le(Fl(n,e),e=>{if(t){ro(e,Ol(),"true")}else{uo(e,Ol())}})};const s=Nl(()=>{const e=ve(t.getNames());Le(e,t=>{o(t,o=>{const s=o.previous.get();Ll(n,C.some(t)).fold(()=>{s.each(e=>{a(t);o.previous.clear();l(e,false)})},({uid:e,name:t,elements:n})=>{if(!On(s,e)){s.each(e=>l(e,false));c(t,e,n);o.previous.set(e);l(e,true)}});return{previous:o.previous,listeners:o.listeners}})})},30);n.on("remove",()=>{s.cancel()});n.on("NodeChange",()=>{s.throttle()});const d=(e,t)=>{o(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))};return{addListener:d}};const jl=(e,t)=>{const n=Al();const o=e=>C.from(e.attr(n)).bind(t.lookup);const s=t=>{var e,n;t.attr(Dl(),null);t.attr(Al(),null);t.attr(Ol(),null);const o=C.from(t.attr(Bl())).map(e=>e.split(",")).getOr([]);const s=C.from(t.attr(Tl())).map(e=>e.split(",")).getOr([]);Le(o,e=>t.attr(e,null));const r=(n=(e=t.attr("class"))===null||e===void 0?void 0:e.split(" "))!==null&&n!==void 0?n:[];const i=he(r,[Rl()].concat(s));t.attr("class",i.length>0?i.join(" "):null);t.attr(Tl(),null);t.attr(Bl(),null)};e.serializer.addTempAttr(Ol());e.serializer.addAttributeFilter(n,e=>{for(const t of e){o(t).each(e=>{if(e.persistent===false){if(t.name==="span"){t.unwrap()}else{s(t)}}})}})};const Hl=()=>{const n={};const e=(e,t)=>{n[e]={name:e,settings:t}};const t=e=>p(n,e).map(e=>e.settings);const o=()=>Ee(n);return{register:e,lookup:t,getNames:o}};let $l=0;const Vl=e=>{const t=new Date;const n=t.getTime();const o=Math.floor(Math.random()*1e9);$l++;return e+"_"+o+$l+String(n)};const ql=(t,e)=>{Le(e,e=>{xo(t,e)})};const Wl=(t,e)=>{Le(e,e=>{Eo(t,e)})};const Kl=(e,t)=>Fe.fromDom(e.dom.cloneNode(t));const Gl=e=>Kl(e,false);const Yl=e=>Kl(e,true);const Xl=(e,t)=>{const n=Fe.fromTag(t);const o=mo(e);io(n,o);return n};const Ql=(e,t)=>{const n=Xl(e,t);Is(e,n);const o=Xo(e);Hs(n,o);Ue(e);return n};const Jl=(e,t,n=a)=>{const o=new vr(e,t);const s=e=>{let t;do{t=o[e]()}while(t&&!je(t)&&!n(t));return C.from(t).filter(je)};return{current:()=>C.from(o.current()).filter(je),next:()=>s("next"),prev:()=>s("prev"),prev2:()=>s("prev2")}};const Zl=(r,e)=>{const i=e?e:e=>r.isBlock(e)||E(e)||_(e);const c=(e,t,n,o)=>{if(je(e)){const s=o(e,t,e.data);if(s!==-1){return C.some({container:e,offset:s})}}return n().bind(e=>c(e.container,e.offset,n,o))};const t=(e,t,n,o)=>{const s=Jl(e,o!==null&&o!==void 0?o:r.getRoot(),i);return c(e,t,()=>s.prev().map(e=>({container:e,offset:e.length})),n).getOrNull()};const n=(e,t,n,o)=>{const s=Jl(e,o!==null&&o!==void 0?o:r.getRoot(),i);return c(e,t,()=>s.next().map(e=>({container:e,offset:0})),n).getOrNull()};return{backwards:t,forwards:n}};const ed=Math.round;const td=e=>{if(!e){return{left:0,top:0,bottom:0,right:0,width:0,height:0}}return{left:ed(e.left),top:ed(e.top),bottom:ed(e.bottom),right:ed(e.right),width:ed(e.width),height:ed(e.height)}};const nd=(e,t)=>{e=td(e);if(t){e.right=e.left}else{e.left=e.left+e.width;e.right=e.left}e.width=0;return e};const od=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right;const sd=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2;const rd=(e,t)=>{const n=Math.min(t.height/2,e.height/2);if(e.bottom-n<t.top){return true}if(e.top>t.bottom){return false}return sd(t.top-e.bottom,e,t)};const id=(e,t)=>{if(e.top>t.bottom){return true}if(e.bottom<t.top){return false}return sd(t.bottom-e.top,e,t)};const cd=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom;const ad=e=>{return le(e,(e,r)=>{return e.fold(()=>C.some(r),e=>{const t=Math.min(r.left,e.left);const n=Math.min(r.top,e.top);const o=Math.max(r.right,e.right);const s=Math.max(r.bottom,e.bottom);return C.some({top:n,right:o,bottom:s,left:t,width:o-t,height:s-n})})},C.none())};const ld=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left);const s=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-s)*(n-s))};const dd=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));const ud=(e,t,n)=>Math.min(Math.max(e,t),n);const fd=e=>{const t=e.startContainer,n=e.startOffset;if(t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1){return t.childNodes[n]}return null};const md=(e,t)=>{if(ze(e)&&e.hasChildNodes()){const n=e.childNodes;const o=ud(t,0,n.length-1);return n[o]}else{return e}};const gd=(e,t)=>{if(t<0&&ze(e)&&e.hasChildNodes()){return undefined}else{return md(e,t)}};const pd=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ؚ"+"ً-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް"+"߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़"+"ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣ"+"ਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼"+"ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗ"+"ୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖ"+"ౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ"+"്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູ"+"ົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗ"+"ྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴ"+"ႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵"+"ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘ"+"ᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴"+"ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩ"+"ᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹"+"᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⳱"+"⵿ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱"+"ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼ"+"ꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁"+"ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");const hd=e=>Re(e)&&e.charCodeAt(0)>=768&&pd.test(e);const bd=(...n)=>{return t=>{for(let e=0;e<n.length;e++){if(n[e](t)){return true}}return false}};const vd=(...n)=>{return t=>{for(let e=0;e<n.length;e++){if(!n[e](t)){return false}}return true}};const yd=ze;const Cd=Xi;const wd=kr("display","block table");const xd=kr("float","left right");const kd=vd(yd,Cd,Q(xd));const Ed=Q(kr("white-space","pre pre-line pre-wrap"));const Sd=je;const _d=E;const Nd=He.nodeIndex;const Rd=gd;const Ad=e=>e?e.createRange():He.DOM.createRng();const Dd=e=>Re(e)&&/[\r\n\t ]/.test(e);const Od=e=>!!e.setStart&&!!e.setEnd;const Td=e=>{const t=e.startContainer;const n=e.startOffset;if(Dd(e.toString())&&Ed(t.parentNode)&&je(t)){const e=t.data;if(Dd(e[n-1])||Dd(e[n+1])){return true}}return false};const Bd=e=>{const t=e.ownerDocument;const n=Ad(t);const o=t.createTextNode($r);const s=e.parentNode;s.insertBefore(o,e);n.setStart(o,0);n.setEnd(o,1);const r=td(n.getBoundingClientRect());s.removeChild(o);return r};const Pd=e=>{const t=e.startContainer;const n=e.endContainer;const o=e.startOffset;const s=e.endOffset;if(t===n&&je(n)&&o===0&&s===1){const r=e.cloneRange();r.setEndAfter(n);return Md(r)}else{return null}};const Ld=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0;const Md=e=>{var t;let n;const o=e.getClientRects();if(o.length>0){n=td(o[0])}else{n=td(e.getBoundingClientRect())}if(!Od(e)&&_d(e)&&Ld(n)){return Bd(e)}if(Ld(n)&&Od(e)){return(t=Pd(e))!==null&&t!==void 0?t:n}return n};const Id=(e,t)=>{const n=nd(e,t);n.width=1;n.right=n.left+1;return n};const Fd=e=>{const t=[];const o=e=>{if(e.height===0){return}if(t.length>0){if(od(e,t[t.length-1])){return}}t.push(e)};const n=(e,t)=>{const n=Ad(e.ownerDocument);if(t<e.data.length){if(hd(e.data[t])){return}if(hd(e.data[t-1])){n.setStart(e,t);n.setEnd(e,t+1);if(!Td(n)){o(Id(Md(n),false));return}}}if(t>0){n.setStart(e,t-1);n.setEnd(e,t);if(!Td(n)){o(Id(Md(n),false))}}if(t<e.data.length){n.setStart(e,t);n.setEnd(e,t+1);if(!Td(n)){o(Id(Md(n),true))}}};const s=e.container();const r=e.offset();if(Sd(s)){n(s,r);return t}if(yd(s)){if(e.isAtEnd()){const i=Rd(s,r);if(Sd(i)){n(i,i.data.length)}if(kd(i)&&!_d(i)){o(Id(Md(i),false))}}else{const i=Rd(s,r);if(Sd(i)){n(i,0)}if(kd(i)&&e.isAtEnd()){o(Id(Md(i),false));return t}const c=Rd(e.container(),e.offset()-1);if(kd(c)&&!_d(c)){if(wd(c)||wd(i)||!kd(i)){o(Id(Md(c),false))}}if(kd(i)){o(Id(Md(i),true))}}}return t};const M=(t,n,e)=>{const o=()=>{if(Sd(t)){return n===0}return n===0};const s=()=>{if(Sd(t)){return n>=t.data.length}return n>=t.childNodes.length};const r=()=>{const e=Ad(t.ownerDocument);e.setStart(t,n);e.setEnd(t,n);return e};const i=()=>{if(!e){e=Fd(M(t,n))}return e};const c=()=>i().length>0;const a=e=>e&&t===e.container()&&n===e.offset();const l=e=>Rd(t,e?n-1:n);return{container:Be(t),offset:Be(n),toRange:r,getClientRects:i,isVisible:c,isAtStart:o,isAtEnd:s,isEqual:a,getNode:l}};M.fromRangeStart=e=>M(e.startContainer,e.startOffset);M.fromRangeEnd=e=>M(e.endContainer,e.endOffset);M.after=e=>M(e.parentNode,Nd(e)+1);M.before=e=>M(e.parentNode,Nd(e));M.isAbove=(e,t)=>Bn(Ce(t.getClientRects()),we(e.getClientRects()),rd).getOr(false);M.isBelow=(e,t)=>Bn(we(t.getClientRects()),Ce(e.getClientRects()),id).getOr(false);M.isAtStart=e=>e?e.isAtStart():false;M.isAtEnd=e=>e?e.isAtEnd():false;M.isTextPosition=e=>e?je(e.container()):false;M.isElementPosition=e=>!M.isTextPosition(e);const Ud=(e,t)=>{if(je(t)&&t.data.length===0){e.remove(t)}};const zd=(e,t,n)=>{t.insertNode(n);Ud(e,n.previousSibling);Ud(e,n.nextSibling)};const jd=(t,e,n)=>{const o=C.from(n.firstChild);const s=C.from(n.lastChild);e.insertNode(n);o.each(e=>Ud(t,e.previousSibling));s.each(e=>Ud(t,e.nextSibling))};const Hd=(e,t,n)=>{if(Lr(n)){jd(e,t,n)}else{zd(e,t,n)}};const $d=je;const Vd=_r;const qd=He.nodeIndex;const Wd=e=>{const t=e.parentNode;if(Vd(t)){return Wd(t)}return t};const Kd=e=>{if(!e){return[]}return lt(e.childNodes,(e,t)=>{if(Vd(t)&&t.nodeName!=="BR"){e=e.concat(Kd(t))}else{e.push(t)}return e},[])};const Gd=(e,t)=>{let n=e;while(n=n.previousSibling){if(!$d(n)){break}t+=n.data.length}return t};const Yd=t=>e=>t===e;const Xd=e=>{let o,t;o=Kd(Wd(e));t=dt(o,Yd(e),e);o=o.slice(0,t+1);const n=lt(o,(e,t,n)=>{if($d(t)&&$d(o[n-1])){e++}return e},0);o=ct(o,xr([e.nodeName]));t=dt(o,Yd(e),e);return t-n};const Qd=e=>{const t=$d(e)?"text()":e.nodeName.toLowerCase();return t+"["+Xd(e)+"]"};const Jd=(t,n,o)=>{const s=[];for(let e=n.parentNode;e&&e!==t;e=e.parentNode){if(o&&o(e)){break}s.push(e)}return s};const Zd=(e,t)=>{let n=[];let o=t.container();let s=t.offset();let r;if($d(o)){r=Gd(o,s)}else{const c=o.childNodes;if(s>=c.length){r="after";s=c.length-1}else{r="before"}o=c[s]}n.push(Qd(o));let i=Jd(e,o);i=ct(i,Q(_r));n=n.concat(it(i,e=>{return Qd(e)}));return n.reverse().join("/")+","+r};const eu=(e,t,n)=>{let o=Kd(e);o=ct(o,(e,t)=>{return!$d(e)||!$d(o[t-1])});o=ct(o,xr([t]));return o[n]};const tu=(e,t)=>{let n=e;let o=0;while($d(n)){const s=n.data.length;if(t>=o&&t<=o+s){e=n;t=t-o;break}if(!$d(n.nextSibling)){e=n;t=s;break}o+=s;n=n.nextSibling}if($d(e)&&t>e.data.length){t=e.data.length}return M(e,t)};const nu=(e,t)=>{if(!t){return null}const n=t.split(",");const o=n[0].split("/");const s=n.length>1?n[1]:"before";const r=lt(o,(e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(!n){return null}if(n[1]==="text()"){n[1]="#text"}return eu(e,n[1],parseInt(n[2],10))},e);if(!r){return null}if(!$d(r)&&r.parentNode){let e;if(s==="after"){e=qd(r)+1}else{e=qd(r)}return M(r.parentNode,e)}return tu(r,parseInt(s,10))};const ou=_;const su=(t,n,e)=>{let o=t(n.data.slice(0,e)).length;for(let e=n.previousSibling;e&&je(e);e=e.previousSibling){o+=t(e.data).length}return o};const ru=(t,e,n,o,s)=>{const r=s?o.startContainer:o.endContainer;let i=s?o.startOffset:o.endOffset;const c=[];const a=t.getRoot();if(je(r)){c.push(n?su(e,r,i):i)}else{let e=0;const l=r.childNodes;if(i>=l.length&&l.length){e=1;i=Math.max(0,l.length-1)}c.push(t.nodeIndex(l[i],n)+e)}for(let e=r;e&&e!==a;e=e.parentNode){c.push(t.nodeIndex(e,n))}return c};const iu=(t,e,n,o)=>{const s=e.dom;const r=ru(s,t,n,o,true);const i=e.isForward();const c=ji(o)?{isFakeCaret:true}:{};if(!e.isCollapsed()){const e=ru(s,t,n,o,false);return{start:r,end:e,forward:i,...c}}else{return{start:r,forward:i,...c}}};const cu=(e,t,n)=>{let o=0;U.each(e.select(t),e=>{if(e.getAttribute("data-mce-bogus")==="all"){return}else if(e===n){return false}else{o++;return}});return o};const au=(e,t)=>{let n=t?e.startContainer:e.endContainer;let o=t?e.startOffset:e.endOffset;if(ze(n)&&n.nodeName==="TR"){const s=n.childNodes;n=s[Math.min(t?o:o-1,s.length-1)];if(n){o=t?0:n.childNodes.length;if(t){e.setStart(n,o)}else{e.setEnd(n,o)}}}};const lu=e=>{au(e,true);au(e,false);return e};const du=(t,e)=>{if(ze(t)){t=md(t,e);if(ou(t)){return t}}if(Oi(t)){if(je(t)&&Ai(t)){t=t.parentNode}let e=t.previousSibling;if(ou(e)){return e}e=t.nextSibling;if(ou(e)){return e}}return undefined};const uu=e=>{return du(e.startContainer,e.startOffset)||du(e.endContainer,e.endOffset)};const fu=(e,t,n)=>{const o=n.getNode();const s=n.getRng();if(o.nodeName==="IMG"||ou(o)){const e=o.nodeName;return{name:e,index:cu(n.dom,e,o)}}const r=uu(s);if(r){const e=r.tagName;return{name:e,index:cu(n.dom,e,r)}}return iu(e,n,t,s)};const mu=e=>{const t=e.getRng();return{start:Zd(e.dom.getRoot(),M.fromRangeStart(t)),end:Zd(e.dom.getRoot(),M.fromRangeEnd(t)),forward:e.isForward()}};const gu=e=>{return{rng:e.getRng(),forward:e.isForward()}};const pu=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)};const hu=(e,t)=>{const n=e.dom;let o=e.getRng();const s=n.uniqueId();const r=e.isCollapsed();const i=e.getNode();const c=i.nodeName;const a=e.isForward();if(c==="IMG"){return{name:c,index:cu(n,c,i)}}const l=lu(o.cloneRange());if(!r){l.collapse(false);const u=pu(n,s+"_end",t);Hd(n,l,u)}o=lu(o);o.collapse(true);const d=pu(n,s+"_start",t);Hd(n,o,d);e.moveToBookmark({id:s,keep:true,forward:a});return{id:s,forward:a}};const bu=(e,t,n=false)=>{if(t===2){return fu(_i,n,e)}else if(t===3){return mu(e)}else if(t){return gu(e)}else{return hu(e,false)}};const vu=h(fu,Y,true);const yu=n=>{const e=e=>e(n);const t=Be(n);const o=()=>s;const s={tag:true,inner:n,fold:(e,t)=>t(n),isValue:f,isError:a,map:e=>xu.value(e(n)),mapError:o,bind:e,exists:e,forall:e,getOr:t,or:o,getOrThunk:t,orThunk:o,getOrDie:t,each:e=>{e(n)},toOptional:()=>C.some(n)};return s};const Cu=n=>{const e=()=>t;const t={tag:false,inner:n,fold:(e,t)=>e(n),isValue:a,isError:f,map:e,mapError:e=>xu.error(e(n)),bind:e,exists:a,forall:f,getOr:Y,or:Y,getOrThunk:Z,orThunk:Z,getOrDie:J(String(n)),each:Te,toOptional:C.none};return t};const wu=(e,t)=>e.fold(()=>Cu(t),yu);const xu={value:yu,error:Cu,fromOption:wu};const ku=i=>{if(!Ve(i)){throw new Error("cases must be an array")}if(i.length===0){throw new Error("there must be at least one case")}const c=[];const o={};Le(i,(e,n)=>{const t=Ee(e);if(t.length!==1){throw new Error("one and only one name per case")}const s=t[0];const r=e[s];if(o[s]!==undefined){throw new Error("duplicate key detected:"+s)}else if(s==="cata"){throw new Error("cannot have a case named cata (sorry)")}else if(!Ve(r)){throw new Error("case arguments must be an array")}c.push(s);o[s]=(...o)=>{const e=o.length;if(e!==r.length){throw new Error("Wrong number of arguments to case "+s+". Expected "+r.length+" ("+r+"), got "+e)}const t=e=>{const t=Ee(e);if(c.length!==t.length){throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+t.join(","))}const n=qe(c,e=>{return m(t,e)});if(!n){throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+c.join(", "))}return e[s].apply(null,o)};return{fold:(...e)=>{if(e.length!==i.length){throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+e.length)}const t=e[n];return t.apply(null,o)},match:t,log:e=>{console.log(e,{constructors:c,constructor:s,params:o})}}}});return o};const Eu={generate:ku};Eu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Su=e=>{const t=[];const n=[];Le(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})});return{errors:t,values:n}};const _u=e=>e.type==="inline-command"||e.type==="inline-format";const Nu=e=>e.type==="block-command"||e.type==="block-format";const Ru=s=>{const r=e=>xu.error({message:e,pattern:s});const e=(t,n,e)=>{if(s.format!==undefined){let e;if(Ve(s.format)){if(!qe(s.format,Re)){return r(t+" pattern has non-string items in the `format` array")}e=s.format}else if(Re(s.format)){e=[s.format]}else{return r(t+" pattern has non-string `format` parameter")}return xu.value(n(e))}else if(s.cmd!==undefined){if(!Re(s.cmd)){return r(t+" pattern has non-string `cmd` parameter")}return xu.value(e(s.cmd,s.value))}else{return r(t+" pattern is missing both `format` and `cmd` parameters")}};if(!I(s)){return r("Raw pattern is not an object")}if(!Re(s.start)){return r("Raw pattern is missing `start` parameter")}if(s.end!==undefined){if(!Re(s.end)){return r("Inline pattern has non-string `end` parameter")}if(s.start.length===0&&s.end.length===0){return r("Inline pattern has empty `start` and `end` parameters")}let n=s.start;let o=s.end;if(o.length===0){o=n;n=""}return e("Inline",e=>({type:"inline-format",start:n,end:o,format:e}),(e,t)=>({type:"inline-command",start:n,end:o,cmd:e,value:t}))}else if(s.replacement!==undefined){if(!Re(s.replacement)){return r("Replacement pattern has non-string `replacement` parameter")}if(s.start.length===0){return r("Replacement pattern has empty `start` parameter")}return xu.value({type:"inline-command",start:"",end:s.start,cmd:"mceInsertContent",value:s.replacement})}else{if(s.start.length===0){return r("Block pattern has empty `start` parameter")}return e("Block",e=>({type:"block-format",start:s.start,format:e[0]}),(e,t)=>({type:"block-command",start:s.start,cmd:e,value:t}))}};const Au=e=>S(e,Nu);const Du=e=>S(e,_u);const Ou=(e,t)=>({inlinePatterns:Du(e),blockPatterns:Au(e),dynamicPatternsLookup:t});const Tu=e=>{const t=Su(y(e,Ru));Le(t.errors,e=>console.error(e.message,e.pattern));return t.values};const Bu=n=>{return e=>{const t=n(e);return Tu(t)}};const Pu=gn().deviceType;const Lu=Pu.isTouch();const Mu=He.DOM;const Iu=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return le(t,(e,t)=>{const n=t.split("=");const o=n[0];const s=n.length>1?n[1]:o;e[Ot(o)]=Ot(s);return e},{})};const Fu=e=>L(e,RegExp);const e=t=>e=>e.options.get(t);const Uu=e=>Re(e)||I(e);const zu=(o,s="")=>e=>{const t=Re(e);if(t){if(e.indexOf("=")!==-1){const n=Iu(e);return{value:p(n,o.id).getOr(s),valid:t}}else{return{value:e,valid:t}}}else{return{valid:false,message:"Must be a string."}}};const ju=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id});t("selector",{processor:"string"});t("target",{processor:"object"});t("suffix",{processor:"string"});t("cache_suffix",{processor:"string"});t("base_url",{processor:"string"});t("referrer_policy",{processor:"string",default:""});t("language_load",{processor:"boolean",default:true});t("inline",{processor:"boolean",default:false});t("iframe_attrs",{processor:"object",default:{}});t("doctype",{processor:"string",default:"<!DOCTYPE html>"});t("document_base_url",{processor:"string",default:e.documentBaseUrl});t("body_id",{processor:zu(e,"tinymce"),default:"tinymce"});t("body_class",{processor:zu(e),default:""});t("content_security_policy",{processor:"string",default:""});t("br_in_pre",{processor:"boolean",default:true});t("forced_root_block",{processor:e=>{const t=Re(e)&&Pt(e);if(t){return{value:e,valid:t}}else{return{valid:false,message:"Must be a non-empty string."}}},default:"p"});t("forced_root_block_attrs",{processor:"object",default:{}});t("newline_behavior",{processor:e=>{const t=m(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:false,message:"Must be one of: block, linebreak, invert or default."}},default:"default"});t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"});t("no_newline_selector",{processor:"string",default:""});t("keep_styles",{processor:"boolean",default:true});t("end_container_on_empty_block",{processor:e=>{if(j(e)){return{valid:true,value:e}}else if(Re(e)){return{valid:true,value:e}}else{return{valid:false,message:"Must be boolean or a string"}}},default:"blockquote"});t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"});t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"});t("font_size_classes",{processor:"string",default:""});t("automatic_uploads",{processor:"boolean",default:true});t("images_reuse_filename",{processor:"boolean",default:false});t("images_replace_blob_uris",{processor:"boolean",default:true});t("icons",{processor:"string",default:""});t("icons_url",{processor:"string",default:""});t("images_upload_url",{processor:"string",default:""});t("images_upload_base_path",{processor:"string",default:""});t("images_upload_credentials",{processor:"boolean",default:false});t("images_upload_handler",{processor:"function"});t("language",{processor:"string",default:"en"});t("language_url",{processor:"string",default:""});t("entity_encoding",{processor:"string",default:"named"});t("indent",{processor:"boolean",default:true});t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"});t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"});t("indent_use_margin",{processor:"boolean",default:false});t("indentation",{processor:"string",default:"40px"});t("content_css",{processor:e=>{const t=e===false||Re(e)||W(e,Re);if(t){if(Re(e)){return{value:y(e.split(","),Ot),valid:t}}else if(Ve(e)){return{value:e,valid:t}}else if(e===false){return{value:[],valid:t}}else{return{value:e,valid:t}}}else{return{valid:false,message:"Must be false, a string or an array of strings."}}},default:Ff(e)?[]:["default"]});t("content_style",{processor:"string"});t("content_css_cors",{processor:"boolean",default:false});t("font_css",{processor:e=>{const t=Re(e)||W(e,Re);if(t){const n=Ve(e)?e:y(e.split(","),Ot);return{value:n,valid:t}}else{return{valid:false,message:"Must be a string or an array of strings."}}},default:[]});t("inline_boundaries",{processor:"boolean",default:true});t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"});t("object_resizing",{processor:e=>{const t=j(e)||Re(e);if(t){if(e===false||Pu.isiPhone()||Pu.isiPad()){return{value:"",valid:t}}else{return{value:e===true?"table,img,figure.image,div,video,iframe":e,valid:t}}}else{return{valid:false,message:"Must be boolean or a string"}}},default:!Lu});t("resize_img_proportional",{processor:"boolean",default:true});t("event_root",{processor:"object"});t("service_message",{processor:"string"});t("theme",{processor:e=>e===false||Re(e)||Oe(e),default:"silver"});t("theme_url",{processor:"string"});t("formats",{processor:"object"});t("format_empty_lines",{processor:"boolean",default:false});t("format_noneditable_selector",{processor:"string",default:""});t("preview_styles",{processor:e=>{const t=e===false||Re(e);if(t){return{value:e===false?"":e,valid:t}}else{return{valid:false,message:"Must be false or a string"}}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"});t("custom_ui_selector",{processor:"string",default:""});t("hidden_input",{processor:"boolean",default:true});t("submit_patch",{processor:"boolean",default:true});t("encoding",{processor:"string"});t("add_form_submit_trigger",{processor:"boolean",default:true});t("add_unload_trigger",{processor:"boolean",default:true});t("custom_undo_redo_levels",{processor:"number",default:0});t("disable_nodechange",{processor:"boolean",default:false});t("readonly",{processor:"boolean",default:false});t("plugins",{processor:"string[]",default:[]});t("external_plugins",{processor:"object"});t("forced_plugins",{processor:"string[]"});t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"});t("model_url",{processor:"string"});t("block_unsupported_drop",{processor:"boolean",default:true});t("visual",{processor:"boolean",default:true});t("visual_table_class",{processor:"string",default:"mce-item-table"});t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"});t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."});t("setup",{processor:"function"});t("init_instance_callback",{processor:"function"});t("url_converter",{processor:"function",default:e.convertURL});t("url_converter_scope",{processor:"object",default:e});t("urlconverter_callback",{processor:"function"});t("allow_conditional_comments",{processor:"boolean",default:false});t("allow_html_data_urls",{processor:"boolean",default:false});t("allow_svg_data_urls",{processor:"boolean"});t("allow_html_in_named_anchor",{processor:"boolean",default:false});t("allow_script_urls",{processor:"boolean",default:false});t("allow_unsafe_link_target",{processor:"boolean",default:false});t("convert_fonts_to_spans",{processor:"boolean",default:true,deprecated:true});t("fix_list_elements",{processor:"boolean",default:false});t("preserve_cdata",{processor:"boolean",default:false});t("remove_trailing_brs",{processor:"boolean"});t("inline_styles",{processor:"boolean",default:true,deprecated:true});t("element_format",{processor:"string",default:"html"});t("entities",{processor:"string"});t("schema",{processor:"string",default:"html5"});t("convert_urls",{processor:"boolean",default:true});t("relative_urls",{processor:"boolean",default:true});t("remove_script_host",{processor:"boolean",default:true});t("custom_elements",{processor:"string"});t("extended_valid_elements",{processor:"string"});t("invalid_elements",{processor:"string"});t("invalid_styles",{processor:Uu});t("valid_children",{processor:"string"});t("valid_classes",{processor:Uu});t("valid_elements",{processor:"string"});t("valid_styles",{processor:Uu});t("verify_html",{processor:"boolean",default:true});t("auto_focus",{processor:e=>Re(e)||e===true});t("browser_spellcheck",{processor:"boolean",default:false});t("protect",{processor:"array"});t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"});t("deprecation_warnings",{processor:"boolean",default:true});t("a11y_advanced_options",{processor:"boolean",default:false});t("api_key",{processor:"string"});t("paste_block_drop",{processor:"boolean",default:false});t("paste_data_images",{processor:"boolean",default:true});t("paste_preprocess",{processor:"function"});t("paste_postprocess",{processor:"function"});t("paste_webkit_styles",{processor:"string",default:"none"});t("paste_remove_styles_if_webkit",{processor:"boolean",default:true});t("paste_merge_formats",{processor:"boolean",default:true});t("smart_paste",{processor:"boolean",default:true});t("paste_as_text",{processor:"boolean",default:false});t("paste_tab_spaces",{processor:"number",default:4});t("text_patterns",{processor:e=>{if(W(e,I)||e===false){const t=e===false?[]:e;return{value:Tu(t),valid:true}}else{return{valid:false,message:"Must be an array of objects or false."}}},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]});t("text_patterns_lookup",{processor:e=>{if(Oe(e)){return{value:Bu(e),valid:true}}else{return{valid:false,message:"Must be a single function"}}},default:e=>[]});t("noneditable_class",{processor:"string",default:"mceNonEditable"});t("editable_class",{processor:"string",default:"mceEditable"});t("noneditable_regexp",{processor:e=>{if(W(e,Fu)){return{value:e,valid:true}}else if(Fu(e)){return{value:[e],valid:true}}else{return{valid:false,message:"Must be a RegExp or an array of RegExp."}}},default:[]});t("table_tab_navigation",{processor:"boolean",default:true});t("highlight_on_focus",{processor:"boolean",default:false});t("xss_sanitization",{processor:"boolean",default:true});e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:wl.isRtl()?"rtl":undefined});t("placeholder",{processor:"string",default:Mu.getAttrib(e.getElement(),"placeholder")})})};const Hu=e("iframe_attrs");const $u=e("doctype");const Vu=e("document_base_url");const qu=e("body_id");const Wu=e("body_class");const Ku=e("content_security_policy");const Gu=e("br_in_pre");const Yu=e("forced_root_block");const Xu=e("forced_root_block_attrs");const Qu=e("newline_behavior");const Ju=e("br_newline_selector");const Zu=e("no_newline_selector");const ef=e("keep_styles");const tf=e("end_container_on_empty_block");const nf=e("automatic_uploads");const of=e("images_reuse_filename");const sf=e("images_replace_blob_uris");const rf=e("icons");const cf=e("icons_url");const af=e("images_upload_url");const lf=e("images_upload_base_path");const df=e("images_upload_credentials");const uf=e("images_upload_handler");const ff=e("content_css_cors");const mf=e("referrer_policy");const gf=e("language");const pf=e("language_url");const hf=e("indent_use_margin");const bf=e("indentation");const vf=e("content_css");const yf=e("content_style");const Cf=e("font_css");const wf=e("directionality");const xf=e("inline_boundaries_selector");const kf=e("object_resizing");const Ef=e("resize_img_proportional");const Sf=e("placeholder");const _f=e("event_root");const Nf=e("service_message");const Rf=e("theme");const Af=e("theme_url");const Df=e("model");const Of=e("model_url");const Tf=e("inline_boundaries");const Bf=e("formats");const Pf=e("preview_styles");const Lf=e("format_empty_lines");const Mf=e("format_noneditable_selector");const If=e("custom_ui_selector");const Ff=e("inline");const Uf=e("hidden_input");const zf=e("submit_patch");const jf=e("add_form_submit_trigger");const Hf=e("add_unload_trigger");const $f=e("custom_undo_redo_levels");const Vf=e("disable_nodechange");const qf=e("readonly");const Wf=e("content_css_cors");const Kf=e("plugins");const Gf=e("external_plugins");const Yf=e("block_unsupported_drop");const Xf=e("visual");const Qf=e("visual_table_class");const Jf=e("visual_anchor_class");const Zf=e("iframe_aria_text");const em=e("setup");const tm=e("init_instance_callback");const nm=e("urlconverter_callback");const om=e("auto_focus");const sm=e("browser_spellcheck");const rm=e("protect");const im=e("paste_block_drop");const cm=e("paste_data_images");const am=e("paste_preprocess");const lm=e("paste_postprocess");const dm=e("paste_webkit_styles");const um=e("paste_remove_styles_if_webkit");const fm=e("paste_merge_formats");const mm=e("smart_paste");const gm=e("paste_as_text");const pm=e("paste_tab_spaces");const hm=e("allow_html_data_urls");const bm=e("text_patterns");const vm=e("text_patterns_lookup");const ym=e("noneditable_class");const Cm=e("editable_class");const wm=e("noneditable_regexp");const xm=e("preserve_cdata");const km=e("highlight_on_focus");const Em=e("xss_sanitization");const Sm=e=>e.options.isSet("text_patterns_lookup");const _m=e=>U.explode(e.options.get("font_size_style_values"));const Nm=e=>U.explode(e.options.get("font_size_classes"));const Rm=e=>e.options.get("encoding")==="xml";const Am=e=>U.explode(e.options.get("images_file_types"));const Dm=e("table_tab_navigation");const Om=ze;const Tm=je;const Bm=e=>{const t=e.parentNode;if(t){t.removeChild(e)}};const Pm=e=>{const t=_i(e);return{count:e.length-t.length,text:t}};const Lm=e=>{let t;while((t=e.data.lastIndexOf(Ei))!==-1){e.deleteData(t,1)}};const Mm=(e,t)=>{Hm(e);return t};const Im=(e,t)=>{const n=Pm(e.data.substr(0,t.offset()));const o=Pm(e.data.substr(t.offset()));const s=n.text+o.text;if(s.length>0){Lm(e);return M(e,t.offset()-n.count)}else{return t}};const Fm=(e,t)=>{const n=t.container();const o=re(We(n.childNodes),e).map(e=>{return e<t.offset()?M(n,t.offset()-1):t}).getOr(t);Hm(e);return o};const Um=(e,t)=>Tm(e)&&t.container()===e?Im(e,t):Mm(e,t);const zm=(e,t)=>t.container()===e.parentNode?Fm(e,t):Mm(e,t);const jm=(e,t)=>M.isTextPosition(t)?Um(e,t):zm(e,t);const Hm=e=>{if(Om(e)&&Oi(e)){if(Ti(e)){e.removeAttribute("data-mce-caret")}else{Bm(e)}}if(Tm(e)){Lm(e);if(e.data.length===0){Bm(e)}}};const $m=_;const Vm=zr;const qm=Fr;const Wm="*[contentEditable=false],video,audio,embed,object";const Km=(e,t,n)=>{const o=nd(t.getBoundingClientRect(),n);let s;let r;if(e.tagName==="BODY"){const c=e.ownerDocument.documentElement;s=e.scrollLeft||c.scrollLeft;r=e.scrollTop||c.scrollTop}else{const a=e.getBoundingClientRect();s=e.scrollLeft-a.left;r=e.scrollTop-a.top}o.left+=s;o.right+=s;o.top+=r;o.bottom+=r;o.width=1;let i=t.offsetWidth-t.clientWidth;if(i>0){if(n){i*=-1}o.left+=i;o.right+=i}return o};const Gm=e=>{var n,o;const s=hr(Fe.fromDom(e),Wm);for(let e=0;e<s.length;e++){const r=s[e].dom;let t=r.previousSibling;if(Fi(t)){const e=t.data;if(e.length===1){(n=t.parentNode)===null||n===void 0?void 0:n.removeChild(t)}else{t.deleteData(e.length-1,1)}}t=r.nextSibling;if(Ii(t)){const e=t.data;if(e.length===1){(o=t.parentNode)===null||o===void 0?void 0:o.removeChild(t)}else{t.deleteData(0,1)}}}};const Ym=(e,i,c,t)=>{const a=Sl();let n;let l;const d=Yu(e);const u=e.dom;const o=(e,t)=>{let n;f();if(qm(t)){return null}if(c(t)){const o=Mi(d,t,e);const s=Km(i,t,e);u.setStyle(o,"top",s.top);l=o;const r=u.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});u.setStyles(r,{...s});u.add(i,r);a.set({caret:r,element:t,before:e});if(e){u.addClass(r,"mce-visual-caret-before")}m();n=t.ownerDocument.createRange();n.setStart(o,0);n.setEnd(o,0)}else{l=Bi(t,e);n=t.ownerDocument.createRange();if(Qm(l.nextSibling)){n.setStart(l,0);n.setEnd(l,0)}else{n.setStart(l,1);n.setEnd(l,1)}return n}return n};const f=()=>{Gm(i);if(l){Hm(l);l=null}a.on(e=>{u.remove(e.caret);a.clear()});if(n){clearInterval(n);n=undefined}};const m=()=>{n=setInterval(()=>{a.on(e=>{if(t()){u.toggleClass(e.caret,"mce-visual-caret-hidden")}else{u.addClass(e.caret,"mce-visual-caret-hidden")}})},500)};const s=()=>{a.on(e=>{const t=Km(i,e.element,e.before);u.setStyles(e.caret,{...t})})};const r=()=>clearInterval(n);const g=()=>".mce-visual-caret {"+"position: absolute;"+"background-color: black;"+"background-color: currentcolor;"+"}"+".mce-visual-caret-hidden {"+"display: none;"+"}"+"*[data-mce-caret] {"+"position: absolute;"+"left: -1000px;"+"right: auto;"+"top: 0;"+"margin: 0;"+"padding: 0;"+"}";return{show:o,hide:f,getCss:g,reposition:s,destroy:r}};const Xm=()=>H.browser.isFirefox();const Qm=e=>$m(e)||Vm(e);const Jm=e=>{const t=Qm(e)||Rr(e)&&Xm();return t&&$o(Fe.fromDom(e)).exists(ks)};const Zm=Ir;const eg=_;const tg=zr;const ng=kr("display","block table table-cell table-caption list-item");const og=Oi;const sg=Ai;const rg=ze;const ig=je;const cg=Xi;const ag=e=>e>0;const lg=e=>e<0;const dg=(e,t)=>{let n;while(n=e(t)){if(!sg(n)){return n}}return null};const ug=(e,t,n,o,s)=>{const r=new vr(e,o);const i=eg(e)||sg(e);let c;if(lg(t)){if(i){c=dg(r.prev.bind(r),true);if(n(c)){return c}}while(c=dg(r.prev.bind(r),s)){if(n(c)){return c}}}if(ag(t)){if(i){c=dg(r.next.bind(r),true);if(n(c)){return c}}while(c=dg(r.next.bind(r),s)){if(n(c)){return c}}}return null};const fg=(e,t)=>{const n=e=>Zm(e.dom);const o=e=>e.dom===t;return gs(Fe.fromDom(e),n,o).map(e=>e.dom).getOr(t)};const mg=(e,t)=>{while(e&&e!==t){if(ng(e)){return e}e=e.parentNode}return null};const gg=(e,t,n)=>mg(e.container(),n)===mg(t.container(),n);const pg=(e,t)=>{if(!t){return C.none()}const n=t.container();const o=t.offset();if(!rg(n)){return C.none()}return C.from(n.childNodes[o+e])};const hg=(e,t)=>{var n;const o=(n=t.ownerDocument)!==null&&n!==void 0?n:document;const s=o.createRange();if(e){s.setStartBefore(t);s.setEndBefore(t)}else{s.setStartAfter(t);s.setEndAfter(t)}return s};const bg=(e,t,n)=>mg(t,e)===mg(n,e);const vg=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let s=n;while(s&&s!==t){let e=s[o];if(e&&og(e)){e=e[o]}if(eg(e)||tg(e)){if(bg(t,e,s)){return e}break}if(cg(e)){break}s=s.parentNode}return null};const yg=h(hg,true);const Cg=h(hg,false);const wg=(e,t,n)=>{let o;const s=h(vg,true,t);const r=h(vg,false,t);const i=n.startContainer;const c=n.startOffset;if(Ai(i)){const a=ig(i)?i.parentNode:i;const l=a.getAttribute("data-mce-caret");if(l==="before"){o=a.nextSibling;if(Jm(o)){return yg(o)}}if(l==="after"){o=a.previousSibling;if(Jm(o)){return Cg(o)}}}if(!n.collapsed){return n}if(je(i)){if(og(i)){if(e===1){o=r(i);if(o){return yg(o)}o=s(i);if(o){return Cg(o)}}if(e===-1){o=s(i);if(o){return Cg(o)}o=r(i);if(o){return yg(o)}}return n}if(Fi(i)&&c>=i.data.length-1){if(e===1){o=r(i);if(o){return yg(o)}}return n}if(Ii(i)&&c<=1){if(e===-1){o=s(i);if(o){return Cg(o)}}return n}if(c===i.data.length){o=r(i);if(o){return yg(o)}return n}if(c===0){o=s(i);if(o){return Cg(o)}return n}}return n};const xg=(e,t)=>pg(e?0:-1,t).filter(eg);const kg=(e,t,n)=>{const o=wg(e,t,n);return e===-1?M.fromRangeStart(o):M.fromRangeEnd(o)};const Eg=e=>C.from(e.getNode()).map(Fe.fromDom);const Sg=e=>C.from(e.getNode(true)).map(Fe.fromDom);const _g=(e,t)=>{let n=t;while(n=e(n)){if(n.isVisible()){return n}}return n};const Ng=(e,t)=>{const n=gg(e,t);if(!n&&E(e.getNode())){return true}return n};var Rg;(function(e){e[e["Backwards"]=-1]="Backwards";e[e["Forwards"]=1]="Forwards"})(Rg||(Rg={}));const Ag=_;const Dg=je;const Og=ze;const Tg=E;const Bg=Xi;const Pg=tc;const Lg=nc;const Mg=(e,t)=>{const n=[];let o=e;while(o&&o!==t){n.push(o);o=o.parentNode}return n};const Ig=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){return e.childNodes[t]}return null};const Fg=(e,t)=>{if(ag(e)){if(Bg(t.previousSibling)&&!Dg(t.previousSibling)){return M.before(t)}if(Dg(t)){return M(t,0)}}if(lg(e)){if(Bg(t.nextSibling)&&!Dg(t.nextSibling)){return M.after(t)}if(Dg(t)){return M(t,t.data.length)}}if(lg(e)){if(Tg(t)){return M.before(t)}return M.after(t)}return M.before(t)};const Ug=(e,t)=>{const n=t.nextSibling;if(n&&Bg(n)){if(Dg(n)){return M(n,0)}else{return M.before(n)}}else{return zg(Rg.Forwards,M.after(t),e)}};const zg=(e,t,n)=>{let o;let s;let r;let i;if(!Og(n)||!t){return null}if(t.isEqual(M.after(n))&&n.lastChild){i=M.after(n.lastChild);if(lg(e)&&Bg(n.lastChild)&&Og(n.lastChild)){return Tg(n.lastChild)?M.before(n.lastChild):i}}else{i=t}const c=i.container();let a=i.offset();if(Dg(c)){if(lg(e)&&a>0){return M(c,--a)}if(ag(e)&&a<c.length){return M(c,++a)}o=c}else{if(lg(e)&&a>0){s=Ig(c,a-1);if(Bg(s)){if(!Pg(s)){r=ug(s,e,Lg,s);if(r){if(Dg(r)){return M(r,r.data.length)}return M.after(r)}}if(Dg(s)){return M(s,s.data.length)}return M.before(s)}}if(ag(e)&&a<c.childNodes.length){s=Ig(c,a);if(Bg(s)){if(Tg(s)){return Ug(n,s)}if(!Pg(s)){r=ug(s,e,Lg,s);if(r){if(Dg(r)){return M(r,0)}return M.before(r)}}if(Dg(s)){return M(s,0)}return M.after(s)}}o=s?s:i.getNode()}if(o&&(ag(e)&&i.isAtEnd()||lg(e)&&i.isAtStart())){o=ug(o,e,f,n,true);if(Lg(o,n)){return Fg(e,o)}}s=o?ug(o,e,Lg,n):o;const l=ut(S(Mg(c,n),Ag));if(l&&(!s||!l.contains(s))){if(ag(e)){i=M.after(l)}else{i=M.before(l)}return i}if(s){return Fg(e,s)}return null};const jg=t=>({next:e=>{return zg(Rg.Forwards,e,t)},prev:e=>{return zg(Rg.Backwards,e,t)}});const Hg=(e,t,n)=>{const o=e?M.before(n):M.after(n);return Yg(e,t,o)};const $g=e=>E(e)?M.before(e):M.after(e);const Vg=e=>{if(M.isTextPosition(e)){return e.offset()===0}else{return Xi(e.getNode())}};const qg=e=>{if(M.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else{return Xi(e.getNode(true))}};const Wg=(e,t)=>!M.isTextPosition(e)&&!M.isTextPosition(t)&&e.getNode()===t.getNode(true);const Kg=e=>!M.isTextPosition(e)&&E(e.getNode());const Gg=(e,t,n)=>{if(e){return!Wg(t,n)&&!Kg(t)&&qg(t)&&Vg(n)}else{return!Wg(n,t)&&Vg(t)&&qg(n)}};const Yg=(e,t,n)=>{const o=jg(t);return C.from(e?o.next(n):o.prev(n))};const Xg=(t,n,o)=>Yg(t,n,o).bind(e=>{if(gg(o,e,n)&&Gg(t,o,e)){return Yg(t,n,e)}else{return C.some(e)}});const Qg=(t,n,e,o)=>Xg(t,n,e).bind(e=>o(e)?Qg(t,n,e,o):C.some(e));const Jg=(e,t)=>{const n=e?t.firstChild:t.lastChild;if(je(n)){return C.some(M(n,e?0:n.data.length))}else if(n){if(Xi(n)){return C.some(e?M.before(n):$g(n))}else{return Hg(e,t,n)}}else{return C.none()}};const Zg=h(Yg,true);const ep=h(Yg,false);const tp=h(Jg,true);const np=h(Jg,false);const op="_mce_caret";const sp=e=>ze(e)&&e.id===op;const rp=(e,t)=>{let n=t;while(n&&n!==e){if(sp(n)){return n}n=n.parentNode}return null};const ip=e=>Re(e.start);const cp=e=>Ie(e,"rng");const ap=e=>Ie(e,"id");const lp=e=>Ie(e,"name");const dp=e=>U.isArray(e.start);const up=e=>!lp(e)&&j(e.forward)?e.forward:true;const fp=(e,t)=>{if(ze(t)&&e.isBlock(t)&&!t.innerHTML){t.innerHTML='<br data-mce-bogus="1" />'}return t};const mp=(o,s)=>{const e=C.from(nu(o.getRoot(),s.start));const t=C.from(nu(o.getRoot(),s.end));return Bn(e,t,(e,t)=>{const n=o.createRng();n.setStart(e.container(),e.offset());n.setEnd(t.container(),t.offset());return{range:n,forward:up(s)}})};const gp=(e,t)=>{var n;const o=(n=e.ownerDocument)!==null&&n!==void 0?n:document;const s=o.createTextNode(Ei);e.appendChild(s);t.setStart(s,0);t.setEnd(s,0)};const pp=e=>!e.hasChildNodes();const hp=(e,t)=>np(e).fold(a,e=>{t.setStart(e.container(),e.offset());t.setEnd(e.container(),e.offset());return true});const bp=(e,t,n)=>{if(pp(t)&&rp(e,t)){gp(t,n);return true}else{return false}};const vp=(e,t,n,o)=>{const s=n[t?"start":"end"];const r=e.getRoot();if(s){let n=r;let e=s[0];for(let t=s.length-1;n&&t>=1;t--){const e=n.childNodes;if(bp(r,n,o)){return true}if(s[t]>e.length-1){if(bp(r,n,o)){return true}return hp(n,o)}n=e[s[t]]}if(je(n)){e=Math.min(s[0],n.data.length)}if(ze(n)){e=Math.min(s[0],n.childNodes.length)}if(t){o.setStart(n,e)}else{o.setEnd(n,e)}}return true};const yp=e=>je(e)&&e.data.length>0;const Cp=(r,i,c)=>{const a=r.get(c.id+"_"+i);const e=a===null||a===void 0?void 0:a.parentNode;const t=c.keep;if(a&&e){let o;let s;if(i==="start"){if(!t){o=e;s=r.nodeIndex(a)}else{if(a.hasChildNodes()){o=a.firstChild;s=1}else if(yp(a.nextSibling)){o=a.nextSibling;s=0}else if(yp(a.previousSibling)){o=a.previousSibling;s=a.previousSibling.data.length}else{o=e;s=r.nodeIndex(a)+1}}}else{if(!t){o=e;s=r.nodeIndex(a)}else{if(a.hasChildNodes()){o=a.firstChild;s=1}else if(yp(a.previousSibling)){o=a.previousSibling;s=a.previousSibling.data.length}else{o=e;s=r.nodeIndex(a)}}}if(!t){const e=a.previousSibling;const t=a.nextSibling;U.each(U.grep(a.childNodes),e=>{if(je(e)){e.data=e.data.replace(/\uFEFF/g,"")}});let n;while(n=r.get(c.id+"_"+i)){r.remove(n,true)}if(je(t)&&je(e)&&!H.browser.isOpera()){const l=e.data.length;e.appendData(t.data);r.remove(t);o=e;s=l}}return C.some(M(o,s))}else{return C.none()}};const wp=(e,t)=>{const n=e.createRng();if(vp(e,true,t,n)&&vp(e,false,t,n)){return C.some({range:n,forward:up(t)})}else{return C.none()}};const xp=(o,s)=>{const e=Cp(o,"start",s);const t=Cp(o,"end",s);return Bn(e,t.or(e),(e,t)=>{const n=o.createRng();n.setStart(fp(o,e.container()),e.offset());n.setEnd(fp(o,t.container()),t.offset());return{range:n,forward:up(s)}})};const kp=(n,e)=>C.from(n.select(e.name)[e.index]).map(e=>{const t=n.createRng();t.selectNode(e);return{range:t,forward:true}});const Ep=(e,t)=>{const n=e.dom;if(t){if(dp(t)){return wp(n,t)}else if(ip(t)){return mp(n,t)}else if(ap(t)){return xp(n,t)}else if(lp(t)){return kp(n,t)}else if(cp(t)){return C.some({range:t.rng,forward:up(t)})}}return C.none()};const Sp=(e,t,n)=>{return bu(e,t,n)};const _p=(n,e)=>{Ep(n,e).each(({range:e,forward:t})=>{n.setRng(e,t)})};const Np=e=>{return ze(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};const Rp=t=>e=>t===e;const Ap=Rp($r);const Dp=e=>e!==""&&" \f\n\r\t\v".indexOf(e)!==-1;const Op=e=>!Dp(e)&&!Ap(e)&&!Vr(e);const Tp=e=>({value:Bp(e)});const Bp=e=>_t(e,"#").toUpperCase();const Pp=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()};const Lp=e=>{const t=Pp(e.red)+Pp(e.green)+Pp(e.blue);return Tp(t)};const Mp=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i;const Ip=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i;const Fp=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o});const Up=(e,t,n,o)=>{const s=parseInt(e,10);const r=parseInt(t,10);const i=parseInt(n,10);const c=parseFloat(o);return Fp(s,r,i,c)};const zp=e=>{if(e==="transparent"){return C.some(Fp(0,0,0,0))}const t=Mp.exec(e);if(t!==null){return C.some(Up(t[1],t[2],t[3],"1"))}const n=Ip.exec(e);if(n!==null){return C.some(Up(n[1],n[2],n[3],n[4]))}return C.none()};const jp=e=>zp(e).map(Lp).map(e=>"#"+e.value).getOr(e);const Hp=t=>{const n=[];if(t){for(let e=0;e<t.rangeCount;e++){n.push(t.getRangeAt(e))}}return n};const $p=e=>{return ge(e,e=>{const t=fd(e);return t?[Fe.fromDom(t)]:[]})};const Vp=e=>{return Hp(e).length>1};const qp=e=>S($p(e),pi);const Wp=e=>hr(e,"td[data-mce-selected],th[data-mce-selected]");const Kp=(e,t)=>{const n=Wp(t);return n.length>0?n:qp(e)};const Gp=e=>Kp(Hp(e.selection.getSel()),Fe.fromDom(e.getBody()));const Yp=(e,t)=>ys(e,"table",t);const Xp=e=>{const t=e.startContainer,n=e.startOffset;if(je(t)){return n===0?C.some(Fe.fromDom(t)):C.none()}else{return C.from(t.childNodes[n]).map(Fe.fromDom)}};const Qp=e=>{const t=e.endContainer,n=e.endOffset;if(je(t)){return n===t.data.length?C.some(Fe.fromDom(t)):C.none()}else{return C.from(t.childNodes[n-1]).map(Fe.fromDom)}};const Jp=t=>{return Jo(t).fold(Be([t]),e=>{return[t].concat(Jp(e))})};const Zp=t=>{return Zo(t).fold(Be([t]),e=>{if(g(e)==="br"){return Wo(e).map(e=>{return[t].concat(Zp(e))}).getOr([])}else{return[t].concat(Zp(e))}})};const eh=(s,e)=>{return Bn(Xp(e),Qp(e),(e,t)=>{const n=ue(Jp(s),h(k,e));const o=ue(Zp(s),h(k,t));return n.isSome()&&o.isSome()}).getOr(false)};const th=(e,t,n,o)=>{const s=n;const r=new vr(n,s);const i=Xe(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!m(["td","th","table"],t.toLowerCase()));let c=n;do{if(je(c)&&U.trim(c.data).length!==0){if(o){t.setStart(c,0)}else{t.setEnd(c,c.data.length)}return}if(i[c.nodeName]){if(o){t.setStartBefore(c)}else{if(c.nodeName==="BR"){t.setEndBefore(c)}else{t.setEndAfter(c)}}return}}while(c=o?r.next():r.prev());if(s.nodeName==="BODY"){if(o){t.setStart(s,0)}else{t.setEnd(s,s.childNodes.length)}}};const nh=e=>{const t=e.selection.getSel();return De(t)&&t.rangeCount>0};const oh=(o,s)=>{const e=Gp(o);if(e.length>0){Le(e,e=>{const t=e.dom;const n=o.dom.createRng();n.setStartBefore(t);n.setEndAfter(t);s(n,true)})}else{s(o.selection.getRng(),false)}};const sh=(e,t,n)=>{const o=hu(e,t);n(o);e.moveToBookmark(o)};const rh=e=>q(e===null||e===void 0?void 0:e.nodeType);const ih=e=>ze(e)&&!Np(e)&&!sp(e)&&!_r(e);const ch=(t,n)=>{if(ih(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=t.getAttrib(n,"data-mce-selected");const e=parseInt(o,10);return!isNaN(e)&&e>0}else{return false}};const ah=e=>e.isContentEditable===true;const lh=(e,t,n)=>{const{selection:o,dom:s}=e;const r=o.getNode();const i=_(r);sh(o,true,()=>{t()});const c=i&&_(r);if(c&&s.isChildOf(r,e.getBody())){e.selection.select(r)}else if(n(o.getStart())){dh(s,o)}};const dh=(n,o)=>{var e,s;const r=o.getRng();const{startContainer:i,startOffset:c}=r;const t=o.getNode();if(ch(n,t)){return}if(ze(i)){const a=i.childNodes;const l=n.getRoot();let t;if(c<a.length){const d=a[c];t=new vr(d,(e=n.getParent(d,n.isBlock))!==null&&e!==void 0?e:l)}else{const d=a[a.length-1];t=new vr(d,(s=n.getParent(d,n.isBlock))!==null&&s!==void 0?s:l);t.next(true)}for(let e=t.current();e;e=t.next()){if(n.getContentEditable(e)==="false"){return}else if(je(e)&&!gh(e)){r.setStart(e,0);o.setRng(r);return}}}};const uh=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o]){if(ze(e)||!gh(e)){return e}}}return undefined};const fh=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Tc(e,t);const mh=(e,t,n)=>{return e.schema.isValidChild(t,n)};const gh=(t,n=false)=>{if(De(t)&&je(t)){const e=n?t.data.replace(/ /g," "):t.data;return sc(e)}else{return false}};const ph=e=>{return De(e)&&je(e)&&e.length===0};const hh=(e,t)=>{const n="[data-mce-cef-wrappable]";const o=Mf(e);const s=Lt(o)?n:`${n},${o}`;return Bo(Fe.fromDom(t),s)};const bh=(e,t)=>{const n=e.dom;return ih(t)&&n.getContentEditable(t)==="false"&&hh(e,t)&&n.select('[contenteditable="true"]',t).length===0};const vh=(e,n)=>{if(Oe(e)){return e(n)}else if(De(n)){e=e.replace(/%(\w+)/g,(e,t)=>{return n[t]||e})}return e};const yh=(e,t)=>{e=e||"";t=t||"";e=""+(e.nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()===t.toLowerCase()};const Ch=(t,n)=>{if(Ae(t)){return null}else{let e=String(t);if(n==="color"||n==="backgroundColor"){e=jp(e)}if(n==="fontWeight"&&t===700){e="bold"}if(n==="fontFamily"){e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}return e}};const wh=(e,t,n)=>{const o=e.getStyle(t,n);return Ch(o,n)};const xh=(t,e)=>{let n;t.getParent(e,e=>{if(ze(e)){n=t.getStyle(e,"text-decoration");return!!n&&n!=="none"}else{return false}});return n};const kh=(e,t,n)=>{return e.getParents(t,n,e.getRoot())};const Eh=(e,t,n)=>{const o=e.formatter.get(t);return De(o)&&Pe(o,n)};const Sh=(e,t)=>{const n=t=>{const n=e=>Oe(e)||e.length>1&&e.charAt(0)==="%";return Pe(["styles","attributes"],e=>p(t,e).exists(e=>{const t=Ve(e)?e:Je(e);return Pe(t,n)}))};return Eh(e,t,n)};const _h=(t,e,o)=>{const n=["inline","block","selector","attributes","styles","classes"];const s=e=>Xe(e,(e,t)=>Pe(n,e=>e===t));return Eh(t,e,e=>{const n=s(e);return Eh(t,o,e=>{const t=s(e);return et(n,t)})})};const Nh=e=>Ze(e,"block");const Rh=e=>Nh(e)&&e.wrapper===true;const Ah=e=>Nh(e)&&e.wrapper!==true;const Dh=e=>Ze(e,"selector");const Oh=e=>Ze(e,"inline");const Th=e=>Dh(e)&&Oh(e)&&On(p(e,"mixed"),true);const Bh=e=>Dh(e)&&e.expand!==false&&!Oh(e);const Ph=Np;const Lh=kh;const Mh=gh;const Ih=fh;const Fh=e=>{return E(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling};const Uh=(e,t)=>{let n=t;while(n){if(ze(n)&&e.getContentEditable(n)){return e.getContentEditable(n)==="false"?n:t}n=n.parentNode}return t};const zh=(e,t,n,o)=>{const s=t.data;if(e){for(let e=n;e>0;e--){if(o(s.charAt(e-1))){return e}}}else{for(let e=n;e<s.length;e++){if(o(s.charAt(e))){return e}}}return-1};const jh=(e,t,n)=>zh(e,t,n,e=>Ap(e)||Dp(e));const Hh=(e,t,n)=>zh(e,t,n,Op);const $h=(r,e,t,n,i,o)=>{let c;const a=r.getParent(t,r.isBlock)||e;const s=(e,t,n)=>{const o=Zl(r);const s=i?o.backwards:o.forwards;return C.from(s(e,t,(e,t)=>{if(Ph(e.parentNode)){return-1}else{c=e;return n(i,e,t)}},a))};const l=s(t,n,jh);return l.bind(e=>o?s(e.container,e.offset+(i?-1:0),Hh):C.some(e)).orThunk(()=>c?C.some({container:c,offset:i?0:c.length}):C.none())};const Vh=(n,o,s,e,t)=>{const r=e[t];if(je(e)&&Lt(e.data)&&r){e=r}const i=Lh(n,e);for(let t=0;t<i.length;t++){for(let e=0;e<o.length;e++){const c=o[e];if(De(c.collapsed)&&c.collapsed!==s.collapsed){continue}if(Dh(c)&&n.is(i[t],c.selector)){return i[t]}}}return e};const qh=(t,e,n,o)=>{var s;let r=n;const i=t.getRoot();const c=e[0];if(Nh(c)){r=c.wrapper?null:t.getParent(n,c.block,i)}if(!r){const a=(s=t.getParent(n,"LI,TD,TH"))!==null&&s!==void 0?s:i;r=t.getParent(je(n)?n.parentNode:n,e=>e!==i&&Ih(t.schema,e),a)}if(r&&Nh(c)&&c.wrapper){r=Lh(t,r,"ul,ol").reverse()[0]||r}if(!r){r=n;while(r&&r[o]&&!t.isBlock(r[o])){r=r[o];if(yh(r,"br")){break}}}return r||n};const Wh=(e,t,n,o)=>{const s=n.parentNode;if(De(n[o])){return false}else if(s===t||Ae(s)||e.isBlock(s)){return true}else{return Wh(e,t,s,o)}};const Kh=(t,e,n,o,s)=>{let r=n;const i=s?"previousSibling":"nextSibling";const c=t.getRoot();if(je(n)&&!Mh(n)){if(s?o>0:o<n.data.length){return n}}while(r){if(!e[0].block_expand&&t.isBlock(r)){return r}for(let e=r[i];e;e=e[i]){const a=je(e)&&!Wh(t,c,e,i);if(!Ph(e)&&!Fh(e)&&!Mh(e,a)){return r}}if(r===c||r.parentNode===c){n=r;break}r=r.parentNode}return n};const Gh=e=>Ph(e.parentNode)||Ph(e);const Yh=(e,t,n,o=false)=>{let{startContainer:s,startOffset:r,endContainer:i,endOffset:c}=t;const a=n[0];if(ze(s)&&s.hasChildNodes()){s=md(s,r);if(je(s)){r=0}}if(ze(i)&&i.hasChildNodes()){i=md(i,t.collapsed?c:c-1);if(je(i)){c=i.data.length}}s=Uh(e,s);i=Uh(e,i);if(Gh(s)){s=Ph(s)?s:s.parentNode;if(t.collapsed){s=s.previousSibling||s}else{s=s.nextSibling||s}if(je(s)){r=t.collapsed?s.length:0}}if(Gh(i)){i=Ph(i)?i:i.parentNode;if(t.collapsed){i=i.nextSibling||i}else{i=i.previousSibling||i}if(je(i)){c=t.collapsed?0:i.length}}if(t.collapsed){const l=$h(e,e.getRoot(),s,r,true,o);l.each(({container:e,offset:t})=>{s=e;r=t});const d=$h(e,e.getRoot(),i,c,false,o);d.each(({container:e,offset:t})=>{i=e;c=t})}if(Oh(a)||a.block_expand){if(!Oh(a)||(!je(s)||r===0)){s=Kh(e,n,s,r,true)}if(!Oh(a)||(!je(i)||c===i.data.length)){i=Kh(e,n,i,c,false)}}if(Bh(a)){s=Vh(e,n,t,s,"previousSibling");i=Vh(e,n,t,i,"nextSibling")}if(Nh(a)||Dh(a)){s=qh(e,n,s,"previousSibling");i=qh(e,n,i,"nextSibling");if(Nh(a)){if(!e.isBlock(s)){s=Kh(e,n,s,r,true)}if(!e.isBlock(i)){i=Kh(e,n,i,c,false)}}}if(ze(s)&&s.parentNode){r=e.nodeIndex(s);s=s.parentNode}if(ze(i)&&i.parentNode){c=e.nodeIndex(i)+1;i=i.parentNode}return{startContainer:s,startOffset:r,endContainer:i,endOffset:c}};const Xh=(n,e,i)=>{var t;const o=e.startOffset;const s=md(e.startContainer,o);const r=e.endOffset;const c=md(e.endContainer,r-1);const a=e=>{const t=e[0];if(je(t)&&t===s&&o>=t.data.length){e.splice(0,1)}const n=e[e.length-1];if(r===0&&e.length>0&&n===c&&je(n)){e.splice(e.length-1,1)}return e};const l=(e,t,n)=>{const o=[];for(;e&&e!==n;e=e[t]){o.push(e)}return o};const d=(e,t)=>n.getParent(e,e=>e.parentNode===t,t);const u=(o,e,s)=>{const r=s?"nextSibling":"previousSibling";for(let t=o,n=t.parentNode;t&&t!==e;t=n){n=t.parentNode;const e=l(t===o?t:t[r],r);if(e.length){if(!s){e.reverse()}i(a(e))}}};if(s===c){return i(a([s]))}const f=(t=n.findCommonAncestor(s,c))!==null&&t!==void 0?t:n.getRoot();if(n.isChildOf(s,c)){return u(s,f,true)}if(n.isChildOf(c,s)){return u(c,f)}const m=d(s,f)||s;const g=d(c,f)||c;u(s,m,true);const p=l(m===s?m:m.nextSibling,"nextSibling",g===c?g.nextSibling:g);if(p.length){i(a(p))}u(c,g)};const Qh=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"];const Jh=e=>eo(e)&&Gr(e)===Ei;const Zh=(t,n,o,s)=>Ho(n).fold(()=>"skipping",e=>{if(s==="br"||Jh(n)){return"valid"}else if(Ml(n)){return"existing"}else if(sp(n.dom)){return"caret"}else if(Pe(Qh,e=>Bo(n,e))){return"valid-block"}else if(!mh(t,o,s)||!mh(t,g(e),o)){return"invalid-child"}else{return"valid"}});const eb=(e,t)=>{const n=Yh(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset);t.setEnd(n.endContainer,n.endOffset);e.selection.setRng(t)};const tb=(e,t,n,o,s,r)=>{const{uid:i=t,...c}=n;xo(e,Rl());ro(e,`${Dl()}`,i);ro(e,`${Al()}`,o);const{attributes:a={},classes:l=[]}=s(i,c);io(e,a);ql(e,l);if(r){if(l.length>0){ro(e,`${Tl()}`,l.join(","))}const d=Ee(a);if(d.length>0){ro(e,`${Bl()}`,d.join(","))}}};const nb=t=>{Eo(t,Rl());uo(t,`${Dl()}`);uo(t,`${Al()}`);uo(t,`${Ol()}`);const e=ao(t,`${Bl()}`).map(e=>e.split(",")).getOr([]);const n=ao(t,`${Tl()}`).map(e=>e.split(",")).getOr([]);Le(e,e=>uo(t,e));Wl(t,n);uo(t,`${Tl()}`);uo(t,`${Bl()}`)};const ob=(e,t,n,o,s)=>{const r=Fe.fromTag("span",e);tb(r,t,n,o,s,false);return r};const sb=(o,e,s,r,i,c)=>{const t=[];const n=ob(o.getDoc(),s,c,r,i);const a=Sl();const l=()=>{a.clear()};const d=()=>a.get().getOrThunk(()=>{const e=Gl(n);t.push(e);a.set(e);return e});const u=e=>{Le(e,f)};const f=t=>{const e=Zh(o,t,"span",g(t));switch(e){case"invalid-child":{l();const e=Xo(t);u(e);l();break}case"valid-block":{l();tb(t,s,c,r,i,true);break}case"valid":{const n=d();zs(t,n);break}}};const m=e=>{const t=y(e,Fe.fromDom);u(t)};Xh(o.dom,e,e=>{l();m(e)});return t};const rb=(r,i,c,a)=>{r.undoManager.transact(()=>{const e=r.selection;const t=e.getRng();const n=Gp(r).length>0;const o=Vl("mce-annotation");if(t.collapsed&&!n){eb(r,t)}if(e.getRng().collapsed&&!n){const s=ob(r.getDoc(),o,a,i,c.decorate);Gs(s,$r);e.getRng().insertNode(s.dom);e.select(s.dom)}else{sh(e,false,()=>{oh(r,e=>{sb(r,e,o,i,c.decorate,a)})})}})};const ib=o=>{const s=Hl();jl(o,s);const n=zl(o,s);const t=oo("span");const r=e=>{Le(e,e=>{if(t(e)){Vs(e)}else{nb(e)}})};return{register:(e,t)=>{s.register(e,t)},annotate:(t,n)=>{s.lookup(t).each(e=>{rb(o,t,e,n)})},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:e=>{Ll(o,C.some(e)).each(({elements:e})=>{const t=o.selection.getBookmark();r(e);o.selection.moveToBookmark(t)})},removeAll:e=>{const t=o.selection.getBookmark();Me(Ul(o,e),(e,t)=>{r(e)});o.selection.moveToBookmark(t)},getAll:e=>{const t=Ul(o,e);return _e(t,e=>y(e,e=>e.dom))}}};const cb=e=>{return{getBookmark:h(Sp,e),moveToBookmark:h(_p,e)}};cb.isBookmarkNode=Np;const ab=(t,n,e)=>{if(e.collapsed){return false}else{return Pe(e.getClientRects(),e=>cd(e,t,n))}};const lb=(e,t)=>e.dispatch("PreProcess",t);const db=(e,t)=>e.dispatch("PostProcess",t);const ub=e=>{e.dispatch("remove")};const fb=e=>{e.dispatch("detach")};const mb=(e,t)=>{e.dispatch("SwitchMode",{mode:t})};const gb=(e,t,n,o,s)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:s})};const pb=(e,t,n,o,s)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:s})};const hb=e=>{e.dispatch("PreInit")};const bb=e=>{e.dispatch("PostRender")};const vb=e=>{e.dispatch("Init")};const yb=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})};const Cb=(e,t,n)=>{e.dispatch(t,n)};const wb=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})};const xb=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})};const kb=(e,t)=>e.dispatch("BeforeSetContent",t);const Eb=(e,t)=>e.dispatch("SetContent",t);const Sb=(e,t)=>e.dispatch("BeforeGetContent",t);const _b=(e,t)=>e.dispatch("GetContent",t);const Nb=(e,t)=>{e.dispatch("AutocompleterStart",t)};const Rb=(e,t)=>{e.dispatch("AutocompleterUpdate",t)};const Ab=e=>{e.dispatch("AutocompleterEnd")};const Db=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n});const Ob=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n});const Tb=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t});const $={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>{return e.shiftKey||e.ctrlKey||e.altKey||$.metaKeyPressed(e)},metaKeyPressed:e=>{return H.os.isMacOS()||H.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey}};const Bb="data-mce-selected";const Pb="table,img,figure.image,hr,video,span.mce-preview-object";const Lb=Math.abs;const Mb=Math.round;const Ib={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};const Fb=e=>e.type==="longpress"||e.type.indexOf("touch")===0;const Ub=(r,a)=>{const l=a.dom;const d=a.getDoc();const u=document;const f=a.getBody();let m,g,p,h,b;let v,y,F,U,C,w,x,i;let k;let E;let S;let _;const c=e=>De(e)&&(Mr(e)||l.is(e,"figure.image"));const N=e=>zr(e)||l.hasClass(e,"mce-preview-object");const s=(e,t)=>{if(Fb(e)){const n=e.touches[0];return c(e.target)&&!ab(n.clientX,n.clientY,t)}else{return c(e.target)&&!ab(e.clientX,e.clientY,t)}};const e=e=>{const t=e.target;if(s(e,a.selection.getRng())&&!e.isDefaultPrevented()){a.selection.select(t)}};const R=e=>{if(l.hasClass(e,"mce-preview-object")&&De(e.firstElementChild)){return[e,e.firstElementChild]}else if(l.is(e,"figure.image")){return[e.querySelector("img")]}else{return[e]}};const A=e=>{const t=kf(a);if(!t){return false}if(e.getAttribute("data-mce-resize")==="false"){return false}if(e===a.getBody()){return false}if(l.hasClass(e,"mce-preview-object")&&De(e.firstElementChild)){return Bo(Fe.fromDom(e.firstElementChild),t)}else{return Bo(Fe.fromDom(e),t)}};const z=e=>{if(N(e)){return l.create("img",{src:H.transparentSrc})}else{return e.cloneNode(true)}};const o=(e,t,n)=>{if(De(n)){const o=R(e);Le(o,e=>{if(e.style[t]||!a.schema.isValid(e.nodeName.toLowerCase(),t)){l.setStyle(e,t,n)}else{l.setAttrib(e,t,""+n)}})}};const D=(e,t,n)=>{o(e,"width",t);o(e,"height",n)};const O=e=>{let t,n,o;let s,r;t=e.screenX-v;n=e.screenY-y;k=t*h[2]+C;E=n*h[3]+w;k=k<5?5:k;E=E<5?5:E;if((c(m)||N(m))&&Ef(a)!==false){o=!$.modifierPressed(e)}else{o=$.modifierPressed(e)}if(o){if(Lb(t)>Lb(n)){E=Mb(k*x);k=Mb(E/x)}else{k=Mb(E/x);E=Mb(k*x)}}D(g,k,E);s=h.startPos.x+t;r=h.startPos.y+n;s=s>0?s:0;r=r>0?r:0;l.setStyles(p,{left:s,top:r,display:"block"});p.innerHTML=k+" &times; "+E;if(h[2]<0&&g.clientWidth<=k){l.setStyle(g,"left",F+(C-k))}if(h[3]<0&&g.clientHeight<=E){l.setStyle(g,"top",U+(w-E))}t=f.scrollWidth-S;n=f.scrollHeight-_;if(t+n!==0){l.setStyles(p,{left:s-t,top:r-n})}if(!i){gb(a,m,C,w,"corner-"+h.name);i=true}};const T=()=>{const e=i;i=false;if(e){o(m,"width",k);o(m,"height",E)}l.unbind(d,"mousemove",O);l.unbind(d,"mouseup",T);if(u!==d){l.unbind(u,"mousemove",O);l.unbind(u,"mouseup",T)}l.remove(g);l.remove(p);l.remove(b);t(m);if(e){pb(a,m,k,E,"corner-"+h.name);l.setAttrib(m,"style",l.getAttrib(m,"style"))}a.nodeChanged()};const t=e=>{M();const t=l.getPos(e,f);const s=t.x;const r=t.y;const n=e.getBoundingClientRect();const i=n.width||n.right-n.left;const c=n.height||n.bottom-n.top;if(m!==e){P();m=e;k=E=0}const o=a.dispatch("ObjectSelected",{target:e});if(A(e)&&!o.isDefaultPrevented()){Me(Ib,(n,o)=>{const t=e=>{const t=R(m)[0];v=e.screenX;y=e.screenY;C=t.clientWidth;w=t.clientHeight;x=w/C;h=n;h.name=o;h.startPos={x:i*n[0]+s,y:c*n[1]+r};S=f.scrollWidth;_=f.scrollHeight;b=l.add(f,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"});l.setStyles(b,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"});g=z(m);l.addClass(g,"mce-clonedresizable");l.setAttrib(g,"data-mce-bogus","all");g.contentEditable="false";l.setStyles(g,{left:s,top:r,margin:0});D(g,i,c);g.removeAttribute(Bb);f.appendChild(g);l.bind(d,"mousemove",O);l.bind(d,"mouseup",T);if(u!==d){l.bind(u,"mousemove",O);l.bind(u,"mouseup",T)}p=l.add(f,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+w)};let e=l.get("mceResizeHandle"+o);if(e){l.remove(e)}e=l.add(f,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:true,style:"cursor:"+o+"-resize; margin:0; padding:0",title:"按住ctrl键拖拽来单独调整图片的宽高"});l.bind(e,"mousedown",e=>{e.stopImmediatePropagation();e.preventDefault();t(e)});n.elm=e;l.setStyles(e,{left:i*n[0]+s-e.offsetWidth/2,top:c*n[1]+r-e.offsetHeight/2})})}else{P(false)}};const B=_l(t,0);const P=(e=true)=>{B.cancel();M();if(m&&e){m.removeAttribute(Bb)}Me(Ib,(e,t)=>{const n=l.get("mceResizeHandle"+t);if(n){l.unbind(n);l.remove(n)}})};const L=(e,t)=>l.isChildOf(e,t);const n=e=>{if(i||a.removed||a.composing){return}const t=e.type==="mousedown"?e.target:r.getNode();const n=ws(Fe.fromDom(t),Pb).map(e=>e.dom).filter(e=>l.isEditable(e.parentElement)).getOrUndefined();const o=De(n)?l.getAttrib(n,Bb,"1"):"1";Le(l.select(`img[${Bb}],hr[${Bb}]`),e=>{e.removeAttribute(Bb)});if(De(n)&&L(n,f)){I();const s=r.getStart(true);if(L(s,n)&&L(r.getEnd(true),n)){l.setAttrib(n,Bb,o);B.throttle(n);return}}P()};const M=()=>{Me(Ib,e=>{if(e.elm){l.unbind(e.elm);delete e.elm}})};const I=()=>{try{a.getDoc().execCommand("enableObjectResizing",false,"false")}catch(e){}};a.on("init",()=>{I();a.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",n);a.on("keyup compositionend",e=>{if(m&&m.nodeName==="TABLE"){n(e)}});a.on("hide blur",P);a.on("contextmenu longpress",e,true)});a.on("remove",M);const j=()=>{B.cancel();m=g=b=null};return{isResizable:A,showResizeRect:t,hideResizeRect:P,updateResizeRect:n,destroy:j}};const zb=(n,e)=>{e.fold(e=>{n.setStartBefore(e.dom)},(e,t)=>{n.setStart(e.dom,t)},e=>{n.setStartAfter(e.dom)})};const jb=(n,e)=>{e.fold(e=>{n.setEndBefore(e.dom)},(e,t)=>{n.setEnd(e.dom,t)},e=>{n.setEndAfter(e.dom)})};const Hb=(e,t,n)=>{const o=e.document.createRange();zb(o,t);jb(o,n);return o};const $b=(e,t,n,o,s)=>{const r=e.document.createRange();r.setStart(t.dom,n);r.setEnd(o.dom,s);return r};const Vb=Eu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);const qb=(e,t,n)=>t(Fe.fromDom(n.startContainer),n.startOffset,Fe.fromDom(n.endContainer),n.endOffset);const Wb=(s,e)=>e.match({domRange:e=>{return{ltr:Be(e),rtl:C.none}},relative:(e,t)=>{return{ltr:ft(()=>Hb(s,e,t)),rtl:ft(()=>C.some(Hb(s,t,e)))}},exact:(e,t,n,o)=>{return{ltr:ft(()=>$b(s,e,t,n,o)),rtl:ft(()=>C.some($b(s,n,o,e,t)))}}});const Kb=(e,t)=>{const n=t.ltr();if(n.collapsed){const o=t.rtl().filter(e=>e.collapsed===false);return o.map(e=>Vb.rtl(Fe.fromDom(e.endContainer),e.endOffset,Fe.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>qb(e,Vb.ltr,n))}else{return qb(e,Vb.ltr,n)}};const Gb=(e,t)=>{const n=Wb(e,t);return Kb(e,n)};Vb.ltr;Vb.rtl;const Yb=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o});const Xb={create:Yb};const Qb=(n,e,t)=>{var o,s;return C.from((s=(o=n.dom).caretPositionFromPoint)===null||s===void 0?void 0:s.call(o,e,t)).bind(e=>{if(e.offsetNode===null){return C.none()}const t=n.dom.createRange();t.setStart(e.offsetNode,e.offset);t.collapse();return C.some(t)})};const Jb=(e,t,n)=>{var o,s;return C.from((s=(o=e.dom).caretRangeFromPoint)===null||s===void 0?void 0:s.call(o,t,n))};const Zb=(()=>{if(document.caretPositionFromPoint){return Qb}else if(document.caretRangeFromPoint){return Jb}else{return C.none}})();const ev=(e,t,n)=>{const o=Fe.fromDom(e.document);return Zb(o,t,n).map(e=>Xb.create(Fe.fromDom(e.startContainer),e.startOffset,Fe.fromDom(e.endContainer),e.endOffset))};const tv=Eu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);const nv=(e,t,n,o)=>e.fold(t,n,o);const ov=e=>e.fold(Y,Y,Y);const sv=tv.before;const rv=tv.on;const iv=tv.after;const cv={before:sv,on:rv,after:iv,cata:nv,getStart:ov};const av=Eu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);const lv=e=>av.exact(e.start,e.soffset,e.finish,e.foffset);const dv=e=>e.match({domRange:e=>Fe.fromDom(e.startContainer),relative:(e,t)=>cv.getStart(e),exact:(e,t,n,o)=>e});const uv=av.domRange;const fv=av.relative;const mv=av.exact;const gv=e=>{const t=dv(e);return jo(t)};const pv=Xb.create;const hv={domRange:uv,relative:fv,exact:mv,exactFromRange:lv,getWin:gv,range:pv};const bv=(e,t)=>{const n=g(e);if("input"===n){return cv.after(e)}else if(!m(["br","img"],n)){return cv.on(e,t)}else{return t===0?cv.before(e):cv.after(e)}};const vv=(e,t)=>{const n=e.fold(cv.before,bv,cv.after);const o=t.fold(cv.before,bv,cv.after);return hv.relative(n,o)};const yv=(e,t,n,o)=>{const s=bv(e,t);const r=bv(n,o);return hv.relative(s,r)};const Cv=e=>e.match({domRange:e=>{const t=Fe.fromDom(e.startContainer);const n=Fe.fromDom(e.endContainer);return yv(t,e.startOffset,n,e.endOffset)},relative:vv,exact:yv});const wv=(e,t)=>{const n=t||document;const o=n.createDocumentFragment();Le(e,e=>{o.appendChild(e.dom)});return Fe.fromDom(o)};const xv=e=>{const s=hv.getWin(e).dom;const t=(e,t,n,o)=>$b(s,e,t,n,o);const n=Cv(e);return Gb(s,n).match({ltr:t,rtl:t})};const kv=(e,t,n)=>ev(e,t,n);const Ev=(e,t,n)=>{const o=jo(Fe.fromDom(n));return kv(o.dom,e,t).map(e=>{const t=n.createRange();t.setStart(e.start.dom,e.soffset);t.setEnd(e.finish.dom,e.foffset);return t}).getOrUndefined()};const Sv=(e,t)=>{return De(e)&&De(t)&&(e.startContainer===t.startContainer&&e.startOffset===t.startOffset)&&(e.endContainer===t.endContainer&&e.endOffset===t.endOffset)};const _v=(e,t,n)=>{let o=e;while(o&&o!==t){if(n(o)){return o}o=o.parentNode}return null};const Nv=(e,t,n)=>_v(e,t,n)!==null;const Rv=(e,t,n)=>Nv(e,t,e=>e.nodeName===n);const Av=(e,t)=>Oi(e)&&!Nv(e,t,sp);const Dv=(t,n,o)=>{const s=n.parentNode;if(s){const r=new vr(n,t.getParent(s,t.isBlock)||t.getRoot());let e;while(e=r[o?"prev":"next"]()){if(E(e)){return true}}}return false};const Ov=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t};const Tv=(e,t)=>{let n=t;while(n&&n!==e){if(_(n)){return true}n=n.parentNode}return false};const Bv=(e,t,n,o,s)=>{const r=e.getRoot();const i=e.schema.getNonEmptyElements();const c=s.parentNode;let a;let l;if(!c){return C.none()}const d=e.getParent(c,e.isBlock)||r;if(o&&E(s)&&t&&e.isEmpty(d)){return C.some(M(c,e.nodeIndex(s)))}const u=new vr(s,d);while(l=u[o?"prev":"next"]()){if(e.getContentEditableParent(l)==="false"||Av(l,r)){return C.none()}if(je(l)&&l.data.length>0){if(!Rv(l,r,"A")){return C.some(M(l,o?l.data.length:0))}return C.none()}if(e.isBlock(l)||i[l.nodeName.toLowerCase()]){return C.none()}a=l}if(Br(a)){return C.none()}if(n&&a){return C.some(M(a,0))}return C.none()};const Pv=(e,t,n,o)=>{const s=e.getRoot();let r;let i=false;let c=n?o.startContainer:o.endContainer;let a=n?o.startOffset:o.endOffset;const l=ze(c)&&a===c.childNodes.length;const d=e.schema.getNonEmptyElements();let u=n;if(Oi(c)){return C.none()}if(ze(c)&&a>c.childNodes.length-1){u=false}if(Pr(c)){c=s;a=0}if(c===s){if(u){r=c.childNodes[a>0?a-1:0];if(r){if(Oi(r)){return C.none()}if(d[r.nodeName]||Rr(r)){return C.none()}}}if(c.hasChildNodes()){a=Math.min(!u&&a>0?a-1:a,c.childNodes.length-1);c=c.childNodes[a];a=je(c)&&l?c.data.length:0;if(!t&&c===s.lastChild&&Rr(c)){return C.none()}if(Tv(s,c)||Oi(c)){return C.none()}if(c.hasChildNodes()&&!Rr(c)){r=c;const f=new vr(c,s);do{if(_(r)||Oi(r)){i=false;break}if(je(r)&&r.data.length>0){a=u?0:r.data.length;c=r;i=true;break}if(d[r.nodeName.toLowerCase()]&&!Ur(r)){a=e.nodeIndex(r);c=r.parentNode;if(!u){a++}i=true;break}}while(r=u?f.next():f.prev())}}}if(t){if(je(c)&&a===0){Bv(e,l,t,true,c).each(e=>{c=e.container();a=e.offset();i=true})}if(ze(c)){r=c.childNodes[a];if(!r){r=c.childNodes[a-1]}if(r&&E(r)&&!Ov(r,"A")&&!Dv(e,r,false)&&!Dv(e,r,true)){Bv(e,l,t,true,r).each(e=>{c=e.container();a=e.offset();i=true})}}}if(u&&!t&&je(c)&&a===c.data.length){Bv(e,l,t,false,c).each(e=>{c=e.container();a=e.offset();i=true})}return i&&c?C.some(M(c,a)):C.none()};const Lv=(e,t)=>{const n=t.collapsed,o=t.cloneRange();const s=M.fromRangeStart(t);Pv(e,n,true,o).each(e=>{if(!n||!M.isAbove(s,e)){o.setStart(e.container(),e.offset())}});if(!n){Pv(e,n,false,o).each(e=>{o.setEnd(e.container(),e.offset())})}if(n){o.collapse(true)}return Sv(t,o)?C.none():C.some(o)};const Mv=(e,t)=>{return e.splitText(t)};const Iv=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,s=e.endOffset;if(t===o&&je(t)){if(n>0&&n<t.data.length){o=Mv(t,n);t=o.previousSibling;if(s>n){s=s-n;const r=Mv(o,s).previousSibling;t=o=r;s=r.data.length;n=0}else{s=0}}}else{if(je(t)&&n>0&&n<t.data.length){t=Mv(t,n);n=0}if(je(o)&&s>0&&s<o.data.length){const r=Mv(o,s).previousSibling;o=r;s=r.data.length}}return{startContainer:t,startOffset:n,endContainer:o,endOffset:s}};const Fv=s=>{const e=(e,t)=>{return Xh(s,e,t)};const t=Iv;const n=t=>{return Lv(s,t).fold(a,e=>{t.setStart(e.startContainer,e.startOffset);t.setEnd(e.endContainer,e.endOffset);return true})};const o=(e,t={type:"word"})=>{if(t.type==="word"){const n=Yh(s,e,[{inline:"span"}]);const o=s.createRng();o.setStart(n.startContainer,n.startOffset);o.setEnd(n.endContainer,n.endOffset);return o}return e};return{walk:e,split:t,expand:o,normalize:n}};Fv.compareRanges=Sv;Fv.getCaretRangeFromPoint=Ev;Fv.getSelectedNode=fd;Fv.getNode=md;const Uv=(o,s)=>{const e=(e,t)=>{if(!q(t)&&!t.match(/^[0-9]+$/)){throw new Error(o+".set accepts only positive integer values. Value was "+t)}const n=e.dom;if(Ss(n)){n.style[o]=t+"px"}};const t=e=>{const t=s(e);if(t<=0||t===null){const n=Ds(e,o);return parseFloat(n)||0}return t};const n=t;const r=(s,e)=>le(e,(e,t)=>{const n=Ds(s,t);const o=n===undefined?0:parseInt(n,10);return isNaN(o)?e:e+o},0);const i=(e,t,n)=>{const o=r(e,n);const s=t>o?t-o:0;return s};return{set:e,get:t,getOuter:n,aggregate:r,max:i}};const zv=Uv("height",e=>{const t=e.dom;return fs(e)?t.getBoundingClientRect().height:t.offsetHeight});const jv=e=>zv.get(e);const Hv=()=>Fe.fromDom(document);const $v=(o,e)=>{const t=o.view(e);return t.fold(Be([]),e=>{const t=o.owner(e);const n=$v(o,t);return[e].concat(n)})};const Vv=(e,t)=>{const n=t.owner(e);return $v(t,n)};const qv=e=>{var t;const n=e.dom===document?C.none():C.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement);return n.map(Fe.fromDom)};const Wv=e=>Uo(e);var Kv=Object.freeze({__proto__:null,view:qv,owner:Wv});const Gv=e=>{const t=Hv();const n=ar(t);const o=Vv(e,Kv);const s=cr(e);const r=ae(o,(e,t)=>{const n=cr(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return or(r.left+s.left+n.left,r.top+s.top+n.top)};const Yv=e=>g(e)==="textarea";const Xv=(e,t)=>{const n=e.dispatch("ScrollIntoView",t);return n.isDefaultPrevented()};const Qv=(e,t)=>{e.dispatch("AfterScrollIntoView",t)};const Jv=(t,n)=>{const o=Xo(t);if(o.length===0||Yv(t)){return{element:t,offset:n}}else if(n<o.length&&!Yv(o[n])){return{element:o[n],offset:0}}else{const e=o[o.length-1];if(Yv(e)){return{element:t,offset:n}}else{if(g(e)==="img"){return{element:e,offset:1}}else if(eo(e)){return{element:e,offset:Gr(e).length}}else{return{element:e,offset:Xo(e).length}}}}};const Zv=(e,t)=>{const n=ir(e);const o=jv(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}};const ey=(e,t)=>{const n=Jv(e,t);const o=Fe.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ei+"</span>");Ms(n.element,o);return Zv(o,()=>Ue(o))};const ty=e=>Zv(Fe.fromDom(e),Te);const ny=(n,o,s,r)=>{iy(n,(e,t)=>sy(n,o,s,r),s)};const oy=(e,t,n,o,s)=>{const r={elm:o.element.dom,alignToTop:s};if(Xv(e,r)){return}const i=ar(t).top;n(t,i,o,s);Qv(e,r)};const sy=(e,t,n,o)=>{const s=Fe.fromDom(e.getBody());const r=Fe.fromDom(e.getDoc());Ls(s);const i=ey(Fe.fromDom(n.startContainer),n.startOffset);oy(e,r,t,i,o);i.cleanup()};const ry=(e,t,n,o)=>{const s=Fe.fromDom(e.getDoc());oy(e,s,n,ty(t),o)};const iy=(e,t,n)=>{const o=n.startContainer;const s=n.startOffset;const r=n.endContainer;const i=n.endOffset;t(Fe.fromDom(o),Fe.fromDom(r));const c=e.dom.createRng();c.setStart(o,s);c.setEnd(r,i);e.selection.setRng(n)};const cy=(e,t,n,o)=>{const s=e.pos;if(n){lr(s.left,s.top,o)}else{const r=s.top-t+e.height;lr(s.left,r,o)}};const ay=(e,t,n,o,s)=>{const r=n+t;const i=o.pos.top;const c=o.bottom;const a=c-i>=n;if(i<t){cy(o,n,s!==false,e)}else if(i>r){const l=a?s!==false:s===true;cy(o,n,l,e)}else if(c>r&&!a){cy(o,n,s===true,e)}};const ly=(e,t,n,o)=>{const s=jo(e).dom.innerHeight;ay(e,t,s,n,o)};const dy=(e,t,n,o)=>{const s=jo(e).dom.innerHeight;ay(e,t,s,n,o);const r=Gv(n.element);const i=mr(window);if(r.top<i.y){dr(n.element,o!==false)}else if(r.top>i.bottom){dr(n.element,o===true)}};const uy=(e,t,n)=>ny(e,ly,t,n);const fy=(e,t,n)=>ry(e,t,ly,n);const my=(e,t,n)=>ny(e,dy,t,n);const gy=(e,t,n)=>ry(e,t,dy,n);const py=(e,t,n)=>{const o=e.inline?fy:gy;o(e,t,n)};const hy=(e,t,n)=>{const o=e.inline?uy:my;o(e,t,n)};const by=e=>e.dom.focus();const vy=e=>{const t=rs(e).dom;return e.dom===t.activeElement};const yy=(e=Hv())=>C.from(e.dom.activeElement).map(Fe.fromDom);const Cy=t=>yy(rs(t)).filter(e=>t.dom.contains(e.dom));const wy=(e,t)=>{const n=eo(t)?Gr(t).length:Xo(t).length+1;if(e>n){return n}else if(e<0){return 0}return e};const xy=e=>hv.range(e.start,wy(e.soffset,e.start),e.finish,wy(e.foffset,e.finish));const ky=(e,t)=>!Cr(t.dom)&&(Io(e,t)||k(e,t));const Ey=t=>e=>ky(t,e.start)&&ky(t,e.finish);const Sy=e=>e.inline||H.browser.isFirefox();const _y=e=>hv.range(Fe.fromDom(e.startContainer),e.startOffset,Fe.fromDom(e.endContainer),e.endOffset);const Ny=e=>{const t=e.getSelection();const n=!t||t.rangeCount===0?C.none():C.from(t.getRangeAt(0));return n.map(_y)};const Ry=e=>{const t=jo(e);return Ny(t.dom).filter(Ey(e))};const Ay=(e,t)=>C.from(t).filter(Ey(e)).map(xy);const Dy=e=>{const t=document.createRange();try{t.setStart(e.start.dom,e.soffset);t.setEnd(e.finish.dom,e.foffset);return C.some(t)}catch(e){return C.none()}};const Oy=e=>{const t=Sy(e)?Ry(Fe.fromDom(e.getBody())):C.none();e.bookmark=t.isSome()?t:e.bookmark};const Ty=t=>{const e=t.bookmark?t.bookmark:C.none();return e.bind(e=>Ay(Fe.fromDom(t.getBody()),e)).bind(Dy)};const By=t=>{Ty(t).each(e=>t.selection.setRng(e))};const Py=e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1};const Ly={isEditorUIElement:Py};const My=(e,t)=>{if(!q(t)){t=0}return setTimeout(e,t)};const Iy=(e,t)=>{if(!q(t)){t=0}return setInterval(e,t)};const Fy={setEditorTimeout:(e,t,n)=>{return My(()=>{if(!e.removed){t()}},n)},setEditorInterval:(e,t,n)=>{const o=Iy(()=>{if(!e.removed){t()}else{clearInterval(o)}},n);return o}};const Uy=e=>{return e.type==="nodechange"&&e.selectionChange};const zy=(e,t)=>{const n=()=>{t.throttle()};He.DOM.bind(document,"mouseup",n);e.on("remove",()=>{He.DOM.unbind(document,"mouseup",n)})};const jy=(e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})};const Hy=(t,e)=>{jy(t,e);t.on("keyup NodeChange AfterSetSelectionRange",e=>{if(!Uy(e)){Oy(t)}})};const $y=e=>{const t=_l(()=>{Oy(e)},0);e.on("init",()=>{if(e.inline){zy(e,t)}Hy(e,t)});e.on("remove",()=>{t.cancel()})};let Vy;const qy=He.DOM;const Wy=e=>{return ze(e)&&Ly.isEditorUIElement(e)};const Ky=e=>{const t=e.classList;if(t!==undefined){return t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body")}else{return false}};const Gy=(t,e)=>{const n=If(t);const o=qy.getParent(e,e=>{return Wy(e)||(n?t.dom.is(e,n):false)});return o!==null};const Yy=e=>{try{const t=rs(Fe.fromDom(e.getElement()));return yy(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}};const Xy=(o,e)=>{const t=e.editor;$y(t);const n=(e,t)=>{if(km(e)&&e.inline!==true){const n=Fe.fromDom(e.getContainer());t(n,"tox-edit-focus")}};t.on("focusin",()=>{const e=o.focusedEditor;if(Ky(Yy(t))){n(t,xo)}if(e!==t){if(e){e.dispatch("blur",{focusedEditor:t})}o.setActive(t);o.focusedEditor=t;t.dispatch("focus",{blurredEditor:e});t.focus(true)}});t.on("focusout",()=>{Fy.setEditorTimeout(t,()=>{const e=o.focusedEditor;if(!Ky(Yy(t))||e!==t){n(t,Eo)}if(!Gy(t,Yy(t))&&e===t){t.dispatch("blur",{focusedEditor:null});o.focusedEditor=null}})});if(!Vy){Vy=e=>{const n=o.activeEditor;if(n){ds(e).each(e=>{const t=e;if(t.ownerDocument===document){if(t!==document.body&&!Gy(n,t)&&o.focusedEditor===n){n.dispatch("blur",{focusedEditor:null});o.focusedEditor=null}}})}};qy.bind(document,"focusin",Vy)}};const Qy=(e,t)=>{if(e.focusedEditor===t.editor){e.focusedEditor=null}if(!e.activeEditor&&Vy){qy.unbind(document,"focusin",Vy);Vy=null}};const Jy=e=>{e.on("AddEditor",h(Xy,e));e.on("RemoveEditor",h(Qy,e))};const Zy=(t,e)=>t.dom.getParent(e,e=>t.dom.getContentEditable(e)==="true");const eC=e=>e.collapsed?C.from(md(e.startContainer,e.startOffset)).map(Fe.fromDom):C.none();const tC=(t,e)=>eC(e).bind(e=>{if(gi(e)){return C.some(e)}else if(!Io(t,e)){return C.some(t)}else{return C.none()}});const nC=(t,e)=>{tC(Fe.fromDom(t.getBody()),e).bind(e=>{return tp(e.dom)}).fold(()=>{t.selection.normalize()},e=>t.selection.setRng(e.toRange()))};const oC=t=>{if(t.setActive){try{t.setActive()}catch(e){t.focus()}}else{t.focus()}};const sC=e=>vy(e)||Cy(e).isSome();const rC=e=>De(e.iframeElement)&&vy(Fe.fromDom(e.iframeElement));const iC=e=>{const t=e.getBody();return t&&sC(Fe.fromDom(t))};const cC=t=>{const e=rs(Fe.fromDom(t.getElement()));return yy(e).filter(e=>!Ky(e.dom)&&Gy(t,e.dom)).isSome()};const aC=e=>e.inline?iC(e):rC(e);const lC=e=>aC(e)||cC(e);const dC=t=>{const e=t.selection;const n=t.getBody();let o=e.getRng();t.quirks.refreshContentEditable();if(De(t.bookmark)&&!aC(t)){Ty(t).each(e=>{t.selection.setRng(e);o=e})}const s=Zy(t,e.getNode());if(s&&t.dom.isChildOf(s,n)){oC(s);nC(t,o);uC(t);return}if(!t.inline){if(!H.browser.isOpera()){oC(n)}t.getWin().focus()}if(H.browser.isFirefox()||t.inline){oC(n);nC(t,o)}uC(t)};const uC=e=>e.editorManager.setActive(e);const fC=(e,t)=>{if(e.removed){return}if(t){uC(e)}else{dC(e)}};const mC=(e,t,n,o,s)=>{const r=n?t.startContainer:t.endContainer;const i=n?t.startOffset:t.endOffset;return C.from(r).map(Fe.fromDom).map(e=>!o||!t.collapsed?Qo(e,s(e,i)).getOr(e):e).bind(e=>Zn(e)?C.some(e):Ho(e).filter(Zn)).map(e=>e.dom).getOr(e)};const gC=(e,t,n=false)=>mC(e,t,true,n,(e,t)=>Math.min(es(e),t));const pC=(e,t,n=false)=>mC(e,t,false,n,(e,t)=>t>0?t-1:t);const hC=(e,t)=>{const n=e;while(e&&je(e)&&e.length===0){e=t?e.nextSibling:e.previousSibling}return e||n};const bC=(e,t)=>{if(!t){return e}let n=t.startContainer;let o=t.endContainer;const s=t.startOffset;const r=t.endOffset;let i=t.commonAncestorContainer;if(!t.collapsed){if(n===o){if(r-s<2){if(n.hasChildNodes()){i=n.childNodes[s]}}}if(je(n)&&je(o)){if(n.length===s){n=hC(n.nextSibling,true)}else{n=n.parentNode}if(r===0){o=hC(o.previousSibling,false)}else{o=o.parentNode}if(n&&n===o){i=n}}}const c=je(i)?i.parentNode:i;return ze(c)?c:e};const vC=(t,e,n,o)=>{const s=[];const r=t.getRoot();const i=t.getParent(n||gC(r,e,e.collapsed),t.isBlock);const c=t.getParent(o||pC(r,e,e.collapsed),t.isBlock);if(i&&i!==r){s.push(i)}if(i&&c&&i!==c){let e;const a=new vr(i,r);while((e=a.next())&&e!==c){if(t.isBlock(e)){s.push(e)}}}if(c&&i!==c&&c!==r){s.push(c)}return s};const yC=(s,e,r)=>C.from(e).bind(o=>C.from(o.parentNode).map(e=>{const t=s.nodeIndex(o);const n=s.createRng();n.setStart(e,t);n.setEnd(e,t+1);if(r){th(s,n,o,true);th(s,n,o,false)}return n}));const CC=(n,e)=>y(e,e=>{const t=n.dispatch("GetSelectionRange",{range:e});return t.range!==e?t.range:e});const wC=e=>g(e)==="img"?1:Yr(e).fold(()=>Xo(e).length,e=>e.length);const xC=e=>Yr(e).filter(e=>e.trim().length!==0||e.indexOf($r)>-1).isSome();const kC=e=>Jn(e)&&co(e,"contenteditable")==="false";const EC=["img","br"];const SC=e=>{const t=xC(e);return t||m(EC,g(e))||kC(e)};const _C=e=>vs(e,SC);const NC=e=>RC(e,SC);const RC=(e,s)=>{const r=e=>{const n=Xo(e);for(let t=n.length-1;t>=0;t--){const e=n[t];if(s(e)){return C.some(e)}const o=r(e);if(o.isSome()){return o}}return C.none()};return r(e)};const AC="[data-mce-autocompleter]";const DC=(t,e)=>{if(TC(Fe.fromDom(t.getBody())).isNone()){const n=Fe.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Us(n,Fe.fromDom(e.extractContents()));e.insertNode(n.dom);Ho(n).each(e=>e.dom.normalize());NC(n).map(e=>{t.selection.setCursorLocation(e.dom,wC(e))})}};const OC=e=>ws(e,AC);const TC=e=>Cs(e,AC);const BC=(n,e)=>TC(e).each(e=>{const t=n.selection.getBookmark();Vs(e);n.selection.moveToBookmark(t)});const PC={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};const LC=(n,o,e)=>{const t=e?"lastChild":"firstChild";const s=e?"prev":"next";if(n[t]){return n[t]}if(n!==o){let t=n[s];if(t){return t}for(let e=n.parent;e&&e!==o;e=e.parent){t=e[s];if(t){return t}}}return undefined};const MC=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!sc(n)){return false}const o=e.parent;if(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(n)){return false}return true};const IC=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class FC{constructor(e,t){this.name=e;this.type=t;if(t===1){this.attributes=[];this.attributes.map={}}}static create(e,t){const n=new FC(e,PC[e]||1);if(t){Me(t,(e,t)=>{n.attr(t,e)})}return n}replace(e){const t=this;if(e.parent){e.remove()}t.insert(e,t);t.remove();return t}attr(t,n){const o=this;if(!Re(t)){if(De(t)){Me(t,(e,t)=>{o.attr(t,e)})}return o}const s=o.attributes;if(s){if(n!==undefined){if(n===null){if(t in s.map){delete s.map[t];let e=s.length;while(e--){if(s[e].name===t){s.splice(e,1);return o}}}return o}if(t in s.map){let e=s.length;while(e--){if(s[e].name===t){s[e].value=n;break}}}else{s.push({name:t,value:n})}s.map[t]=n;return o}return s.map[t]}return undefined}clone(){const e=this;const t=new FC(e.name,e.type);const n=e.attributes;if(n){const o=[];o.map={};for(let e=0,t=n.length;e<t;e++){const s=n[e];if(s.name!=="id"){o[o.length]={name:s.name,value:s.value};o.map[s.name]=s.value}}t.attributes=o}t.value=e.value;return t}wrap(e){const t=this;if(t.parent){t.parent.insert(e,t);e.append(t)}return t}unwrap(){const n=this;for(let t=n.firstChild;t;){const e=t.next;n.insert(t,n,true);t=e}n.remove()}remove(){const e=this,t=e.parent,n=e.next,o=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;if(n){n.prev=null}}else if(o){o.next=n}if(t.lastChild===e){t.lastChild=o;if(o){o.next=null}}else if(n){n.prev=o}e.parent=e.next=e.prev=null}return e}append(e){const t=this;if(e.parent){e.remove()}const n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else{t.lastChild=t.firstChild=e}e.parent=t;return e}insert(e,t,n){if(e.parent){e.remove()}const o=t.parent||this;if(n){if(t===o.firstChild){o.firstChild=e}else if(t.prev){t.prev.next=e}e.prev=t.prev;e.next=t;t.prev=e}else{if(t===o.lastChild){o.lastChild=e}else if(t.next){t.next.prev=e}e.next=t.next;e.prev=t;t.next=e}e.parent=o;return e}getAll(t){const n=this;const o=[];for(let e=n.firstChild;e;e=LC(e,n)){if(e.name===t){o.push(e)}}return o}children(){const t=this;const n=[];for(let e=t.firstChild;e;e=e.next){n.push(e)}return n}empty(){const t=this;if(t.firstChild){const n=[];for(let e=t.firstChild;e;e=LC(e,t)){n.push(e)}let e=n.length;while(e--){const o=n[e];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}t.firstChild=t.lastChild=null;return t}isEmpty(e,t={},n){var o;const s=this;let r=s.firstChild;if(IC(s)){return false}if(r){do{if(r.type===1){if(r.attr("data-mce-bogus")){continue}if(e[r.name]){return false}if(IC(r)){return false}}if(r.type===8){return false}if(r.type===3&&!MC(r)){return false}if(r.type===3&&r.parent&&t[r.parent.name]&&sc((o=r.value)!==null&&o!==void 0?o:"")){return false}if(n&&n(r)){return false}}while(r=LC(r,s))}return true}walk(e){return LC(this,null,e)}}const UC=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t));const zC=(t,e,n=0)=>{const o=t.toLowerCase();if(o.indexOf("[if ",n)!==-1&&UC(o,n)){const s=o.indexOf("[endif]",n);return o.indexOf(">",s)}else{if(e){const r=o.indexOf(">",n);return r!==-1?r:o.length}else{const i=/--!?>/g;i.lastIndex=n;const e=i.exec(t);return e?e.index+e[0].length:o.length}}};const jC=(e,t,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g;const s=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g;const r=e.getVoidElements();let i=1,c=n;while(i!==0){o.lastIndex=c;while(true){const a=o.exec(t);if(a===null){return c}else if(a[1]==="!"){if(Rt(a[2],"--")){c=zC(t,false,a.index+"!--".length)}else{c=zC(t,true,a.index+1)}break}else{s.lastIndex=o.lastIndex;const l=s.exec(t);if(z(l)||l.index!==o.lastIndex){continue}if(a[1]==="/"){i-=1}else if(!Ie(r,a[2])){i+=1}c=o.lastIndex+l[0].length;break}}}return c};const HC=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")};const $C=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;const o=e.schema;let s=HC(e.getTempAttrs(),t);const r=o.getVoidElements();let i;while(i=n.exec(s)){const c=n.lastIndex;const a=i[0].length;let e;if(r[i[1]]){e=c}else{e=jC(o,s,c)}s=s.substring(0,c-a)+s.substring(e);n.lastIndex=c-a}return _i(s)};const VC=$C;const qC=e=>{const t=hr(e,"[data-mce-bogus]");Le(t,e=>{const t=co(e,"data-mce-bogus");if(t==="all"){Ue(e)}else if(di(e)){Ms(e,Fe.fromText(Hr));Ue(e)}else{Vs(e)}})};const WC=e=>{const t=hr(e,"input");Le(t,e=>{uo(e,"name")})};const KC=(e,t)=>{const n=Yu(e);const o=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\u00a0|<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(o,"")};const GC=(e,t)=>{const n=e.getDoc();const o=rs(Fe.fromDom(e.getBody()));const s=Fe.fromTag("div",n);ro(s,"data-mce-bogus","all");As(s,{position:"fixed",left:"-9999999px",top:"0"});Gs(s,t.innerHTML);qC(s);WC(s);const r=cs(o);Us(r,s);const i=_i(s.dom.innerText);Ue(s);return i};const YC=(e,t,n)=>{let o;if(t.format==="raw"){o=U.trim(VC(e.serializer,n.innerHTML))}else if(t.format==="text"){o=GC(e,n)}else if(t.format==="tree"){o=e.serializer.serialize(n,t)}else{o=KC(e,e.serializer.serialize(n,t))}const s=t.format!=="text"&&!hi(Fe.fromDom(n));return s&&Re(o)?U.trim(o):o};const XC=(t,n)=>C.from(t.getBody()).fold(Be(n.format==="tree"?new FC("body",11):""),e=>YC(t,n,e));const QC=U.makeMap;const JC=e=>{const s=[];e=e||{};const r=e.indent;const i=QC(e.indent_before||"");const c=QC(e.indent_after||"");const a=pa.getEncodeFunc(e.entity_encoding||"raw",e.entities);const l=e.element_format!=="xhtml";return{start:(e,n,t)=>{if(r&&i[e]&&s.length>0){const e=s[s.length-1];if(e.length>0&&e!=="\n"){s.push("\n")}}s.push("<",e);if(n){for(let e=0,t=n.length;e<t;e++){const o=n[e];s.push(" ",o.name,'="',a(o.value,true),'"')}}if(!t||l){s[s.length]=">"}else{s[s.length]=" />"}if(t&&r&&c[e]&&s.length>0){const e=s[s.length-1];if(e.length>0&&e!=="\n"){s.push("\n")}}},end:e=>{let t;s.push("</",e,">");if(r&&c[e]&&s.length>0){t=s[s.length-1];if(t.length>0&&t!=="\n"){s.push("\n")}}},text:(e,t)=>{if(e.length>0){s[s.length]=t?e:a(e)}},cdata:e=>{s.push("<![CDATA[",e,"]]>")},comment:e=>{s.push("\x3c!--",e,"--\x3e")},pi:(e,t)=>{if(t){s.push("<?",e," ",a(t),"?>")}else{s.push("<?",e,"?>")}if(r){s.push("\n")}},doctype:e=>{s.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{s.length=0},getContent:()=>{return s.join("").replace(/\n$/,"")}}};const ZC=(n={},u=Aa())=>{const f=JC(n);n.validate="validate"in n?n.validate:true;const e=e=>{const l=n.validate;const t={3:e=>{var t;f.text((t=e.value)!==null&&t!==void 0?t:"",e.raw)},8:e=>{var t;f.comment((t=e.value)!==null&&t!==void 0?t:"")},7:e=>{f.pi(e.name,e.value)},10:e=>{var t;f.doctype((t=e.value)!==null&&t!==void 0?t:"")},4:e=>{var t;f.cdata((t=e.value)!==null&&t!==void 0?t:"")},11:e=>{let t=e;if(t=t.firstChild){do{d(t)}while(t=t.next)}}};f.reset();const d=o=>{var s;const e=t[o.type];if(!e){const t=o.name;const e=t in u.getVoidElements();let n=o.attributes;if(l&&n&&n.length>1){const r=[];r.map={};const i=u.getElementRule(o.name);if(i){for(let e=0,t=i.attributesOrder.length;e<t;e++){const c=i.attributesOrder[e];if(c in n.map){const a=n.map[c];r.map[c]=a;r.push({name:c,value:a})}}for(let e=0,t=n.length;e<t;e++){const c=n[e].name;if(!(c in r.map)){const a=n.map[c];r.map[c]=a;r.push({name:c,value:a})}}n=r}}f.start(t,n,e);if(!e){let e=o.firstChild;if(e){if((t==="pre"||t==="textarea")&&e.type===3&&((s=e.value)===null||s===void 0?void 0:s[0])==="\n"){f.text("\n",true)}do{d(e)}while(e=e.next)}f.end(t)}}else{e(o)}};if(e.type===1&&!n.inner){d(e)}else if(e.type===3){t[3](e)}else{t[11](e)}return f.getContent()};return{serialize:e}};const e0=new Set;(()=>{const e=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];Le(e,e=>{e0.add(e)})})();const t0=["font","text-decoration","text-emphasis"];const n0=(e,t)=>Ee(e.parseStyle(e.getAttrib(t,"style")));const o0=e=>e0.has(e);const s0=(e,t)=>qe(n0(e,t),e=>!o0(e));const r0=e=>S(e,t=>Pe(t0,e=>Rt(t,e)));const i0=(r,i,c)=>{const e=n0(r,i);const o=n0(r,c);const s=e=>{var t,n;const o=(t=r.getStyle(i,e))!==null&&t!==void 0?t:"";const s=(n=r.getStyle(c,e))!==null&&n!==void 0?n:"";return Pt(o)&&Pt(s)&&o!==s};return Pe(e,t=>{const e=e=>Pe(e,e=>e===t);if(!e(o)&&e(t0)){const n=r0(o);return Pe(n,s)}else{return s(t)}})};const c0=(n,o,s)=>C.from(s.container()).filter(je).exists(e=>{const t=n?0:-1;return o(e.data.charAt(s.offset()+t))});const a0=h(c0,true,Dp);const l0=h(c0,false,Dp);const d0=e=>{const t=e.container();return je(t)&&(t.data.length===0||Si(t.data)&&cb.isBookmarkNode(t.parentNode))};const u0=(t,n)=>e=>pg(t?0:-1,e).filter(n).isSome();const f0=e=>Mr(e)&&Ds(Fe.fromDom(e),"display")==="block";const m0=e=>_(e)&&!Nr(e);const g0=u0(true,f0);const p0=u0(false,f0);const h0=u0(true,zr);const b0=u0(false,zr);const v0=u0(true,Rr);const y0=u0(false,Rr);const C0=u0(true,m0);const w0=u0(false,m0);const x0=e=>e.slice(0,-1);const k0=(e,t,n)=>{if(Io(t,e)){return x0(Vo(e,e=>{return n(e)||k(e,t)}))}else{return[]}};const E0=(e,t)=>k0(e,t,a);const S0=(e,t)=>[e].concat(E0(e,t));const _0=(e,t,n)=>Qg(e,t,n,d0);const N0=(e,t)=>ue(S0(Fe.fromDom(t.container()),e),ci);const R0=(e,n,o)=>_0(e,n.dom,o).forall(t=>N0(n,o).fold(()=>!gg(t,o,n.dom),e=>!gg(t,o,n.dom)&&Io(e,Fe.fromDom(t.container()))));const A0=(t,n,o)=>N0(n,o).fold(()=>_0(t,n.dom,o).forall(e=>!gg(e,o,n.dom)),e=>_0(t,e.dom,o).isNone());const D0=h(A0,false);const O0=h(A0,true);const T0=h(R0,false);const B0=h(R0,true);const P0=e=>Eg(e).exists(di);const L0=(e,t,n)=>{const o=S(S0(Fe.fromDom(n.container()),t),ci);const s=Ce(o).getOr(t);return Yg(e,s.dom,n).filter(P0)};const M0=(e,t)=>Eg(t).exists(di)||L0(true,e,t).isSome();const I0=(e,t)=>Sg(t).exists(di)||L0(false,e,t).isSome();const F0=h(L0,false);const U0=h(L0,true);const z0=e=>M.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd();const j0=(e,t)=>{const n=S(S0(Fe.fromDom(t.container()),e),ci);return Ce(n).getOr(e)};const H0=(e,t)=>{if(z0(t)){return l0(t)}else{return l0(t)||ep(j0(e,t).dom,t).exists(l0)}};const $0=(e,t)=>{if(z0(t)){return a0(t)}else{return a0(t)||Zg(j0(e,t).dom,t).exists(a0)}};const V0=e=>m(["pre","pre-wrap"],e);const q0=e=>Eg(e).bind(e=>ps(e,Zn)).exists(e=>V0(Ds(e,"white-space")));const W0=(e,t)=>ep(e.dom,t).isNone();const K0=(e,t)=>Zg(e.dom,t).isNone();const G0=(e,t)=>W0(e,t)||K0(e,t)||D0(e,t)||O0(e,t)||I0(e,t)||M0(e,t);const Y0=e=>De(e)&&_(e)&&ng(e);const X0=(t,n)=>e=>{return Y0(new vr(e,t)[n]())};const Q0=(e,t)=>{const n=Zg(e.dom,t).getOr(t);const o=X0(e.dom,"next");return t.isAtEnd()&&(o(t.container())||o(n.container()))};const J0=(e,t)=>{const n=ep(e.dom,t).getOr(t);const o=X0(e.dom,"prev");return t.isAtStart()&&(o(t.container())||o(n.container()))};const Z0=(e,t)=>{if(q0(t)){return false}else{return G0(e,t)||H0(e,t)||$0(e,t)}};const ew=(e,t)=>{if(q0(t)){return false}else{return D0(e,t)||T0(e,t)||I0(e,t)||H0(e,t)||J0(e,t)}};const tw=e=>{const t=e.container();const n=e.offset();if(je(t)&&n<t.data.length){return M(t,n+1)}else{return e}};const nw=(e,t)=>{if(q0(t)){return false}else{return O0(e,t)||B0(e,t)||M0(e,t)||$0(e,t)||Q0(e,t)}};const ow=(e,t)=>ew(e,t)||nw(e,tw(t));const sw=(e,t)=>Ap(e.charAt(t));const rw=(e,t)=>Dp(e.charAt(t));const iw=e=>{const t=e.container();return je(t)&&Nt(t.data,$r)};const cw=e=>{const n=e.split("");return y(n,(e,t)=>{if(Ap(e)&&t>0&&t<n.length-1&&Op(n[t-1])&&Op(n[t+1])){return" "}else{return e}}).join("")};const aw=(e,t,n)=>{const o=t.data;const s=M(t,0);if(!n&&sw(o,0)&&!ow(e,s)){t.data=" "+o.slice(1);return true}else if(n&&rw(o,0)&&ew(e,s)){t.data=$r+o.slice(1);return true}else{return false}};const lw=e=>{const t=e.data;const n=cw(t);if(n!==t){e.data=n;return true}else{return false}};const dw=(e,t,n)=>{const o=t.data;const s=M(t,o.length-1);if(!n&&sw(o,o.length-1)&&!ow(e,s)){t.data=o.slice(0,-1)+" ";return true}else if(n&&rw(o,o.length-1)&&nw(e,s)){t.data=o.slice(0,-1)+$r;return true}else{return false}};const uw=(e,t)=>{const n=t.container();if(!je(n)){return C.none()}if(iw(t)){const o=aw(e,n,false)||lw(n)||dw(e,n,false);return Ln(o,t)}else if(ow(e,t)){const o=aw(e,n,true)||dw(e,n,true);return Ln(o,t)}else{return C.none()}};const fw=t=>{const e=Fe.fromDom(t.getBody());if(t.selection.isCollapsed()){uw(e,M.fromRangeStart(t.selection.getRng())).each(e=>{t.selection.setRng(e.toRange())})}};const mw=(e,t,n)=>{if(n===0){return}const o=Fe.fromDom(e);const s=gs(o,ci).getOr(o);const r=e.data.slice(t,t+n);const i=t+n>=e.data.length&&nw(s,M(e,e.data.length));const c=t===0&&ew(s,M(e,0));e.replaceData(t,n,ac(r,4,c,i))};const gw=(e,t)=>{const n=e.data.slice(t);const o=n.length-Tt(n).length;mw(e,t,o)};const pw=(e,t)=>{const n=e.data.slice(0,t);const o=n.length-Bt(n).length;mw(e,t-o,o)};const hw=(e,t,n,o=true)=>{const s=Bt(e.data).length;const r=o?e:t;const i=o?t:e;if(o){r.appendData(i.data)}else{r.insertData(0,i.data)}Ue(Fe.fromDom(i));if(n){gw(r,s)}return r};const bw=(e,t)=>{const n=e.container();const o=e.offset();return!M.isTextPosition(e)&&n===t.parentNode&&o>M.before(t).offset()};const vw=(e,t)=>bw(t,e)?M(t.container(),t.offset()-1):t;const yw=e=>je(e)?M(e,0):M.before(e);const Cw=e=>je(e)?M(e,e.data.length):M.after(e);const ww=e=>{if(Xi(e.previousSibling)){return C.some(Cw(e.previousSibling))}else{return e.previousSibling?np(e.previousSibling):C.none()}};const xw=e=>{if(Xi(e.nextSibling)){return C.some(yw(e.nextSibling))}else{return e.nextSibling?tp(e.nextSibling):C.none()}};const kw=(t,e)=>{return C.from(e.previousSibling?e.previousSibling:e.parentNode).bind(e=>ep(t,M.before(e))).orThunk(()=>Zg(t,M.after(e)))};const Ew=(e,t)=>Zg(e,M.after(t)).orThunk(()=>ep(e,M.before(t)));const Sw=(e,t)=>ww(t).orThunk(()=>xw(t)).orThunk(()=>kw(e,t));const _w=(e,t)=>xw(t).orThunk(()=>ww(t)).orThunk(()=>Ew(e,t));const Nw=(e,t,n)=>e?_w(t,n):Sw(t,n);const Rw=(e,t,n)=>Nw(e,t,n).map(h(vw,n));const Aw=(t,n,e)=>{e.fold(()=>{t.focus()},e=>{t.selection.setRng(e.toRange(),n)})};const Dw=t=>e=>e.dom===t;const Ow=(e,t)=>t&&Ie(e.schema.getBlockElements(),g(t));const Tw=e=>{if(l(e)){const t=Fe.fromHtml('<br data-mce-bogus="1">');$s(e);Us(e,t);return C.some(M.before(t.dom))}else{return C.none()}};const Bw=(e,t,i)=>{const n=Wo(e).filter(eo);const o=Ko(e).filter(eo);Ue(e);return Pn(n,o,t,(e,t,n)=>{const o=e.dom,s=t.dom;const r=o.data.length;hw(o,s,i);return n.container()===s?M(o,r):n}).orThunk(()=>{if(i){n.each(e=>pw(e.dom,e.dom.length));o.each(e=>gw(e.dom,0))}return t})};const Pw=(e,t)=>Ie(e.schema.getTextInlineElements(),g(t));const Lw=(t,n,e,o=true)=>{const s=Rw(n,t.getBody(),e.dom);const r=gs(e,h(Ow,t),Dw(t.getBody()));const i=Bw(e,s,Pw(t,e));if(t.dom.isEmpty(t.getBody())){t.setContent("");t.selection.setCursorLocation()}else{r.bind(Tw).fold(()=>{if(o){Aw(t,n,i)}},e=>{if(o){Aw(t,n,C.some(e))}})}};const Mw=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;const Iw=e=>Mw.test(e);const Fw=(e,t)=>Bo(Fe.fromDom(t),xf(e))&&!Tc(e.schema,t)&&e.dom.isEditable(t);const Uw=e=>{var t;return He.DOM.getStyle(e,"direction",true)==="rtl"||Iw((t=e.textContent)!==null&&t!==void 0?t:"")};const zw=(e,t,n)=>S(He.DOM.getParents(n.container(),"*",t),e);const jw=(e,t,n)=>{const o=zw(e,t,n);return C.from(o[o.length-1])};const Hw=(e,t,n)=>{const o=mg(t,e);const s=mg(n,e);return De(o)&&o===s};const $w=e=>Pi(e)||Li(e);const Vw=(e,t)=>{const n=t.container(),o=t.offset();if(e){if(Di(n)){if(je(n.nextSibling)){return M(n.nextSibling,0)}else{return M.after(n)}}else{return Pi(t)?M(n,o+1):t}}else{if(Di(n)){if(je(n.previousSibling)){return M(n.previousSibling,n.previousSibling.data.length)}else{return M.before(n)}}else{return Li(t)?M(n,o-1):t}}};const qw=h(Vw,true);const Ww=h(Vw,false);const Kw=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,true);e.getDoc().execCommand(t);e.off("beforeinput input",n)};const Gw=e=>{e.execCommand("delete")};const Yw=e=>Kw(e,"Delete");const Xw=e=>Kw(e,"ForwardDelete");const Qw=t=>e=>On(Ho(e),t,k);const Jw=e=>ui(e)||mi(e);const Zw=(e,t)=>{if(Io(e,t)){return ps(t,Jw,Qw(e))}else{return C.none()}};const ex=(e,t=true)=>{if(e.dom.isEmpty(e.getBody())){e.setContent("",{no_selection:!t})}};const tx=(r,i,c)=>Bn(tp(c),np(c),(e,t)=>{const n=Vw(true,e);const o=Vw(false,t);const s=Vw(false,i);if(r){return Zg(c,s).exists(e=>e.isEqual(o)&&i.isEqual(n))}else{return ep(c,s).exists(e=>e.isEqual(n)&&i.isEqual(o))}}).getOr(true);const nx=e=>{const t=Qn(e)?Wo(e):Zo(e);return t.bind(nx).orThunk(()=>C.some(e))};const ox=(e,t,n,o=true)=>{var s;t.deleteContents();const r=nx(n).getOr(n);const i=Fe.fromDom((s=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&s!==void 0?s:n.dom);if(i.dom===e.getBody()){ex(e,o)}else if(l(i)){xi(i);if(o){e.selection.setCursorLocation(i.dom,0)}}if(!k(n,i)){const c=On(Ho(i),n)?[]:qo(i);Le(c.concat(Xo(n)),e=>{if(!k(e,i)&&!Io(e,i)&&l(e)){Ue(e)}})}};const sx=t=>e=>k(t,e);const rx=e=>hr(e,"td,th");const ix=(e,t)=>{const n=e=>Yp(Fe.fromDom(e),t);const o=n(e.startContainer);const s=n(e.endContainer);const r=o.isSome();const i=s.isSome();const c=Bn(o,s,k).getOr(false);const a=!c&&r&&i;return{startTable:o,endTable:s,isStartInTable:r,isEndInTable:i,isSameTable:c,isMultiTable:a}};const cx=(e,t)=>({start:e,end:t});const ax=(e,t,n)=>({rng:e,table:t,cells:n});const lx=Eu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]);const dx=(e,t)=>ws(Fe.fromDom(e),"td,th",t);const ux=e=>!k(e.start,e.end);const fx=(e,n)=>Yp(e.start,n).bind(t=>Yp(e.end,n).bind(e=>Ln(k(t,e),t)));const mx=(e,t)=>!ux(e)&&fx(e,t).exists(e=>{const t=e.dom.rows;return t.length===1&&t[0].cells.length===1});const gx=(e,t)=>{const n=dx(e.startContainer,t);const o=dx(e.endContainer,t);return Bn(n,o,cx)};const px=e=>t=>Yp(t,e).bind(e=>we(rx(e)).map(e=>cx(t,e)));const hx=e=>t=>Yp(t,e).bind(e=>Ce(rx(e)).map(e=>cx(e,t)));const bx=e=>t=>fx(t,e).map(e=>ax(t,e,rx(e)));const vx=(e,t,n,o)=>{if(n.collapsed||!e.forall(ux)){return C.none()}else if(t.isSameTable){const s=e.bind(bx(o));return C.some({start:s,end:s})}else{const r=dx(n.startContainer,o);const i=dx(n.endContainer,o);const c=r.bind(px(o)).bind(bx(o));const a=i.bind(hx(o)).bind(bx(o));return C.some({start:c,end:a})}};const yx=(e,t)=>fe(e,e=>k(e,t));const Cx=n=>Bn(yx(n.cells,n.rng.start),yx(n.cells,n.rng.end),(e,t)=>n.cells.slice(e,t+1));const wx=(e,t,n)=>e.exists(e=>mx(e,n)&&eh(e.start,t));const xx=(e,t)=>{const{startTable:n,endTable:o}=t;const s=e.cloneRange();n.each(e=>s.setStartAfter(e.dom));o.each(e=>s.setEndBefore(e.dom));return s};const kx=(e,s,r,t)=>vx(e,s,r,t).bind(({start:e,end:t})=>e.or(t)).bind(e=>{const{isSameTable:t}=s;const n=Cx(e).getOr([]);if(t&&e.cells.length===n.length){return C.some(lx.fullTable(e.table))}else if(n.length>0){if(t){return C.some(lx.partialTable(n,C.none()))}else{const o=xx(r,s);return C.some(lx.partialTable(n,C.some({...s,rng:o})))}}else{return C.none()}});const Ex=(e,r,i,t)=>vx(e,r,i,t).bind(({start:e,end:t})=>{const n=e.bind(Cx).getOr([]);const o=t.bind(Cx).getOr([]);if(n.length>0&&o.length>0){const s=xx(i,r);return C.some(lx.multiTable(n,o,s))}else{return C.none()}});const Sx=(e,t)=>{const n=sx(e);const o=gx(t,n);const s=ix(t,n);if(wx(o,t,n)){return o.map(e=>lx.singleCellTable(t,e.start))}else if(s.isMultiTable){return Ex(o,s,t,n)}else{return kx(o,s,t,n)}};const _x=e=>Le(e,e=>{uo(e,"contenteditable");xi(e)});const Nx=(e,t)=>C.from(e.dom.getParent(t,e.dom.isBlock)).map(Fe.fromDom);const Rx=(t,n,e)=>{e.each(e=>{if(n){Ue(e)}else{xi(e);t.selection.setCursorLocation(e.dom,0)}})};const Ax=(e,t,n,o)=>{const s=n.cloneRange();if(o){s.setStart(n.startContainer,n.startOffset);s.setEndAfter(t.dom.lastChild)}else{s.setStartBefore(t.dom.firstChild);s.setEnd(n.endContainer,n.endOffset)}Bx(e,s,t,false).each(e=>e())};const Dx=e=>{const t=Gp(e);const n=Fe.fromDom(e.selection.getNode());if(Fr(n.dom)&&l(n)){e.selection.setCursorLocation(n.dom,0)}else{e.selection.collapse(true)}if(t.length>1&&Pe(t,e=>k(e,n))){ro(n,"data-mce-selected","1")}};const Ox=(r,i,t)=>C.some(()=>{const s=r.selection.getRng();const e=t.bind(({rng:e,isStartInTable:t})=>{const n=Nx(r,t?e.endContainer:e.startContainer);e.deleteContents();Rx(r,t,n.filter(l));const o=t?i[0]:i[i.length-1];Ax(r,o,s,t);if(!l(o)){return C.some(t?i.slice(1):i.slice(0,-1))}else{return C.none()}}).getOr(i);_x(e);Dx(r)});const Tx=(r,i,c,a)=>C.some(()=>{const e=r.selection.getRng();const t=i[0];const n=c[c.length-1];Ax(r,t,e,true);Ax(r,n,e,false);const o=l(t)?i:i.slice(1);const s=l(n)?c:c.slice(0,-1);_x(o.concat(s));a.deleteContents();Dx(r)});const Bx=(e,t,n,o=true)=>C.some(()=>{ox(e,t,n,o)});const Px=(e,t)=>C.some(()=>Lw(e,false,t));const Lx=(t,e,n)=>Sx(e,n).bind(e=>e.fold(h(Bx,t),h(Px,t),h(Ox,t),h(Tx,t)));const Mx=(e,t)=>Hx(e,t);const Ix=(t,e,n,o)=>zx(e,o).fold(()=>Lx(t,e,n),e=>Mx(t,e));const Fx=(e,t,n)=>{const o=Fe.fromDom(e.getBody());const s=e.selection.getRng();return n.length!==0?Ox(e,n,C.none()):Ix(e,o,s,t)};const Ux=(e,t)=>ue(S0(t,e),pi);const zx=(e,t)=>ue(S0(t,e),oo("caption"));const jx=(e,t,n,o,s)=>Xg(n,e.getBody(),s).bind(e=>Ux(t,Fe.fromDom(e.getNode())).bind(e=>k(e,o)?C.none():C.some(Te)));const Hx=(e,t)=>C.some(()=>{xi(t);e.selection.setCursorLocation(t.dom,0)});const $x=(e,n,o,s)=>tp(e.dom).bind(t=>np(e.dom).map(e=>n?o.isEqual(t)&&s.isEqual(e):o.isEqual(e)&&s.isEqual(t))).getOr(true);const Vx=(e,t)=>Hx(e,t);const qx=(e,t,n)=>zx(e,Fe.fromDom(n.getNode())).fold(()=>C.some(Te),e=>Ln(!k(e,t),Te));const Wx=(t,n,o,s,r)=>Xg(o,t.getBody(),r).fold(()=>C.some(Te),e=>$x(s,o,r,e)?Vx(t,s):qx(n,s,e));const Kx=(t,n,o,e)=>{const s=M.fromRangeStart(t.selection.getRng());return Ux(o,e).bind(e=>l(e)?Hx(t,e):jx(t,o,n,e,s))};const Gx=(e,t,n,o)=>{const s=M.fromRangeStart(e.selection.getRng());return l(o)?Hx(e,o):Wx(e,n,t,o,s)};const Yx=(e,t)=>e?v0(t):y0(t);const Xx=(e,t)=>{const n=M.fromRangeStart(e.selection.getRng());return Yx(t,n)||Yg(t,e.getBody(),n).exists(e=>Yx(t,e))};const Qx=(t,n,e)=>{const o=Fe.fromDom(t.getBody());return zx(o,e).fold(()=>Kx(t,n,o,e).orThunk(()=>Ln(Xx(t,n),Te)),e=>Gx(t,n,o,e))};const Jx=(e,t)=>{const n=Fe.fromDom(e.selection.getStart(true));const o=Gp(e);return e.selection.isCollapsed()&&o.length===0?Qx(e,t,n):Fx(e,n,o)};const Zx=(e,t)=>{let n=t;while(n&&n!==e){if(Ir(n)||_(n)){return n}n=n.parentNode}return null};const ek=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"];const tk=U.each;const nk=e=>{const s=e.dom;const n=new Set(e.serializer.getTempAttrs());const t=(e,t)=>{if(e.nodeName!==t.nodeName||e.nodeType!==t.nodeType){return false}const n=n=>{const o={};tk(s.getAttribs(n),e=>{const t=e.nodeName.toLowerCase();if(t!=="style"&&!r(t)){o[t]=s.getAttrib(n,t)}});return o};const o=(n,o)=>{for(const t in n){if(Ie(n,t)){const e=o[t];if(V(e)){return false}if(n[t]!==e){return false}delete o[t]}}for(const e in o){if(Ie(o,e)){return false}}return true};if(ze(e)&&ze(t)){if(!o(n(e),n(t))){return false}if(!o(s.parseStyle(s.getAttrib(e,"style")),s.parseStyle(s.getAttrib(t,"style")))){return false}}return!Np(e)&&!Np(t)};const r=t=>Pe(ek,e=>Rt(t,e))||n.has(t);return{compare:t,isAttributeInternal:r}};const ok=(e,t)=>{let n=e;while(n=n.walk()){t(n)}};const sk=(n,o,s,r)=>{const i=s.name;for(let e=0,t=n.length;e<t;e++){const t=n[e];if(t.name===i){const e=r.nodes[i];if(e){e.nodes.push(s)}else{r.nodes[i]={filter:t,nodes:[s]}}}}if(s.attributes){for(let e=0,t=o.length;e<t;e++){const t=o[e];const c=t.name;if(c in s.attributes.map){const e=r.attributes[c];if(e){e.nodes.push(s)}else{r.attributes[c]={filter:t,nodes:[s]}}}}}};const rk=(t,n,e)=>{const o={nodes:{},attributes:{}};if(e.firstChild){ok(e,e=>{sk(t,n,e,o)})}return o};const ik=(e,i)=>{const t=(e,r)=>{Me(e,o=>{const s=We(o.nodes);Le(o.filter.callbacks,e=>{for(let e=s.length-1;e>=0;e--){const t=s[e];const n=r?t.attr(o.filter.name)!==undefined:t.name===o.filter.name;if(!n||Ae(t.parent)){s.splice(e,1)}}if(s.length>0){e(s,o.filter.name,i)}})})};t(e.nodes,false);t(e.attributes,true)};const ck=(e,t,n,o={})=>{const s=rk(e,t,n);ik(s,o)};const ak=(e,t,n)=>{if(e.insert&&t(n)){const o=new FC("br",1);o.attr("data-mce-bogus","1");n.empty().append(o)}else{n.empty().append(new FC("#text",3)).value=$r}};const lk=e=>{var t;return dk(e,"#text")&&((t=e===null||e===void 0?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===$r};const dk=(e,t)=>{const n=e===null||e===void 0?void 0:e.firstChild;return De(n)&&n===e.lastChild&&n.name===t};const uk=(e,t)=>{const n=e.getElementRule(t.name);return(n===null||n===void 0?void 0:n.paddEmpty)===true};const fk=(t,e,n,o)=>o.isEmpty(e,n,e=>uk(t,e));const mk=(e,t)=>De(e)&&(t(e)||e.name==="br");const gk=t=>{let n;for(let e=t;e;e=e.parent){const o=e.attr("contenteditable");if(o==="false"){break}else if(o==="true"){n=e}}return C.from(n)};const pk=(t,n,o=t.parent)=>{if(n.getSpecialElements()[t.name]){t.empty().remove()}else{const e=t.children();for(const s of e){if(o&&!n.isValidChild(o.name,s.name)){pk(s,n,o)}}t.unwrap()}};const hk=(r,i,t,c=Te)=>{const a=i.getTextBlockElements();const l=i.getNonEmptyElements();const d=i.getWhitespaceElements();const n=U.makeMap("tr,td,th,tbody,thead,tfoot,table");const u=new Set;const f=e=>e!==t&&!n[e.name];for(let e=0;e<r.length;e++){const m=r[e];let t;let n;let o;if(!m.parent||u.has(m)){continue}if(a[m.name]&&m.parent.name==="li"){let e=m.next;while(e){if(a[e.name]){e.name="li";u.add(e);m.parent.insert(e,m.parent)}else{break}e=e.next}m.unwrap();continue}const s=[m];for(t=m.parent;t&&!i.isValidChild(t.name,m.name)&&f(t);t=t.parent){s.push(t)}if(t&&s.length>1){if(i.isValidChild(t.name,m.name)){s.reverse();n=s[0].clone();c(n);let e=n;for(let t=0;t<s.length-1;t++){if(i.isValidChild(e.name,s[t].name)&&t>0){o=s[t].clone();c(o);e.append(o)}else{o=e}for(let e=s[t].firstChild;e&&e!==s[t+1];){const g=e.next;o.append(e);e=g}e=o}if(!fk(i,l,d,n)){t.insert(n,s[0],true);t.insert(m,n)}else{t.insert(m,s[0],true)}t=s[0];if(fk(i,l,d,t)||dk(t,"br")){t.empty().remove()}}else{pk(m,i)}}else if(m.parent){if(m.name==="li"){let e=m.prev;if(e&&(e.name==="ul"||e.name==="ol")){e.append(m);continue}e=m.next;if(e&&(e.name==="ul"||e.name==="ol")&&e.firstChild){e.insert(m,e.firstChild,true);continue}const p=new FC("ul",1);c(p);m.wrap(p);continue}if(i.isValidChild(m.parent.name,"div")&&i.isValidChild("div",m.name)){const p=new FC("div",1);c(p);m.wrap(p)}else{pk(m,i)}}}};const bk=(e,t)=>{let n=e;while(n){if(n.name===t){return true}n=n.parent}return false};const vk=(e,t,n=t.parent)=>{if(n&&e.children[t.name]&&!e.isValidChild(n.name,t.name)){return true}else if(n&&t.name==="a"&&bk(n,"a")){return true}else{return false}};const yk=(e,t,n,o)=>{const s=document.createRange();s.setStart(e,t);s.setEnd(n,o);return s};const Ck=t=>{const n=M.fromRangeStart(t);const o=M.fromRangeEnd(t);const s=t.commonAncestorContainer;return Yg(false,s,o).map(e=>{if(!gg(n,o,s)&&gg(n,e,s)){return yk(n.container(),n.offset(),e.container(),e.offset())}else{return t}}).getOr(t)};const wk=e=>e.collapsed?e:Ck(e);const xk=e=>{return De(e.firstChild)&&e.firstChild===e.lastChild};const kk=e=>{return e.name==="br"||e.value===$r};const Ek=(e,t)=>{const n=e.getBlockElements();return n[t.name]&&xk(t)&&kk(t.firstChild)};const Sk=(e,t)=>{const n=e.getNonEmptyElements();return De(t)&&(t.isEmpty(n)||Ek(e,t))};const _k=(e,t)=>{let n=t.firstChild;let o=t.lastChild;if(n&&n.name==="meta"){n=n.next}if(o&&o.attr("id")==="mce_marker"){o=o.prev}if(Sk(e,o)){o=o===null||o===void 0?void 0:o.prev}if(!n||n!==o){return false}return n.name==="ul"||n.name==="ol"};const Nk=e=>{var t,n;const o=e.firstChild;const s=e.lastChild;if(o&&o.nodeName==="META"){(t=o.parentNode)===null||t===void 0?void 0:t.removeChild(o)}if(s&&s.id==="mce_marker"){(n=s.parentNode)===null||n===void 0?void 0:n.removeChild(s)}return e};const Rk=(e,t,n)=>{const o=t.serialize(n);const s=e.createFragment(o);return Nk(s)};const Ak=e=>{var t;return S((t=e===null||e===void 0?void 0:e.childNodes)!==null&&t!==void 0?t:[],e=>{return e.nodeName==="LI"})};const Dk=e=>{return e.data===$r||E(e)};const Ok=e=>{return De(e===null||e===void 0?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Dk(e.firstChild)};const Tk=e=>{return!e.firstChild||Ok(e)};const Bk=e=>{return e.length>0&&Tk(e[e.length-1])?e.slice(0,-1):e};const Pk=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null};const Lk=(e,t)=>{return!!Pk(e,t)};const Mk=(e,t)=>{const n=t.cloneRange();const o=t.cloneRange();n.setStartBefore(e);o.setEndAfter(e);return[n.cloneContents(),o.cloneContents()]};const Ik=(e,t)=>{const n=M.before(e);const o=jg(t);const s=o.next(n);return s?s.toRange():null};const Fk=(e,t)=>{const n=M.after(e);const o=jg(t);const s=o.prev(n);return s?s.toRange():null};const Uk=(t,e,n,o)=>{const s=Mk(t,o);const r=t.parentNode;if(r){r.insertBefore(s[0],t);U.each(e,e=>{r.insertBefore(e,t)});r.insertBefore(s[1],t);r.removeChild(t)}return Fk(e[e.length-1],n)};const zk=(t,e,n)=>{const o=t.parentNode;if(o){U.each(e,e=>{o.insertBefore(e,t)})}return Ik(t,n)};const jk=(e,t,n,o)=>{o.insertAfter(t.reverse(),e);return Fk(t[0],n)};const Hk=(e,r,i,t)=>{const n=Rk(r,e,t);const c=Pk(r,i.startContainer);const o=Bk(Ak(n.firstChild));const a=1,s=2;const l=r.getRoot();const d=e=>{const t=M.fromRangeStart(i);const n=jg(r.getRoot());const o=e===a?n.prev(t):n.next(t);const s=o===null||o===void 0?void 0:o.getNode();return s?Pk(r,s)!==c:true};if(!c){return null}else if(d(a)){return zk(c,o,l)}else if(d(s)){return jk(c,o,l,r)}else{return Uk(c,o,l,i)}};const $k=["pre"];const Vk=(t,e,n,o)=>{var s;const r=e.firstChild;const i=e.lastChild;const c=i.attr("data-mce-type")==="bookmark"?i.prev:i;const a=r===c;const l=m($k,r.name);if(a&&l){const e=r.attr("contenteditable")!=="false";const d=((s=t.getParent(n,t.isBlock))===null||s===void 0?void 0:s.nodeName.toLowerCase())===r.name;const u=C.from(Zx(o,n)).forall(Ir);return e&&d&&u}else{return false}};const qk=Fr;const Wk=(e,t,n)=>{if(De(n)){const o=e.getParent(t.endContainer,qk);return n===o&&eh(Fe.fromDom(n),t)}else{return false}};const Kk=(e,t,n)=>{var o;if(n.getAttribute("data-mce-bogus")==="all"){(o=n.parentNode)===null||o===void 0?void 0:o.insertBefore(e.dom.createFragment(t),n)}else{const s=n.firstChild;const r=n.lastChild;if(!s||s===r&&s.nodeName==="BR"){e.dom.setHTML(n,t)}else{e.selection.setContent(t,{no_events:true})}}};const Gk=(e,t)=>{C.from(e.getParent(t,"td,th")).map(Fe.fromDom).each(ki)};const Yk=(e,t)=>{const o=e.schema.getTextInlineElements();const s=e.dom;if(t){const r=e.getBody();const i=nk(e);U.each(s.select("*[data-mce-fragment]"),t=>{const e=De(o[t.nodeName.toLowerCase()]);if(e&&s0(s,t)){for(let e=t.parentElement;De(e)&&e!==r;e=e.parentElement){const n=i0(s,t,e);if(n){break}if(i.compare(e,t)){s.remove(t,true);break}}}})}};const Xk=e=>{let t=e;while(t=t.walk()){if(t.type===1){t.attr("data-mce-fragment","1")}}};const Qk=e=>{U.each(e.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")})};const Jk=e=>{return!!e.getAttribute("data-mce-fragment")};const Zk=(e,t)=>{return De(t)&&!e.schema.getVoidElements()[t.nodeName]};const eE=(o,e)=>{var t,n,s;let r;const i=o.dom;const c=o.selection;if(!e){return}c.scrollIntoView(e);const a=Zx(o.getBody(),e);if(a&&i.getContentEditable(a)==="false"){i.remove(e);c.select(a);return}let l=i.createRng();const d=e.previousSibling;if(je(d)){l.setStart(d,(n=(t=d.nodeValue)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0);const m=e.nextSibling;if(je(m)){d.appendData(m.data);(s=m.parentNode)===null||s===void 0?void 0:s.removeChild(m)}}else{l.setStartBefore(e);l.setEndBefore(e)}const u=e=>{let t=M.fromRangeStart(e);const n=jg(o.getBody());t=n.next(t);return t===null||t===void 0?void 0:t.toRange()};const f=i.getParent(e,i.isBlock);i.remove(e);if(f&&i.isEmpty(f)){$s(Fe.fromDom(f));l.setStart(f,0);l.setEnd(f,0);if(!qk(f)&&!Jk(f)&&(r=u(l))){l=r;i.remove(f)}else{i.add(f,i.create("br",{"data-mce-bogus":"1"}))}}c.setRng(l)};const tE=e=>{const t=e.dom;const n=wk(e.selection.getRng());e.selection.setRng(n);const o=t.getParent(n.startContainer,qk);if(Wk(t,n,o)){Bx(e,n,Fe.fromDom(o))}else if(n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&je(n.startContainer.childNodes[n.startOffset])){n.deleteContents()}else{e.getDoc().execCommand("Delete",false)}};const nE=t=>{for(let e=t;e;e=e.walk()){if(e.attr("id")==="mce_marker"){return C.some(e)}}return C.none()};const oE=(o,s,e)=>{var t,r;const i=o.selection;const c=o.dom;const a=o.parser;const n=e.merge;const l=ZC({validate:true},o.schema);const d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';if(s.indexOf("{$caret}")===-1){s+="{$caret}"}s=s.replace(/\{\$caret\}/,d);let u=i.getRng();const f=u.startContainer;const m=o.getBody();if(f===m&&i.isCollapsed()){if(c.isBlock(m.firstChild)&&Zk(o,m.firstChild)&&c.isEmpty(m.firstChild)){u=c.createRng();u.setStart(m.firstChild,0);u.setEnd(m.firstChild,0);i.setRng(u)}}if(!i.isCollapsed()){tE(o)}const g=i.getNode();const p={context:g.nodeName.toLowerCase(),data:e.data,insert:true};const h=a.parse(s,p);if(e.paste===true&&_k(o.schema,h)&&Lk(c,g)){u=Hk(l,c,i.getRng(),h);if(u){i.setRng(u)}return s}if(e.paste===true&&Vk(c,h,g,o.getBody())){(t=h.firstChild)===null||t===void 0?void 0:t.unwrap()}Xk(h);let b=h.lastChild;if(b&&b.attr("id")==="mce_marker"){const v=b;for(b=b.prev;b;b=b.walk(true)){if(b.type===3||!c.isBlock(b.name)){if(b.parent&&o.schema.isValidChild(b.parent.name,"span")){b.parent.insert(v,b,b.name==="br")}break}}}o._selectionOverrides.showBlockCaretContainer(g);if(!p.invalid){s=l.serialize(h);Kk(o,s,g)}else{o.selection.setContent(d);let e=i.getNode();let t;const y=o.getBody();if(Pr(e)){e=t=y}else{t=e}while(t&&t!==y){e=t;t=t.parentNode}s=e===y?y.innerHTML:c.getOuterHTML(e);const C=a.parse(s);const w=nE(C);const x=w.bind(gk).getOr(C);w.each(e=>e.replace(h));const k=h.children();const n=(r=h.parent)!==null&&r!==void 0?r:C;h.unwrap();const E=S(k,e=>vk(o.schema,e,n));hk(E,o.schema,x);ck(a.getNodeFilters(),a.getAttributeFilters(),C);s=l.serialize(C);if(e===y){c.setHTML(y,s)}else{c.setOuterHTML(e,s)}}Yk(o,n);eE(o,c.get("mce_marker"));Qk(o.getBody());Gk(c,i.getStart());Rc(o.schema,o.getBody(),i.getStart());return s};const sE=e=>e instanceof FC;const rE=o=>{if(aC(o)){tp(o.getBody()).each(e=>{const t=e.getNode();const n=Rr(t)?tp(t).getOr(e):e;o.selection.setRng(n.toRange())})}};const iE=(e,t,n)=>{e.dom.setHTML(e.getBody(),t);if(n!==true){rE(e)}};const cE=(e,t,n,o)=>{if(n?.length===0||/^\s+$/.test(n)){const s='<br data-mce-bogus="1">';if(t.nodeName==="TABLE"){n="<tr><td>"+s+"</td></tr>"}else if(/^(UL|OL)$/.test(t.nodeName)){n="<li>"+s+"</li>"}const r=Yu(e);if(e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())){n=s;n=e.dom.createHTML(r,Xu(e),n)}else if(!n){n=s}iE(e,n,o.no_selection);return{content:n,html:n}}else{if(o.format!=="raw"){n=ZC({validate:false},e.schema).serialize(e.parser.parse(n,{isRootContent:true,insert:true}))}const i=hi(Fe.fromDom(t))?n:U.trim(n);iE(e,i,o.no_selection);return{content:i,html:i}}};const aE=(e,t,n,o)=>{ck(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const s=ZC({validate:false},e.schema).serialize(n);const r=hi(Fe.fromDom(t))?s:U.trim(s);iE(e,r,o.no_selection);return{content:n,html:r}};const lE=(t,n,o)=>{return C.from(t.getBody()).map(e=>{if(sE(n)){return aE(t,e,n,o)}else{return cE(t,e,n,o)}}).getOr({content:n,html:sE(o.content)?"":o.content})};const dE=(e,t,n)=>gs(e,t,n).isSome();const uE=(e,t)=>hs(e,t).isSome();const fE=e=>Oe(e)?e:a;const mE=(e,t,n)=>{let o=e.dom;const s=fE(n);while(o.parentNode){o=o.parentNode;const r=Fe.fromDom(o);const i=t(r);if(i.isSome()){return i}else if(s(r)){break}}return C.none()};const gE=(e,t,n)=>{const o=t(e);const s=fE(n);return o.orThunk(()=>s(e)?C.none():mE(e,t,s))};const pE=yh;const hE=(t,n,e)=>{const o=t.formatter.get(e);if(o){for(let e=0;e<o.length;e++){const s=o[e];if(Dh(s)&&s.inherit===false&&t.dom.is(n,s.selector)){return true}}}return false};const bE=(t,e,n,o,s)=>{const r=t.dom.getRoot();if(e===r){return false}const i=t.dom.getParent(e,e=>{if(hE(t,e,n)){return true}return e.parentNode===r||!!CE(t,e,n,o,true)});return!!CE(t,i,n,o,s)};const vE=(e,t,n)=>{if(Oh(n)&&pE(t,n.inline)){return true}if(Nh(n)&&pE(t,n.block)){return true}if(Dh(n)){return ze(t)&&e.is(t,n.selector)}return false};const yE=(t,n,o,e,s,r)=>{const i=o[e];const c=e==="attributes";if(Oe(o.onmatch)){return o.onmatch(n,o,e)}if(i){if(!nt(i)){for(const a in i){if(Ie(i,a)){const e=c?t.getAttrib(n,a):wh(t,n,a);const l=vh(i[a],r);const d=Ae(e)||Lt(e);if(d&&Ae(l)){continue}if(s&&d&&!o.exact){return false}if((!s||o.exact)&&!pE(e,Ch(l,a))){return false}}}}else{for(let e=0;e<i.length;e++){if(c?t.getAttrib(n,i[e]):wh(t,n,i[e])){return true}}}}return true};const CE=(t,n,e,o,s)=>{const r=t.formatter.get(e);const i=t.dom;if(r&&ze(n)){for(let e=0;e<r.length;e++){const c=r[e];if(vE(t.dom,n,c)&&yE(i,n,c,"attributes",s,o)&&yE(i,n,c,"styles",s,o)){const a=c.classes;if(a){for(let e=0;e<a.length;e++){if(!t.dom.hasClass(n,vh(a[e],o))){return}}}return c}}}return undefined};const wE=(e,t,n,o,s)=>{if(o){return bE(e,o,t,n,s)}o=e.selection.getNode();if(bE(e,o,t,n,s)){return true}const r=e.selection.getStart();if(r!==o){if(bE(e,r,t,n,s)){return true}}return false};const xE=(o,s,r)=>{const i=[];const c={};const e=o.selection.getStart();o.dom.getParent(e,n=>{for(let t=0;t<s.length;t++){const e=s[t];if(!c[e]&&CE(o,n,e,r)){c[e]=true;i.push(e)}}},o.dom.getRoot());return i};const kE=(n,o)=>{const t=e=>k(e,Fe.fromDom(n.getBody()));const s=(e,t)=>CE(n,e.dom,t)?C.some(t):C.none();return C.from(n.selection.getStart(true)).bind(e=>gE(Fe.fromDom(e),t=>xe(o,e=>s(t,e)),t)).getOrNull()};const EE=(e,t)=>{const n=e.formatter.get(t);const o=e.dom;if(n){const s=e.selection.getStart();const t=kh(o,s);for(let e=n.length-1;e>=0;e--){const r=n[e];if(!Dh(r)){return true}for(let e=t.length-1;e>=0;e--){if(o.is(t[e],r.selector)){return true}}}}return false};const SE=(o,s,e)=>le(e,(e,t)=>{const n=Sh(o,t);if(o.formatter.matchNode(s,t,{},n)){return e.concat([t])}else{return e}},[]);const _E=Ei;const NE=(e,t)=>{return e.importNode(t,true)};const RE=e=>{const t=[];let n=e;while(n){if(je(n)&&n.data!==_E||n.childNodes.length>1){return[]}if(ze(n)){t.push(n)}n=n.firstChild}return t};const AE=e=>{return RE(e).length>0};const DE=e=>{if(e){const t=new vr(e,e);for(let e=t.current();e;e=t.next()){if(je(e)){return e}}}return null};const OE=e=>{const t=Fe.fromTag("span");io(t,{id:op,"data-mce-bogus":"1","data-mce-type":"format-caret"});if(e){Us(t,Fe.fromText(_E))}return t};const TE=e=>{const t=DE(e);if(t&&t.data.charAt(0)===_E){t.deleteData(0,1)}return t};const BE=(e,t,n=true)=>{const o=e.dom,s=e.selection;if(AE(t)){Lw(e,false,Fe.fromDom(t),n)}else{const r=s.getRng();const i=o.getParent(t,o.isBlock);const c=r.startContainer;const a=r.startOffset;const l=r.endContainer;const d=r.endOffset;const u=TE(t);o.remove(t,true);if(c===u&&a>0){r.setStart(u,a-1)}if(l===u&&d>0){r.setEnd(u,d-1)}if(i&&o.isEmpty(i)){xi(Fe.fromDom(i))}s.setRng(r)}};const PE=(e,t,n=true)=>{const o=e.dom,s=e.selection;if(!t){t=rp(e.getBody(),s.getStart());if(!t){while(t=o.get(op)){BE(e,t,false)}}}else{BE(e,t,n)}};const LE=(e,t,n)=>{var o,s;const r=e.dom;const i=r.getParent(n,h(fh,e.schema));if(i&&r.isEmpty(i)){(o=n.parentNode)===null||o===void 0?void 0:o.replaceChild(t,n)}else{Ci(Fe.fromDom(n));if(r.isEmpty(n)){(s=n.parentNode)===null||s===void 0?void 0:s.replaceChild(t,n)}else{r.insertAfter(t,n)}}};const ME=(e,t)=>{e.appendChild(t);return t};const IE=(e,t)=>{var n;const o=ae(e,(e,t)=>{return ME(e,t.cloneNode(false))},t);const s=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return ME(o,s.createTextNode(_E))};const FE=(t,e,n,o,s,r)=>{const i=t.formatter;const c=t.dom;const a=S(Ee(i.get()),e=>e!==o&&!Nt(e,"removeformat"));const l=SE(t,n,a);const d=S(l,e=>!_h(t,e,o));if(d.length>0){const u=n.cloneNode(false);c.add(e,u);i.remove(o,s,u,r);c.remove(u);return C.some(u)}else{return C.none()}};const UE=(t,n,o)=>{let s;const r=t.selection;const i=t.formatter.get(n);if(!i){return}const c=r.getRng();let a=c.startOffset;const e=c.startContainer;const l=e.nodeValue;s=rp(t.getBody(),r.getStart());const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&a>0&&a<l.length&&d.test(l.charAt(a))&&d.test(l.charAt(a-1))){const u=r.getBookmark();c.collapse(true);let e=Yh(t.dom,c,i);e=Iv(e);t.formatter.apply(n,o,e);r.moveToBookmark(u)}else{let e=s?DE(s):null;if(!s||(e===null||e===void 0?void 0:e.data)!==_E){s=NE(t.getDoc(),OE(true).dom);e=s.firstChild;c.insertNode(s);a=1;t.formatter.apply(n,o,s)}else{t.formatter.apply(n,o,s)}r.setCursorLocation(e,a)}};const zE=(t,n,o,s)=>{const r=t.dom;const i=t.selection;let e=false;const c=t.formatter.get(n);if(!c){return}const a=i.getRng();const l=a.startContainer;const d=a.startOffset;let u=l;if(je(l)){if(d!==l.data.length){e=true}u=u.parentNode}const f=[];let m;while(u){if(CE(t,u,n,o,s)){m=u;break}if(u.nextSibling){e=true}f.push(u);u=u.parentNode}if(!m){return}if(e){const g=i.getBookmark();a.collapse(true);let e=Yh(r,a,c,true);e=Iv(e);t.formatter.remove(n,o,e,s);i.moveToBookmark(g)}else{const p=rp(t.getBody(),m);const h=OE(false).dom;LE(t,h,p!==null&&p!==void 0?p:m);const b=FE(t,h,m,n,o,s);const v=IE(f.concat(b.toArray()),h);if(p){BE(t,p,false)}i.setCursorLocation(v,1);if(r.isEmpty(m)){r.remove(m)}}};const jE=(e,t)=>{const n=e.selection,o=e.getBody();PE(e,null,false);if((t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===_E){PE(e,rp(o,n.getStart()))}if(t===37||t===39){PE(e,rp(o,n.getStart()))}};const HE=t=>{t.on("mouseup keydown",e=>{jE(t,e.keyCode)})};const $E=e=>{const t=OE(false);const n=IE(e,t.dom);return{caretContainer:t,caretPosition:M(n,0)}};const VE=(e,t)=>{const{caretContainer:n,caretPosition:o}=$E(t);Ms(Fe.fromDom(e),n);Ue(Fe.fromDom(e));return o};const qE=(e,t)=>{const{caretContainer:n,caretPosition:o}=$E(t);e.selection.getRng().insertNode(n.dom);return o};const WE=(e,t)=>{const n=e.schema.getTextInlineElements();return Ie(n,g(t))&&!sp(t.dom)&&!_r(t.dom)};const KE=e=>{return sp(e.dom)&&AE(e.dom)};const GE={};const YE=xr(["pre"]);const XE=(e,t)=>{const n=GE[e];if(!n){GE[e]=[]}GE[e].push(t)};const QE=(e,t)=>{if(Ie(GE,e)){Le(GE[e],e=>{e(t)})}};XE("pre",t=>{const e=t.selection.getRng();const n=n=>e=>{const t=e.previousSibling;return YE(t)&&m(n,t)};const o=(e,t)=>{const n=Fe.fromDom(t);const o=Uo(n).dom;Ue(n);Hs(Fe.fromDom(e),[Fe.fromTag("br",o),Fe.fromTag("br",o),...Xo(n)])};if(!e.collapsed){const e=t.selection.getSelectedBlocks();const s=S(S(e,YE),n(e));Le(s,e=>{o(e.previousSibling,e)})}});const JE=["fontWeight","fontStyle","color","fontSize","fontFamily"];const ZE=e=>I(e.styles)&&Pe(Ee(e.styles),e=>m(JE,e));const eS=e=>ue(e,e=>Oh(e)&&e.inline==="span"&&ZE(e));const tS=(e,t)=>{const n=e.get(t);return Ve(n)?eS(n):C.none()};const nS=(e,t)=>ep(t,M.fromRangeStart(e)).isNone();const oS=(e,t)=>{return Zg(t,M.fromRangeEnd(e)).exists(e=>!E(e.getNode())||Zg(t,e).isSome())===false};const sS=t=>e=>jr(e)&&t.isEditable(e);const rS=e=>{const n=e.getSelectedBlocks();const o=e.getRng();if(e.isCollapsed()){return[]}if(n.length===1){return nS(o,n[0])&&oS(o,n[0])?n:[]}else{const e=Ce(n).filter(e=>nS(o,e)).toArray();const t=we(n).filter(e=>oS(o,e)).toArray();const s=n.slice(1,-1);return e.concat(s).concat(t)}};const iS=e=>S(rS(e),sS(e.dom));const cS=e=>S(e.getSelectedBlocks(),sS(e.dom));const aS=U.each;const lS=e=>ze(e)&&!Np(e)&&!sp(e)&&!_r(e);const dS=(t,n)=>{for(let e=t;e;e=e[n]){if(je(e)&&Pt(e.data)){return t}if(ze(e)&&!Np(e)){return e}}return t};const uS=(e,o,s)=>{const r=nk(e);const t=ze(o)&&ah(o);const n=ze(s)&&ah(s);if(t&&n){const t=dS(o,"previousSibling");const n=dS(s,"nextSibling");if(r.compare(t,n)){for(let e=t.nextSibling;e&&e!==n;){const i=e;e=e.nextSibling;t.appendChild(i)}e.dom.remove(n);U.each(U.grep(n.childNodes),e=>{t.appendChild(e)});return t}}return s};const fS=(e,t,n,o)=>{var s;if(o&&t.merge_siblings!==false){const r=(s=uS(e,uh(o),o))!==null&&s!==void 0?s:o;uS(e,r,uh(r,true))}};const mS=(o,e,t)=>{if(e.clear_child_styles){const n=e.links?"*:not(a)":"*";aS(o.select(n,t),n=>{if(lS(n)&&ah(n)){aS(e.styles,(e,t)=>{o.setStyle(n,t,"")})}})}};const gS=(e,t,n)=>{aS(e.childNodes,e=>{if(lS(e)){if(t(e)){n(e)}if(e.hasChildNodes()){gS(e,t,n)}}})};const pS=(e,t)=>{if(t.nodeName==="SPAN"&&e.getAttribs(t).length===0){e.remove(t,true)}};const hS=(t,n)=>e=>!!(e&&wh(t,e,n));const bS=(t,n,o)=>e=>{t.setStyle(e,n,o);if(e.getAttribute("style")===""){e.removeAttribute("style")}pS(t,e)};const vS=Eu.generate([{keep:[]},{rename:["name"]},{removed:[]}]);const yS=/^(src|href|style)$/;const CS=U.each;const wS=yh;const xS=e=>/^(TR|TH|TD)$/.test(e.nodeName);const kS=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n);const ES=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"];let s=t[n?"startOffset":"endOffset"];if(ze(o)){const r=o.childNodes.length-1;if(!n&&s){s--}o=o.childNodes[s>r?r:s]}if(je(o)&&n&&s>=o.data.length){o=new vr(o,e.getBody()).next()||o}if(je(o)&&!n&&s===0){o=new vr(o,e.getBody()).prev()||o}return o};const SS=(e,t)=>{const n=t?"firstChild":"lastChild";const o=e[n];if(xS(e)&&o){if(e.nodeName==="TR"){return o[n]||o}else{return o}}return e};const _S=(e,t,n,o)=>{var s;const r=e.create(n,o);(s=t.parentNode)===null||s===void 0?void 0:s.insertBefore(r,t);r.appendChild(t);return r};const NS=(e,t,n,o,s)=>{const r=Fe.fromDom(t);const i=Fe.fromDom(e.create(o,s));const c=n?Yo(r):Go(r);Hs(i,c);if(n){Ms(r,i);Fs(i,r)}else{Is(r,i);Us(i,r)}return i.dom};const RS=(e,t)=>t.links&&e.nodeName==="A";const AS=(t,e,n)=>{const o=e.parentNode;let s;const r=t.dom;const i=Yu(t);if(Nh(n)){if(o===r.getRoot()){if(!n.list_block||!wS(e,n.list_block)){Le(We(e.childNodes),e=>{if(mh(t,i,e.nodeName.toLowerCase())){if(!s){s=_S(r,e,i);r.setAttribs(s,Xu(t))}else{s.appendChild(e)}}else{s=null}})}}}if(Th(n)&&!wS(n.inline,e)){return}r.remove(e,true)};const DS=(e,t,n)=>{if(q(e)){return{name:t,value:null}}else{return{name:e,value:vh(t,n)}}};const OS=(e,t)=>{if(e.getAttrib(t,"style")===""){t.removeAttribute("style");t.removeAttribute("data-mce-style")}};const TS=(r,i,c,a,l)=>{let d=false;CS(c.styles,(e,t)=>{const{name:n,value:o}=DS(t,e,a);const s=Ch(o,n);if(c.remove_similar||z(o)||!ze(l)||wS(wh(r,l,n),s)){r.setStyle(i,n,"")}d=true});if(d){OS(r,i)}};const BS=(n,e,o)=>{if(e==="removeformat"){Le(cS(n.selection),t=>{Le(JE,e=>n.dom.setStyle(t,e,""));OS(n.dom,t)})}else{tS(n.formatter,e).each(t=>{Le(cS(n.selection),e=>TS(n.dom,e,t,o,null))})}};const PS=(e,r,i,t,c)=>{const a=e.dom;const n=nk(e);const o=e.schema;if(Oh(r)&&Dc(o,r.inline)&&Tc(o,t)&&t.parentElement===e.getBody()){AS(e,t,r);return vS.removed()}if(!r.ceFalseOverride&&t&&a.getContentEditableParent(t)==="false"){return vS.keep()}if(t&&!vE(a,t,r)&&!RS(t,r)){return vS.keep()}const l=t;const s=r.preserve_attributes;if(Oh(r)&&r.remove==="all"&&Ve(s)){const d=S(a.getAttribs(l),e=>m(s,e.name.toLowerCase()));a.removeAllAttribs(l);Le(d,e=>a.setAttrib(l,e.name,e.value));if(d.length>0){return vS.rename("span")}}if(r.remove!=="all"){TS(a,l,r,i,c);CS(r.attributes,(e,t)=>{const{name:n,value:o}=DS(t,e,i);if(r.remove_similar||z(o)||!ze(c)||wS(a.getAttrib(c,n),o)){if(n==="class"){const s=a.getAttrib(l,n);if(s){let t="";Le(s.split(/\s+/),e=>{if(/mce\-\w+/.test(e)){t+=(t?" ":"")+e}});if(t){a.setAttrib(l,n,t);return}}}if(yS.test(n)){l.removeAttribute("data-mce-"+n)}if(n==="style"&&xr(["li"])(l)&&a.getStyle(l,"list-style-type")==="none"){l.removeAttribute(n);a.setStyle(l,"list-style-type","none");return}if(n==="class"){l.removeAttribute("className")}l.removeAttribute(n)}});CS(r.classes,e=>{e=vh(e,i);if(!ze(c)||a.hasClass(c,e)){a.removeClass(l,e)}});const u=a.getAttribs(l);for(let e=0;e<u.length;e++){const f=u[e].nodeName;if(!n.isAttributeInternal(f)){return vS.keep()}}}if(r.remove!=="none"){AS(e,l,r);return vS.removed()}return vS.keep()};const LS=(t,e,n,o,s)=>PS(t,e,n,o,s).fold(a,e=>{t.dom.rename(o,e);return true},f);const MS=(n,e,o,s,r)=>{let i;if(e.parentNode){Le(kh(n.dom,e.parentNode).reverse(),e=>{if(!i&&ze(e)&&e.id!=="_start"&&e.id!=="_end"){const t=CE(n,e,o,s,r);if(t&&t.split!==false){i=e}}})}return i};const IS=(n,e,t,o)=>PS(n,e,t,o,o).fold(Be(o),e=>{const t=n.dom.createFragment();t.appendChild(o);return n.dom.rename(o,e)},Be(null));const FS=(n,o,e,t,s,r,i,c)=>{var a,l;let d;let u;const f=n.dom;if(e){const m=e.parentNode;for(let e=t.parentNode;e&&e!==m;e=e.parentNode){let t=f.clone(e,false);for(let e=0;e<o.length;e++){t=IS(n,o[e],c,t);if(t===null){break}}if(t){if(d){t.appendChild(d)}if(!u){u=t}d=t}}if(r&&(!i.mixed||!f.isBlock(e))){t=(a=f.split(e,t))!==null&&a!==void 0?a:t}if(d&&u){(l=s.parentNode)===null||l===void 0?void 0:l.insertBefore(d,s);u.appendChild(s);if(Oh(i)){fS(n,i,c,d)}}}return t};const US=(i,n,o,e,s)=>{const c=i.formatter.get(n);const a=c[0];const l=i.dom;const t=i.selection;const d=e=>{const t=MS(i,e,n,o,s);return FS(i,c,t,e,e,true,a,o)};const r=e=>Np(e)&&ze(e)&&(e.id==="_start"||e.id==="_end");const u=t=>Pe(c,e=>LS(i,e,o,t,t));const f=t=>{const n=We(t.childNodes);const e=u(t);const o=e||Pe(c,e=>vE(l,t,e));const s=t.parentNode;if(!o&&De(s)&&Bh(a)){u(s)}if(a.deep){if(n.length){for(let e=0;e<n.length;e++){f(n[e])}}}const r=["underline","line-through","overline"];Le(r,e=>{if(ze(t)&&i.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&xh(l,t.parentNode)===e){LS(i,{deep:false,exact:true,inline:"span",styles:{textDecoration:e}},undefined,t)}})};const m=t=>{const n=l.get(t?"_start":"_end");if(n){let e=n[t?"firstChild":"lastChild"];if(r(e)){e=e[t?"firstChild":"lastChild"]}if(je(e)&&e.data.length===0){e=t?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling}l.remove(n,true);return e}else{return null}};const g=e=>{let t;let n;let o=Yh(l,e,c,e.collapsed);if(a.split){o=Iv(o);t=ES(i,o,true);n=ES(i,o);if(t!==n){t=SS(t,true);n=SS(n,false);if(kS(l,t,n)){const r=C.from(t.firstChild).getOr(t);d(NS(l,r,true,"span",{id:"_start","data-mce-type":"bookmark"}));m(true);return}if(kS(l,n,t)){const r=C.from(n.lastChild).getOr(n);d(NS(l,r,false,"span",{id:"_end","data-mce-type":"bookmark"}));m(false);return}t=_S(l,t,"span",{id:"_start","data-mce-type":"bookmark"});n=_S(l,n,"span",{id:"_end","data-mce-type":"bookmark"});const s=l.createRng();s.setStartAfter(t);s.setEndBefore(n);Xh(l,s,e=>{Le(e,e=>{if(!Np(e)&&!Np(e.parentNode)){d(e)}})});d(t);d(n);t=m(true);n=m()}else{t=n=d(t)}o.startContainer=t.parentNode?t.parentNode:t;o.startOffset=l.nodeIndex(t);o.endContainer=n.parentNode?n.parentNode:n;o.endOffset=l.nodeIndex(n)+1}Xh(l,o,e=>{Le(e,f)})};if(e){if(rh(e)){const p=l.createRng();p.setStartBefore(e);p.setEndAfter(e);g(p)}else{g(e)}xb(i,n,e,o);return}if(!t.isCollapsed()||!Oh(a)||Gp(i).length){lh(i,()=>oh(i,g),e=>Oh(a)&&wE(i,n,o,e));i.nodeChanged()}else{zE(i,n,o,s)}BS(i,n,o);xb(i,n,e,o)};const zS=U.each;const jS=(n,e,t,o)=>{const s=e=>{if(ze(e)&&ze(e.parentNode)&&ah(e)){const t=xh(n,e.parentNode);if(n.getStyle(e,"color")&&t){n.setStyle(e,"text-decoration",t)}else if(n.getStyle(e,"text-decoration")===t){n.setStyle(e,"text-decoration",null)}}};if(e.styles&&(e.styles.color||e.styles.textDecoration)){U.walk(o,s,"childNodes");s(o)}};const HS=(e,t,n,o)=>{if(t.styles&&t.styles.backgroundColor){const s=hS(e,"fontSize");gS(o,e=>s(e)&&ah(e),bS(e,"backgroundColor",vh(t.styles.backgroundColor,n)))}};const $S=(e,t,n,o)=>{if(Oh(t)&&(t.inline==="sub"||t.inline==="sup")){const s=hS(e,"fontSize");gS(o,e=>s(e)&&ah(e),bS(e,"fontSize",""));const r=S(e.select(t.inline==="sup"?"sub":"sup",o),ah);e.remove(r,true)}};const VS=(n,e,o,s)=>{zS(e,t=>{if(Oh(t)){zS(n.dom.select(t.inline,s),e=>{if(lS(e)){LS(n,t,o,e,t.exact?e:null)}})}mS(n.dom,t,s)})};const qS=(t,n,o,s,r)=>{const e=r.parentNode;if(CE(t,e,o,s)){if(LS(t,n,s,r)){return}}if(n.merge_with_parents&&e){t.dom.getParent(e,e=>{if(CE(t,e,o,s)){LS(t,n,s,r);return true}else{return false}})}};const WS=U.each;const KS=(e,t,n,o)=>{if(Lf(e)&&Oh(t)&&n.parentNode){const s=_a(e.schema);const r=uE(Fe.fromDom(n),e=>sp(e.dom));return Ze(s,o)&&l(Fe.fromDom(n.parentNode),false)&&!r}else{return false}};const GS=(n,o,e,s)=>{WS(e.styles,(e,t)=>{n.setStyle(o,t,vh(e,s))});if(e.styles){const t=n.getAttrib(o,"style");if(t){n.setAttrib(o,"data-mce-style",t)}}};const YS=(y,s,r,t)=>{const C=y.formatter.get(s);const w=C[0];const o=!t&&y.selection.isCollapsed();const i=y.dom;const e=y.selection;const x=(n,e=w)=>{if(Oe(e.onformat)){e.onformat(n,e,r,t)}GS(i,n,e,r);WS(e.attributes,(e,t)=>{i.setAttrib(n,t,vh(e,r))});WS(e.classes,e=>{const t=vh(e,r);if(!i.hasClass(n,t)){i.addClass(n,t)}})};const k=(e,t)=>{let n=false;WS(e,e=>{if(!Dh(e)){return false}if(i.getContentEditable(t)==="false"&&!e.ceFalseOverride){return true}if(De(e.collapsed)&&e.collapsed!==o){return true}if(i.is(t,e.selector)&&!sp(t)){x(t,e);n=true;return false}return true});return n};const n=e=>{if(Re(e)){const t=i.create(e);x(t);return t}else{return null}};const c=(u,e,l)=>{const f=[];let m=true;const g=w.inline||w.block;const p=n(g);const h=e=>Rh(w)&&CE(y,e,s,r);const b=(e,t,n)=>{const o=Ah(w)&&fh(y.schema,e)&&mh(y,t,g);return n&&o};const v=(e,t,n,o)=>{const s=e.nodeName.toLowerCase();const r=mh(y,g,s)&&mh(y,t,g);const i=!l&&je(e)&&Si(e.data);const c=sp(e);const a=!Oh(w)||!u.isBlock(e);return(n||o)&&r&&!i&&!c&&a};Xh(u,e,e=>{let l;const d=t=>{let e=false;let n=m;let o=false;const s=t.parentNode;const r=s.nodeName.toLowerCase();const i=u.getContentEditable(t);if(De(i)){n=m;m=i==="true";e=true;o=bh(y,t)}const c=m&&!e;if(E(t)&&!KS(y,w,t,r)){l=null;if(Nh(w)){u.remove(t)}return}if(h(t)){l=null;return}if(b(t,r,c)){const a=u.rename(t,g);x(a);f.push(a);l=null;return}if(Dh(w)){let e=k(C,t);if(!e&&De(s)&&Bh(w)){e=k(C,s)}if(!Oh(w)||e){l=null;return}}if(De(p)&&v(t,r,c,o)){if(!l){l=u.clone(p,false);s.insertBefore(l,t);f.push(l)}if(o&&e){m=n}l.appendChild(t)}else{l=null;Le(We(t.childNodes),d);if(e){m=n}l=null}};Le(e,d)});if(w.links===true){Le(f,e=>{const t=e=>{if(e.nodeName==="A"){x(e,w)}Le(We(e.childNodes),t)};t(e)})}Le(f,e=>{const t=e=>{let t=0;Le(e.childNodes,e=>{if(!ph(e)&&!Np(e)){t++}});return t};const n=n=>{const e=ue(n.childNodes,ih).filter(e=>u.getContentEditable(e)!=="false"&&vE(u,e,w));return e.map(e=>{const t=u.clone(e,false);x(t);u.replace(t,n,true);u.remove(e,true);return t}).getOr(n)};const o=t(e);if((f.length>1||!u.isBlock(e))&&o===0){u.remove(e,true);return}if(Oh(w)||Nh(w)&&w.wrapper){if(!w.exact&&o===1){e=n(e)}VS(y,C,r,e);qS(y,w,s,r,e);HS(u,w,r,e);jS(u,w,r,e);$S(u,w,r,e);fS(y,w,r,e)}})};const a=rh(t)?t:e.getNode();if(i.getContentEditable(a)==="false"&&!bh(y,a)){t=a;k(C,t);wb(y,s,t,r);return}if(w){if(t){if(rh(t)){if(!k(C,t)){const l=i.createRng();l.setStartBefore(t);l.setEndAfter(t);c(i,Yh(i,l,C),true)}}else{c(i,t,true)}}else{if(!o||!Oh(w)||Gp(y).length){e.setRng(wk(e.getRng()));lh(y,()=>{oh(y,(e,t)=>{const n=t?e:Yh(i,e,C);c(i,n,false)})},f);y.nodeChanged()}else{UE(y,s,r)}tS(y.formatter,s).each(t=>{Le(iS(y.selection),e=>GS(i,e,t,r))})}QE(s,y)}wb(y,s,t,r)};const XS=e=>Ie(e,"vars");const QS=(n,o)=>{n.set({});o.on("NodeChange",e=>{t_(o,e.element,n.get())});o.on("FormatApply FormatRemove",e=>{const t=C.from(e.node).map(e=>rh(e)?e:e.startContainer).bind(e=>ze(e)?C.some(e):C.from(e.parentElement)).getOrThunk(()=>JS(o));t_(o,t,n.get())})};const JS=e=>e.selection.getStart();const ZS=(n,e,o,s,r)=>{const t=e=>{const t=n.formatter.matchNode(e,o,r!==null&&r!==void 0?r:{},s);return!V(t)};const i=e=>{if(hE(n,e,o)){return true}else{if(!s){return De(n.formatter.matchNode(e,o,r,true))}else{return false}}};return de(e,t,i)};const e_=(e,t)=>{const n=t!==null&&t!==void 0?t:JS(e);return S(kh(e.dom,n),e=>ze(e)&&!_r(e))};const t_=(r,i,e)=>{const c=e_(r,i);Me(e,(e,s)=>{const t=e=>{const t=ZS(r,c,s,e.similar,XS(e)?e.vars:undefined);const n=t.isSome();if(e.state.get()!==n){e.state.set(n);const o=t.getOr(i);if(XS(e)){e.callback(n,{node:o,format:s,parents:c})}else{Le(e.callbacks,e=>e(n,{node:o,format:s,parents:c}))}}};Le([e.withSimilar,e.withoutSimilar],t);Le(e.withVars,t)})};const n_=(s,e,t,r,i,c)=>{const a=e.get();Le(t.split(","),t=>{const e=p(a,t).getOrThunk(()=>{const e={withSimilar:{state:al(false),similar:true,callbacks:[]},withoutSimilar:{state:al(false),similar:false,callbacks:[]},withVars:[]};a[t]=e;return e});const n=()=>{const e=e_(s);return ZS(s,e,t,i,c).isSome()};if(V(c)){const o=i?e.withSimilar:e.withoutSimilar;o.callbacks.push(r);if(o.callbacks.length===1){o.state.set(n())}}else{e.withVars.push({state:al(n()),similar:i,vars:c,callback:r})}});e.set(a)};const o_=(e,t,n)=>{const o=e.get();Le(t.split(","),t=>p(o,t).each(e=>{o[t]={withSimilar:{...e.withSimilar,callbacks:S(e.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...e.withoutSimilar,callbacks:S(e.withoutSimilar.callbacks,e=>e!==n)},withVars:S(e.withVars,e=>e.callback!==n)}}));e.set(o)};const s_=(e,t,n,o,s,r)=>{n_(e,t,n,o,s,r);return{unbind:()=>o_(t,n,o)}};const r_=(e,t,n,o)=>{const s=e.formatter.get(t);if(s){if(wE(e,t,n,o)&&(!("toggle"in s[0])||s[0].toggle)){US(e,t,n,o)}else{YS(e,t,n,o)}}};const i_=U.explode;const c_=()=>{const s={};const e=(e,t)=>{Le(i_(e),e=>{if(!Ie(s,e)){s[e]={name:e,callbacks:[]}}s[e].callbacks.push(t)})};const t=()=>Je(s);const n=(e,o)=>{Le(i_(e),t=>{if(Ie(s,t)){if(De(o)){const e=s[t];const n=S(e.callbacks,e=>e!==o);if(n.length>0){e.callbacks=n}else{delete s[t]}}else{delete s[t]}}})};return{addFilter:e,getFilters:t,removeFilter:n}};const a_=(t,e)=>{Le(e,e=>{t.attr(e,null)})};const l_=(e,r,i)=>{e.addNodeFilter("font",e=>{Le(e,e=>{const t=r.parse(e.attr("style"));const n=e.attr("color");const o=e.attr("face");const s=e.attr("size");if(n){t.color=n}if(o){t["font-family"]=o}if(s){It(s).each(e=>{t["font-size"]=i[e-1]})}e.name="span";e.attr("style",r.serialize(t));a_(e,["color","face","size"])})})};const d_=(e,t,o)=>{e.addNodeFilter("strike",e=>{const n=t.type!=="html4";Le(e,e=>{if(n){e.name="s"}else{const t=o.parse(e.attr("style"));t["text-decoration"]="line-through";e.name="span";e.attr("style",o.serialize(t))}})})};const u_=(e,t,n)=>{var o;const s=Da();if(t.convert_fonts_to_spans){l_(e,s,U.explode((o=t.font_size_legacy_values)!==null&&o!==void 0?o:""))}d_(e,n,s)};const f_=(e,t,n)=>{if(t.inline_styles){u_(e,t,n)}};const m_=e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`));const g_=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""};const p_=e=>{const[t,...n]=e.split(",");const o=n.join(",");const s=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(s){const r=s[2]===";base64";const i=r?g_(o):decodeURIComponent(o);return C.some({type:s[1],data:i,base64Encoded:r})}else{return C.none()}};const h_=(e,t,n=true)=>{let o=t;if(n){try{o=atob(t)}catch(e){return C.none()}}const s=new Uint8Array(o.length);for(let e=0;e<s.length;e++){s[e]=o.charCodeAt(e)}return C.some(new Blob([s],{type:e}))};const b_=n=>{return new Promise((e,t)=>{p_(n).bind(({type:e,data:t,base64Encoded:n})=>h_(e,t,n)).fold(()=>t("Invalid data URI"),e)})};const v_=e=>{if(Rt(e,"blob:")){return m_(e)}else if(Rt(e,"data:")){return b_(e)}else{return Promise.reject("Unknown URI format")}};const y_=o=>{return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>{e(n.result)};n.onerror=()=>{var e;t((e=n.error)===null||e===void 0?void 0:e.message)};n.readAsDataURL(o)})};let C_=0;const w_=e=>{return(e||"blobid")+C_++};const x_=(e,s,r)=>{return p_(e).bind(({data:e,type:t,base64Encoded:n})=>{if(s&&!n){return C.none()}else{const o=n?e:btoa(e);return r(o,t)}})};const k_=(e,t,n)=>{const o=e.create(w_(),t,n);e.add(o);return o};const E_=(n,e,t=false)=>{return x_(e,t,(t,e)=>C.from(n.getByData(t,e)).orThunk(()=>h_(e,t).map(e=>k_(n,e,t))))};const S_=(n,e)=>{const o=()=>Promise.reject("Invalid data URI");if(Rt(e,"blob:")){const t=n.getByUri(e);if(De(t)){return Promise.resolve(t)}else{return v_(e).then(t=>{return y_(t).then(e=>{return x_(e,false,e=>{return C.some(k_(n,t,e))}).getOrThunk(o)})})}}else if(Rt(e,"data:")){return E_(n,e).fold(o,e=>Promise.resolve(e))}else{return Promise.reject("Unknown image data format")}};const __=e=>De(e.attr("data-mce-bogus"));const N_=e=>e.attr("src")===H.transparentSrc||De(e.attr("data-mce-placeholder"));const R_=(e,t)=>{const{blob_cache:n}=t;if(n){const o=t=>{const e=t.attr("src");if(N_(t)||__(t)||Ae(e)){return}E_(n,e,true).each(e=>{t.attr("src",e.blobUri())})};e.addAttributeFilter("src",e=>Le(e,o))}};const A_=(e,r)=>{const f=e.schema;if(r.remove_trailing_brs){e.addNodeFilter("br",(o,e,s)=>{const r=U.extend({},f.getBlockElements());const i=f.getNonEmptyElements();const c=f.getWhitespaceElements();r.body=1;const a=e=>e.name in r&&Lc(f,e);for(let e=0,t=o.length;e<t;e++){let t=o[e];let n=t.parent;if(n&&r[n.name]&&t===n.lastChild){let e=t.prev;while(e){const l=e.name;if(l!=="span"||e.attr("data-mce-type")!=="bookmark"){if(l==="br"){t=null}break}e=e.prev}if(t){t.remove();if(fk(f,i,c,n)){const d=f.getElementRule(n.name);if(d){if(d.removeEmpty){n.remove()}else if(d.paddEmpty){ak(s,a,n)}}}}}else{let e=t;while(n&&n.firstChild===e&&n.lastChild===e){e=n;if(r[n.name]){break}n=n.parent}if(e===n){const u=new FC("#text",3);u.value=$r;t.replace(u)}}}})}e.addAttributeFilter("href",e=>{let t=e.length;const n=e=>{const t=e.split(" ").filter(e=>e.length>0);return t.concat(["noopener"]).sort().join(" ")};const o=e=>{const t=e?U.trim(e):"";if(!/\b(noopener)\b/g.test(t)){return n(t)}else{return t}};if(!r.allow_unsafe_link_target){while(t--){const s=e[t];if(s.name==="a"&&s.attr("target")==="_blank"){s.attr("rel",o(s.attr("rel")))}}}});if(!r.allow_html_in_named_anchor){e.addAttributeFilter("id,name",e=>{let t=e.length,n,o,s,r;while(t--){r=e[t];if(r.name==="a"&&r.firstChild&&!r.attr("href")){s=r.parent;n=r.lastChild;while(n&&s){o=n.prev;s.insert(n,r);n=o}}}})}if(r.fix_list_elements){e.addNodeFilter("ul,ol",e=>{let t=e.length,n,o;while(t--){n=e[t];o=n.parent;if(o&&(o.name==="ul"||o.name==="ol")){if(n.prev&&n.prev.name==="li"){n.prev.append(n)}else{const s=new FC("li",1);s.attr("style","list-style-type: none");n.wrap(s)}}}})}const a=f.getValidClasses();if(r.validate&&a){e.addAttributeFilter("class",e=>{var t;let n=e.length;while(n--){const s=e[n];const r=(t=s.attr("class"))!==null&&t!==void 0?t:"";const i=U.explode(r," ");let o="";for(let n=0;n<i.length;n++){const c=i[n];let e=false;let t=a["*"];if(t&&t[c]){e=true}t=a[s.name];if(!e&&t&&t[c]){e=true}if(e){if(o){o+=" "}o+=c}}if(!o.length){o=null}s.attr("class",o)}})}R_(e,r)};function D_(e){"@babel/helpers - typeof";return D_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D_(e)}function O_(e,t){O_=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return O_(e,t)}function T_(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function B_(e,t,n){if(T_()){B_=Reflect.construct}else{B_=function e(t,n,o){var s=[null];s.push.apply(s,n);var r=Function.bind.apply(t,s);var i=new r;if(o)O_(i,o.prototype);return i}}return B_.apply(null,arguments)}function P_(e){return L_(e)||M_(e)||I_(e)||U_()}function L_(e){if(Array.isArray(e))return F_(e)}function M_(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I_(e,t){if(!e)return;if(typeof e==="string")return F_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F_(e,t)}function F_(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function U_(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var z_=Object.hasOwnProperty,j_=Object.setPrototypeOf,H_=Object.isFrozen,$_=Object.getPrototypeOf,V_=Object.getOwnPropertyDescriptor;var q_=Object.freeze,W_=Object.seal,K_=Object.create;var G_=typeof Reflect!=="undefined"&&Reflect,Y_=G_.apply,X_=G_.construct;if(!Y_){Y_=function e(t,n,o){return t.apply(n,o)}}if(!q_){q_=function e(t){return t}}if(!W_){W_=function e(t){return t}}if(!X_){X_=function e(t,n){return B_(t,P_(n))}}var Q_=cN(Array.prototype.forEach);var J_=cN(Array.prototype.pop);var Z_=cN(Array.prototype.push);var eN=cN(String.prototype.toLowerCase);var tN=cN(String.prototype.match);var nN=cN(String.prototype.replace);var oN=cN(String.prototype.indexOf);var sN=cN(String.prototype.trim);var rN=cN(RegExp.prototype.test);var iN=aN(TypeError);function cN(s){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++){n[o-1]=arguments[o]}return Y_(s,e,n)}}function aN(o){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return X_(o,t)}}function $e(e,t){if(j_){j_(e,null)}var n=t.length;while(n--){var o=t[n];if(typeof o==="string"){var s=eN(o);if(s!==o){if(!H_(t)){t[n]=s}o=s}}e[o]=true}return e}function lN(e){var t=K_(null);var n;for(n in e){if(Y_(z_,e,[n])){t[n]=e[n]}}return t}function dN(e,t){while(e!==null){var n=V_(e,t);if(n){if(n.get){return cN(n.get)}if(typeof n.value==="function"){return cN(n.value)}}e=$_(e)}function o(e){console.warn("fallback value for",e);return null}return o}var uN=q_(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]);var fN=q_(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]);var mN=q_(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]);var gN=q_(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]);var pN=q_(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]);var hN=q_(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]);var bN=q_(["#text"]);var vN=q_(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]);var yN=q_(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]);var CN=q_(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]);var wN=q_(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var xN=W_(/\{\{[\w\W]*|[\w\W]*\}\}/gm);var kN=W_(/<%[\w\W]*|[\w\W]*%>/gm);var EN=W_(/^data-[\-\w.\u00B7-\uFFFF]/);var SN=W_(/^aria-[\-\w]+$/);var _N=W_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var NN=W_(/^(?:\w+script|data):/i);var RN=W_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);var AN=W_(/^html$/i);var DN=function e(){return typeof window==="undefined"?null:window};var ON=function e(t,n){if(D_(t)!=="object"||typeof t.createPolicy!=="function"){return null}var o=null;var s="data-tt-policy-suffix";if(n.currentScript&&n.currentScript.hasAttribute(s)){o=n.currentScript.getAttribute(s)}var r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML:function e(t){return t}})}catch(e){console.warn("TrustedTypes policy "+r+" could not be created.");return null}};function TN(){var d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:DN();var u=function e(t){return TN(t)};u.version="2.3.8";u.removed=[];if(!d||!d.document||d.document.nodeType!==9){u.isSupported=false;return u}var f=d.document;var c=d.document;var L=d.DocumentFragment,M=d.HTMLTemplateElement,m=d.Node,I=d.Element,n=d.NodeFilter,F=d.NamedNodeMap,U=F===void 0?d.NamedNodeMap||d.MozNamedAttrMap:F,z=d.HTMLFormElement,j=d.DOMParser,H=d.trustedTypes;var e=I.prototype;var $=dN(e,"cloneNode");var V=dN(e,"nextSibling");var q=dN(e,"childNodes");var a=dN(e,"parentNode");if(typeof M==="function"){var t=c.createElement("template");if(t.content&&t.content.ownerDocument){c=t.content.ownerDocument}}var g=ON(H,f);var W=g?g.createHTML(""):"";var o=c,l=o.implementation,K=o.createNodeIterator,G=o.createDocumentFragment,Y=o.getElementsByTagName;var X=f.importNode;var Q={};try{Q=lN(c).documentMode?c.documentMode:{}}catch(e){}var s={};u.isSupported=typeof a==="function"&&l&&typeof l.createHTMLDocument!=="undefined"&&Q!==9;var J=xN,Z=kN,ee=EN,te=SN,ne=NN,oe=RN;var se=_N;var p=null;var re=$e({},[].concat(P_(uN),P_(fN),P_(mN),P_(pN),P_(bN)));var h=null;var ie=$e({},[].concat(P_(vN),P_(yN),P_(CN),P_(wN)));var b=Object.seal(Object.create(null,{tagNameCheck:{writable:true,configurable:false,enumerable:true,value:null},attributeNameCheck:{writable:true,configurable:false,enumerable:true,value:null},allowCustomizedBuiltInElements:{writable:true,configurable:false,enumerable:true,value:false}}));var v=null;var ce=null;var ae=true;var le=true;var de=false;var y=false;var C=false;var ue=false;var fe=false;var w=false;var x=false;var k=false;var me=true;var ge=true;var E=false;var r={};var S=null;var pe=$e({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);var he=null;var be=$e({},["audio","video","img","source","image","track"]);var ve=null;var ye=$e({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]);var Ce="http://www.w3.org/1998/Math/MathML";var we="http://www.w3.org/2000/svg";var _="http://www.w3.org/1999/xhtml";var N=_;var xe=false;var R;var ke=["application/xhtml+xml","text/html"];var Ee="text/html";var A;var i=null;var Se=c.createElement("form");var _e=function e(t){return t instanceof RegExp||t instanceof Function};var Ne=function e(t){if(i&&i===t){return}if(!t||D_(t)!=="object"){t={}}t=lN(t);p="ALLOWED_TAGS"in t?$e({},t.ALLOWED_TAGS):re;h="ALLOWED_ATTR"in t?$e({},t.ALLOWED_ATTR):ie;ve="ADD_URI_SAFE_ATTR"in t?$e(lN(ye),t.ADD_URI_SAFE_ATTR):ye;he="ADD_DATA_URI_TAGS"in t?$e(lN(be),t.ADD_DATA_URI_TAGS):be;S="FORBID_CONTENTS"in t?$e({},t.FORBID_CONTENTS):pe;v="FORBID_TAGS"in t?$e({},t.FORBID_TAGS):{};ce="FORBID_ATTR"in t?$e({},t.FORBID_ATTR):{};r="USE_PROFILES"in t?t.USE_PROFILES:false;ae=t.ALLOW_ARIA_ATTR!==false;le=t.ALLOW_DATA_ATTR!==false;de=t.ALLOW_UNKNOWN_PROTOCOLS||false;y=t.SAFE_FOR_TEMPLATES||false;C=t.WHOLE_DOCUMENT||false;w=t.RETURN_DOM||false;x=t.RETURN_DOM_FRAGMENT||false;k=t.RETURN_TRUSTED_TYPE||false;fe=t.FORCE_BODY||false;me=t.SANITIZE_DOM!==false;ge=t.KEEP_CONTENT!==false;E=t.IN_PLACE||false;se=t.ALLOWED_URI_REGEXP||se;N=t.NAMESPACE||_;if(t.CUSTOM_ELEMENT_HANDLING&&_e(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)){b.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck}if(t.CUSTOM_ELEMENT_HANDLING&&_e(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)){b.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck}if(t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==="boolean"){b.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements}R=ke.indexOf(t.PARSER_MEDIA_TYPE)===-1?R=Ee:R=t.PARSER_MEDIA_TYPE;A=R==="application/xhtml+xml"?function(e){return e}:eN;if(y){le=false}if(x){w=true}if(r){p=$e({},P_(bN));h=[];if(r.html===true){$e(p,uN);$e(h,vN)}if(r.svg===true){$e(p,fN);$e(h,yN);$e(h,wN)}if(r.svgFilters===true){$e(p,mN);$e(h,yN);$e(h,wN)}if(r.mathMl===true){$e(p,pN);$e(h,CN);$e(h,wN)}}if(t.ADD_TAGS){if(p===re){p=lN(p)}$e(p,t.ADD_TAGS)}if(t.ADD_ATTR){if(h===ie){h=lN(h)}$e(h,t.ADD_ATTR)}if(t.ADD_URI_SAFE_ATTR){$e(ve,t.ADD_URI_SAFE_ATTR)}if(t.FORBID_CONTENTS){if(S===pe){S=lN(S)}$e(S,t.FORBID_CONTENTS)}if(ge){p["#text"]=true}if(C){$e(p,["html","head","body"])}if(p.table){$e(p,["tbody"]);delete v.tbody}if(q_){q_(t)}i=t};var Re=$e({},["mi","mo","mn","ms","mtext"]);var Ae=$e({},["foreignobject","desc","title","annotation-xml"]);var De=$e({},["title","style","font","a","script"]);var D=$e({},fN);$e(D,mN);$e(D,gN);var Oe=$e({},pN);$e(Oe,hN);var Te=function e(t){var n=a(t);if(!n||!n.tagName){n={namespaceURI:_,tagName:"template"}}var o=eN(t.tagName);var s=eN(n.tagName);if(t.namespaceURI===we){if(n.namespaceURI===_){return o==="svg"}if(n.namespaceURI===Ce){return o==="svg"&&(s==="annotation-xml"||Re[s])}return Boolean(D[o])}if(t.namespaceURI===Ce){if(n.namespaceURI===_){return o==="math"}if(n.namespaceURI===we){return o==="math"&&Ae[s]}return Boolean(Oe[o])}if(t.namespaceURI===_){if(n.namespaceURI===we&&!Ae[s]){return false}if(n.namespaceURI===Ce&&!Re[s]){return false}return!Oe[o]&&(De[o]||!D[o])}return false};var O=function e(t){Z_(u.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=W}catch(e){t.remove()}}};var T=function e(t,n){try{Z_(u.removed,{attribute:n.getAttributeNode(t),from:n})}catch(e){Z_(u.removed,{attribute:null,from:n})}n.removeAttribute(t);if(t==="is"&&!h[t]){if(w||x){try{O(n)}catch(e){}}else{try{n.setAttribute(t,"")}catch(e){}}}};var Be=function e(t){var n;var o;if(fe){t="<remove></remove>"+t}else{var s=tN(t,/^[\r\n\t ]+/);o=s&&s[0]}if(R==="application/xhtml+xml"){t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>"}var r=g?g.createHTML(t):t;if(N===_){try{n=(new j).parseFromString(r,R)}catch(e){}}if(!n||!n.documentElement){n=l.createDocument(N,"template",null);try{n.documentElement.innerHTML=xe?"":r}catch(e){}}var i=n.body||n.documentElement;if(t&&o){i.insertBefore(c.createTextNode(o),i.childNodes[0]||null)}if(N===_){return Y.call(n,C?"html":"body")[0]}return C?n.documentElement:i};var Pe=function e(t){return K.call(t.ownerDocument||t,t,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,null,false)};var Le=function e(t){return t instanceof z&&(typeof t.nodeName!=="string"||typeof t.textContent!=="string"||typeof t.removeChild!=="function"||!(t.attributes instanceof U)||typeof t.removeAttribute!=="function"||typeof t.setAttribute!=="function"||typeof t.namespaceURI!=="string"||typeof t.insertBefore!=="function")};var B=function e(t){return D_(m)==="object"?t instanceof m:t&&D_(t)==="object"&&typeof t.nodeType==="number"&&typeof t.nodeName==="string"};var P=function e(t,n,o){if(!s[t]){return}Q_(s[t],function(e){e.call(u,n,o,i)})};var Me=function e(t){var n;P("beforeSanitizeElements",t,null);if(Le(t)){O(t);return true}if(rN(/[\u0080-\uFFFF]/,t.nodeName)){O(t);return true}var o=A(t.nodeName);P("uponSanitizeElement",t,{tagName:o,allowedTags:p});if(t.hasChildNodes()&&!B(t.firstElementChild)&&(!B(t.content)||!B(t.content.firstElementChild))&&rN(/<[/\w]/g,t.innerHTML)&&rN(/<[/\w]/g,t.textContent)){O(t);return true}if(o==="select"&&rN(/<template/i,t.innerHTML)){O(t);return true}if(!p[o]||v[o]){if(!v[o]&&Fe(o)){if(b.tagNameCheck instanceof RegExp&&rN(b.tagNameCheck,o))return false;if(b.tagNameCheck instanceof Function&&b.tagNameCheck(o))return false}if(ge&&!S[o]){var s=a(t)||t.parentNode;var r=q(t)||t.childNodes;if(r&&s){var i=r.length;for(var c=i-1;c>=0;--c){s.insertBefore($(r[c],true),V(t))}}}O(t);return true}if(t instanceof I&&!Te(t)){O(t);return true}if((o==="noscript"||o==="noembed")&&rN(/<\/no(script|embed)/i,t.innerHTML)){O(t);return true}if(y&&t.nodeType===3){n=t.textContent;n=nN(n,J," ");n=nN(n,Z," ");if(t.textContent!==n){Z_(u.removed,{element:t.cloneNode()});t.textContent=n}}P("afterSanitizeElements",t,null);return false};var Ie=function e(t,n,o){if(me&&(n==="id"||n==="name")&&(o in c||o in Se)){return false}if(le&&!ce[n]&&rN(ee,n));else if(ae&&rN(te,n));else if(!h[n]||ce[n]){if(Fe(t)&&(b.tagNameCheck instanceof RegExp&&rN(b.tagNameCheck,t)||b.tagNameCheck instanceof Function&&b.tagNameCheck(t))&&(b.attributeNameCheck instanceof RegExp&&rN(b.attributeNameCheck,n)||b.attributeNameCheck instanceof Function&&b.attributeNameCheck(n))||n==="is"&&b.allowCustomizedBuiltInElements&&(b.tagNameCheck instanceof RegExp&&rN(b.tagNameCheck,o)||b.tagNameCheck instanceof Function&&b.tagNameCheck(o)));else{return false}}else if(ve[n]);else if(rN(se,nN(o,oe,"")));else if((n==="src"||n==="xlink:href"||n==="href")&&t!=="script"&&oN(o,"data:")===0&&he[t]);else if(de&&!rN(ne,nN(o,oe,"")));else if(!o);else{return false}return true};var Fe=function e(t){return t.indexOf("-")>0};var Ue=function e(t){var n;var o;var s;var r;P("beforeSanitizeAttributes",t,null);var i=t.attributes;if(!i){return}var c={attrName:"",attrValue:"",keepAttr:true,allowedAttributes:h};r=i.length;while(r--){n=i[r];var a=n,l=a.name,d=a.namespaceURI;o=l==="value"?n.value:sN(n.value);s=A(l);var u=o;c.attrName=s;c.attrValue=o;c.keepAttr=true;c.forceKeepAttr=undefined;P("uponSanitizeAttribute",t,c);o=c.attrValue;if(c.forceKeepAttr){continue}if(!c.keepAttr){T(l,t);continue}if(rN(/\/>/i,o)){T(l,t);continue}if(y){o=nN(o,J," ");o=nN(o,Z," ")}var f=A(t.nodeName);if(!Ie(f,s,o)){T(l,t);continue}if(o!==u){try{if(d){t.setAttributeNS(d,l,o)}else{t.setAttribute(l,o)}}catch(e){T(l,t)}}}P("afterSanitizeAttributes",t,null)};var ze=function e(t){var n;var o=Pe(t);P("beforeSanitizeShadowDOM",t,null);while(n=o.nextNode()){P("uponSanitizeShadowNode",n,null);if(Me(n)){continue}if(n.content instanceof L){e(n.content)}Ue(n)}P("afterSanitizeShadowDOM",t,null)};u.sanitize=function(e,t){var n;var o;var s;var r;var i;xe=!e;if(xe){e="\x3c!--\x3e"}if(typeof e!=="string"&&!B(e)){if(typeof e.toString!=="function"){throw iN("toString is not a function")}else{e=e.toString();if(typeof e!=="string"){throw iN("dirty is not a string, aborting")}}}if(!u.isSupported){if(D_(d.toStaticHTML)==="object"||typeof d.toStaticHTML==="function"){if(typeof e==="string"){return d.toStaticHTML(e)}if(B(e)){return d.toStaticHTML(e.outerHTML)}}return e}if(!ue){Ne(t)}u.removed=[];if(typeof e==="string"){E=false}if(E){if(e.nodeName){var c=A(e.nodeName);if(!p[c]||v[c]){throw iN("root node is forbidden and cannot be sanitized in-place")}}}else if(e instanceof m){n=Be("\x3c!----\x3e");o=n.ownerDocument.importNode(e,true);if(o.nodeType===1&&o.nodeName==="BODY"){n=o}else if(o.nodeName==="HTML"){n=o}else{n.appendChild(o)}}else{if(!w&&!y&&!C&&e.indexOf("<")===-1){return g&&k?g.createHTML(e):e}n=Be(e);if(!n){return w?null:k?W:""}}if(n&&fe){O(n.firstChild)}var a=Pe(E?e:n);while(s=a.nextNode()){if(s.nodeType===3&&s===r){continue}if(Me(s)){continue}if(s.content instanceof L){ze(s.content)}Ue(s);r=s}r=null;if(E){return e}if(w){if(x){i=G.call(n.ownerDocument);while(n.firstChild){i.appendChild(n.firstChild)}}else{i=n}if(h.shadowroot){i=X.call(f,i,true)}return i}var l=C?n.outerHTML:n.innerHTML;if(C&&p["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&rN(AN,n.ownerDocument.doctype.name)){l="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+l}if(y){l=nN(l,J," ");l=nN(l,Z," ")}return g&&k?g.createHTML(l):l};u.setConfig=function(e){Ne(e);ue=true};u.clearConfig=function(){i=null;ue=false};u.isValidAttribute=function(e,t,n){if(!i){Ne({})}var o=A(e);var s=A(t);return Ie(o,s,n)};u.addHook=function(e,t){if(typeof t!=="function"){return}s[e]=s[e]||[];Z_(s[e],t)};u.removeHook=function(e){if(s[e]){return J_(s[e])}};u.removeHooks=function(e){if(s[e]){s[e]=[]}};u.removeAllHooks=function(){s={}};return u}var BN=TN();const PN=U.each,LN=U.trim;const MN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];const IN={ftp:21,http:80,https:443,mailto:25};const FN=["img","video"];const UN=(e,t)=>{if(De(e)){return!e}else{return De(t)?!m(FN,t):true}};const zN=t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}};const jN=(e,t,n)=>{const o=zN(t).replace(/\s/g,"");if(e.allow_script_urls){return false}else if(/((java|vb)script|mhtml):/i.test(o)){return true}else if(e.allow_html_data_urls){return false}else if(/^data:image\//i.test(o)){return UN(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o)}else{return/^data:/i.test(o)}};class HN{constructor(t,e={}){this.path="";this.directory="";t=LN(t);this.settings=e;const n=e.base_uri;const o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const s=t.indexOf("//")===0;if(t.indexOf("/")===0&&!s){t=(n?n.protocol||"http":"http")+"://mce_host"+t}if(!/^[\w\-]*:?\/\//.test(t)){const i=n?n.path:new HN(document.location.href).directory;if((n===null||n===void 0?void 0:n.protocol)===""){t="//mce_host"+o.toAbsPath(i,t)}else{const e=/([^#?]*)([#?]?.*)/.exec(t);if(e){t=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(i,e[1])+e[2]}}}t=t.replace(/@@/g,"(mce_at)");const r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);if(r){PN(MN,(e,t)=>{let n=r[t];if(n){n=n.replace(/\(mce_at\)/g,"@@")}o[e]=n})}if(n){if(!o.protocol){o.protocol=n.protocol}if(!o.userInfo){o.userInfo=n.userInfo}if(!o.port&&o.host==="mce_host"){o.port=n.port}if(!o.host||o.host==="mce_host"){o.host=n.host}o.source=""}if(s){o.protocol=""}}static parseDataUri(e){let t;const n=decodeURIComponent(e).split(",");const o=/data:([^;]+)/.exec(n[0]);if(o){t=o[1]}return{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls){return true}else{const o=pa.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!jN(n,o,t)}}static getDocumentBaseUrl(e){var t;let n;if(e.protocol.indexOf("http")!==0&&e.protocol!=="file:"){n=(t=e.href)!==null&&t!==void 0?t:""}else{n=e.protocol+"//"+e.host+e.pathname}if(/^[^:]+:\/\/\/?[^\/]+\//.test(n)){n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(n)){n+="/"}}return n}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);if(t){this.path=t[0];this.directory=t[1];this.file=t[2]}this.source="";this.getURI()}toRelative(e){if(e==="./"){return e}const t=new HN(e,{base_uri:this});if(t.host!=="mce_host"&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&t.protocol!==""){return t.getURI()}const n=this.getURI(),o=t.getURI();if(n===o||n.charAt(n.length-1)==="/"&&n.substr(0,n.length-1)===o){return n}let s=this.toRelPath(this.path,t.path);if(t.query){s+="?"+t.query}if(t.anchor){s+="#"+t.anchor}return s}toAbsolute(e,t){const n=new HN(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port){return true}const t=this.protocol?IN[this.protocol]:null;if(t&&(this.port||t)==(e.port||t)){return true}}return false}toRelPath(e,t){let n=0,o="",s,r;const i=e.substring(0,e.lastIndexOf("/")).split("/");const c=t.split("/");if(i.length>=c.length){for(s=0,r=i.length;s<r;s++){if(s>=c.length||i[s]!==c[s]){n=s+1;break}}}if(i.length<c.length){for(s=0,r=c.length;s<r;s++){if(s>=i.length||i[s]!==c[s]){n=s+1;break}}}if(n===1){return t}for(s=0,r=i.length-(n-1);s<r;s++){o+="../"}for(s=n-1,r=c.length;s<r;s++){if(s!==n-1){o+="/"+c[s]}else{o+=c[s]}}return o}toAbsPath(e,t){let n=0;const o=/\/$/.test(t)?"/":"";const s=e.split("/");const r=t.split("/");const i=[];PN(s,e=>{if(e){i.push(e)}});const c=[];for(let e=r.length-1;e>=0;e--){if(r[e].length===0||r[e]==="."){continue}if(r[e]===".."){n++;continue}if(n>0){n--;continue}c.push(r[e])}const a=i.length-n;let l;if(a<=0){l=pe(c).join("/")}else{l=i.slice(0,a).join("/")+"/"+pe(c).join("/")}if(l.indexOf("/")!==0){l="/"+l}if(o&&l.lastIndexOf("/")!==l.length-1){l+=o}return l}getURI(e=false){let t;if(!this.source||e){t="";if(!e){if(this.protocol){t+=this.protocol+"://"}else{t+="//"}if(this.userInfo){t+=this.userInfo+"@"}if(this.host){t+=this.host}if(this.port){t+=":"+this.port}}if(this.path){t+=this.path}if(this.query){t+="?"+this.query}if(this.anchor){t+="#"+this.anchor}this.source=t}return this.source}}const $N=U.makeMap("src,href,data,background,action,formaction,poster,xlink:href");const VN="data-mce-type";let qN=0;const WN=(e,t,n,o)=>{var s,r,i,c;const a=t.validate;const l=n.getSpecialElements();if(e.nodeType===Vn&&!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")){e.nodeValue=" "+e.nodeValue}const d=(r=o===null||o===void 0?void 0:o.tagName)!==null&&r!==void 0?r:e.nodeName.toLowerCase();if(e.nodeType!==Kn||d==="body"){return}const u=Fe.fromDom(e);const f=lo(u,VN);const m=co(u,"data-mce-bogus");if(!f&&Re(m)){if(m==="all"){Ue(u)}else{Vs(u)}return}const g=n.getElementRule(d);if(a&&!g){if(Ie(l,d)){Ue(u)}else{Vs(u)}return}else{if(De(o)){o.allowedTags[d]=true}}if(a&&g&&!f){Le((i=g.attributesForced)!==null&&i!==void 0?i:[],e=>{ro(u,e.name,e.value==="{$uid}"?`mce_${qN++}`:e.value)});Le((c=g.attributesDefault)!==null&&c!==void 0?c:[],e=>{if(!lo(u,e.name)){ro(u,e.name,e.value==="{$uid}"?`mce_${qN++}`:e.value)}});if(g.attributesRequired&&!Pe(g.attributesRequired,e=>lo(u,e))){Vs(u);return}if(g.removeEmptyAttrs&&fo(u)){Vs(u);return}if(g.outputName&&g.outputName!==d){Ql(u,g.outputName)}}};const KN=(e,t,n,o,s)=>!(o in $N&&jN(e,s,n))&&(!e.validate||t.isValid(n,o)||Rt(o,"data-")||Rt(o,"aria-"));const GN=(e,t)=>e.hasAttribute(VN)&&(t==="id"||t==="class"||t==="style");const YN=(e,t)=>e in t.getBoolAttrs();const XN=(t,n,o)=>{const{attributes:s}=t;for(let e=s.length-1;e>=0;e--){const r=s[e];const i=r.name;const c=r.value;if(!KN(n,o,t.tagName.toLowerCase(),i,c)&&!GN(t,i)){t.removeAttribute(i)}else if(YN(i,o)){t.setAttribute(i,i)}}};const QN=(r,i)=>{const e=BN();e.addHook("uponSanitizeElement",(e,t)=>{WN(e,r,i,t)});e.addHook("uponSanitizeAttribute",(e,t)=>{const n=e.tagName.toLowerCase();const{attrName:o,attrValue:s}=t;t.keepAttr=KN(r,i,n,o,s);if(t.keepAttr){t.allowedAttributes[o]=true;if(YN(o,i)){t.attrValue=o}if(r.allow_svg_data_urls&&Rt(s,"data:image/svg+xml")){t.forceKeepAttr=true}}else if(GN(e,o)){t.forceKeepAttr=true}});return e};const JN=(e,t)=>{const n={IN_PLACE:true,ALLOW_UNKNOWN_PROTOCOLS:true,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};const o={...n};o.PARSER_MEDIA_TYPE=t;if(e.allow_script_urls){o.ALLOWED_URI_REGEXP=/.*/}else if(e.allow_html_data_urls){o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i}return o};const ZN=(s,r)=>{if(s.sanitize){const n=QN(s,r);return(e,t)=>{n.sanitize(e,JN(s,t));n.removed=[]}}else{return(e,t)=>{const n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let o;while(o=n.nextNode()){WN(o,s,r);if(ze(o)){XN(o,s,r)}}}}};const eR=U.makeMap,tR=U.extend;const nR=(o,e,s)=>{const t=o.name;const r=t in s&&t!=="title"&&t!=="textarea";const i=e.childNodes;for(let e=0,t=i.length;e<t;e++){const c=i[e];const n=new FC(c.nodeName.toLowerCase(),c.nodeType);if(ze(c)){const a=c.attributes;for(let e=0,t=a.length;e<t;e++){const l=a[e];n.attr(l.name,l.value)}}else if(je(c)){n.value=c.data;if(r){n.raw=true}}else if(Br(c)||Or(c)||Tr(c)){n.value=c.data}nR(n,c,s);o.append(n)}};const oR=(n,o,t)=>{const s=[];for(let e=n,t=e;e;t=e,e=e.walk()){const r=e;Le(o,e=>e(r));if(Ae(r.parent)&&r!==n){e=t}else{s.push(r)}}for(let e=s.length-1;e>=0;e--){const i=s[e];Le(t,e=>e(i))}};const sR=(o,s,e,r)=>{const i=e.validate;const c=s.getNonEmptyElements();const a=s.getWhitespaceElements();const t=tR(eR("script,style,head,html,body,title,meta,param"),s.getBlockElements());const n=_a(s);const l=/[ \t\r\n]+/g;const d=/^[ \t\r\n]+/;const u=/[ \t\r\n]+$/;const f=e=>{let t=e.parent;while(De(t)){if(t.name in a){return true}else{t=t.parent}}return false};const m=e=>{let t=e;while(De(t)){if(t.name in n){return fk(s,c,a,t)}else{t=t.parent}}return false};const g=e=>e.name in t&&!Lc(s,e);const p=(e,t)=>{const n=t?e.prev:e.next;if(De(n)||Ae(e.parent)){return false}return g(e.parent)&&(e.parent!==o||r.isRootContent===true)};const h=t=>{var n;if(t.type===3){if(!f(t)){let e=(n=t.value)!==null&&n!==void 0?n:"";e=e.replace(l," ");if(mk(t.prev,g)||p(t,true)){e=e.replace(d,"")}if(e.length===0){t.remove()}else{t.value=e}}}};const b=t=>{var n;if(t.type===1){const e=s.getElementRule(t.name);if(i&&e){const o=fk(s,c,a,t);if(e.paddInEmptyBlock&&o&&m(t)){ak(r,g,t)}else if(e.removeEmpty&&o){if(g(t)){t.remove()}else{t.unwrap()}}else if(e.paddEmpty&&(o||lk(t))){ak(r,g,t)}}}else if(t.type===3){if(!f(t)){let e=(n=t.value)!==null&&n!==void 0?n:"";if(t.next&&g(t.next)||p(t,false)){e=e.replace(u,"")}if(e.length===0){t.remove()}else{t.value=e}}}};return[h,b]};const rR=(e,t)=>{var n;const o=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;if(o===false){return""}else if(o===true){return"p"}else{return o}};const iR=(e={},h=Aa())=>{const t=c_();const n=c_();const b={validate:true,root_name:"body",sanitize:true,...e};const a=new DOMParser;const l=ZN(b,h);const v=(e,t,n="html")=>{const o=n==="xhtml"?"application/xhtml+xml":"text/html";const s=Ie(h.getSpecialElements(),t.toLowerCase());const r=s?`<${t}>${e}</${t}>`:e;const i=n==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${r}</body></html>`:`<body>${r}</body>`;const c=a.parseFromString(i,o).body;l(c,o);return s?c.firstChild:c};const o=t.addFilter;const y=t.getFilters;const s=t.removeFilter;const r=n.addFilter;const C=n.getFilters;const i=n.removeFilter;const w=(e,t)=>{if(vk(h,e)){t.push(e)}};const d=(e,t)=>{const n=Re(t.attr(VN));const o=t.type===1&&(!Ie(e,t.name)&&!Pc(h,t));return t.type===3||o&&!n};const x=(t,n)=>{const o=tR(eR("script,style,head,html,body,title,meta,param"),h.getBlockElements());const s=/^[ \t\r\n]+/;const r=/[ \t\r\n]+$/;let i=t.firstChild,c=null;const a=e=>{var t,n;if(e){i=e.firstChild;if(i&&i.type===3){i.value=(t=i.value)===null||t===void 0?void 0:t.replace(s,"")}i=e.lastChild;if(i&&i.type===3){i.value=(n=i.value)===null||n===void 0?void 0:n.replace(r,"")}}};if(!h.isValidChild(t.name,n.toLowerCase())){return}while(i){const e=i.next;if(d(o,i)){if(!c){c=new FC(n,1);c.attr(b.forced_root_block_attrs);t.insert(c,i);c.append(i)}else{c.append(i)}}else{a(c);c=null}i=e}a(c)};const c=(e,t={})=>{var n;const o=b.validate;const s=(n=t.context)!==null&&n!==void 0?n:b.root_name;const r=v(e,s,t.format);_c(h,r);const i=new FC(s,11);nR(i,r,h.getSpecialElements());r.innerHTML="";const[c,a]=sR(i,h,b,t);const l=[];const d=o?e=>w(e,l):Te;const u={nodes:{},attributes:{}};const f=e=>sk(y(),C(),e,u);oR(i,[c,f],[a,d]);l.reverse();if(o&&l.length>0){if(t.context){const{pass:g,fail:p}=ce(l,e=>e.parent===i);hk(p,h,i,f);t.invalid=g.length>0}else{hk(l,h,i,f)}}const m=rR(b,t);if(m&&(i.name==="body"||t.isRootContent)){x(i,m)}if(!t.invalid){ik(u,t)}return i};const u={schema:h,addAttributeFilter:r,getAttributeFilters:C,removeAttributeFilter:i,addNodeFilter:o,getNodeFilters:y,removeNodeFilter:s,parse:c};A_(u,b);f_(u,b,h);return u};const cR=e=>sE(e)?ZC({validate:false}).serialize(e):e;const aR=(e,t,n)=>{const o=cR(e);const s=t(o);if(s.isDefaultPrevented()){return s}else if(sE(e)){if(s.content!==o){const r=iR({validate:false,forced_root_block:false,sanitize:n}).parse(s.content,{context:e.name});return{...s,content:r}}else{return{...s,content:e}}}else{return s}};const lR=(e,t)=>{if(t.no_events){return xu.value(t)}else{const n=Sb(e,t);if(n.isDefaultPrevented()){return xu.error(_b(e,{content:"",...n}).content)}else{return xu.value(n)}}};const dR=(t,e,n)=>{if(n.no_events){return e}else{const o=aR(e,e=>_b(t,{...n,content:e}),Em(t));return o.content}};const uR=(t,n)=>{if(n.no_events){return xu.value(n)}else{const e=aR(n.content,e=>kb(t,{...n,content:e}),Em(t));if(e.isDefaultPrevented()){Eb(t,e);return xu.error(undefined)}else{return xu.value(e)}}};const fR=(e,t,n)=>{if(!n.no_events){Eb(e,{...n,content:t})}};const mR=(e,t,n)=>({element:e,width:t,rows:n});const gR=(e,t)=>({element:e,cells:t});const pR=(e,t)=>({x:e,y:t});const hR=(e,t)=>{return ao(e,t).bind(It).getOr(1)};const bR=(e,o,s,t,r)=>{const i=hR(r,"rowspan");const c=hR(r,"colspan");const a=e.rows;for(let n=s;n<s+i;n++){if(!a[n]){a[n]=gR(Yl(t),[])}for(let t=o;t<o+c;t++){const e=a[n].cells;e[t]=n===s&&t===o?r:Gl(r)}}};const vR=(e,t,n)=>{const o=e.rows;const s=o[n]?o[n].cells:[];return!!s[t]};const yR=(e,t,n)=>{while(vR(e,t,n)){t++}return t};const CR=e=>{return le(e,(e,t)=>{return t.cells.length>e?t.cells.length:e},0)};const wR=(e,o)=>{const s=e.rows;for(let n=0;n<s.length;n++){const t=s[n].cells;for(let e=0;e<t.length;e++){if(k(t[e],o)){return C.some(pR(e,n))}}}return C.none()};const xR=(e,n,o,s,r)=>{const i=[];const c=e.rows;for(let t=o;t<=r;t++){const e=c[t].cells;const a=n<s?e.slice(n,s+1):e.slice(s,n+1);i.push(gR(c[t].element,a))}return i};const kR=(e,t,n)=>{const o=t.x,s=t.y;const r=n.x,i=n.y;const c=s<i?xR(e,o,s,r,i):xR(e,o,i,r,s);return mR(e.element,CR(c),c)};const ER=(e,t)=>{const n=Gl(e.element);const o=Fe.fromTag("tbody");Hs(o,t);Us(n,o);return n};const SR=e=>{return y(e.rows,e=>{const t=y(e.cells,e=>{const t=Yl(e);uo(t,"colspan");uo(t,"rowspan");return t});const n=Gl(e.element);Hs(n,t);return n})};const _R=e=>{const s=mR(Gl(e),0,[]);Le(hr(e,"tr"),(n,o)=>{Le(hr(n,"td,th"),(e,t)=>{bR(s,yR(s,t,o),o,n,e)})});return mR(s.element,CR(s.rows),s.rows)};const NR=e=>{return ER(e,SR(e))};const RR=(n,e,o)=>{return wR(n,e).bind(t=>{return wR(n,o).map(e=>{return kR(n,t,e)})})};const AR=e=>ue(e,e=>g(e)==="ul"||g(e)==="ol");const DR=(t,n)=>ue(t,e=>g(e)==="li"&&eh(e,n)).fold(Be([]),e=>AR(t).map(e=>{const t=Fe.fromTag(g(e));const n=Xe(Bs(e),(e,t)=>Rt(t,"list-style"));As(t,n);return[Fe.fromTag("li"),t]}).getOr([]));const OR=(e,t)=>{const n=le(t,(e,t)=>{Us(t,e);return t},e);return t.length>0?wv([n]):n};const TR=t=>{if(mi(t)){return Ho(t).filter(fi).fold(Be([]),e=>[t,e])}else{return fi(t)?[t]:[]}};const BR=(e,t)=>{const n=Fe.fromDom(t.commonAncestorContainer);const o=S0(n,e);const s=S(o,vi);const r=DR(o,t);const i=s.concat(r.length?r:TR(n));return y(i,Gl)};const PR=()=>wv([]);const LR=(e,t)=>OR(Fe.fromDom(t.cloneContents()),BR(e,t));const MR=(e,t)=>ys(t,"table",h(k,e));const IR=(e,s)=>MR(e,s[0]).bind(e=>{const t=s[0];const n=s[s.length-1];const o=_R(e);return RR(o,t,n).map(e=>wv([NR(e)]))}).getOrThunk(PR);const FR=(e,t)=>t.length>0&&t[0].collapsed?PR():LR(e,t[0]);const UR=(e,t)=>{const n=Kp(t,e);return n.length>0?IR(e,n):FR(e,t)};const zR=(e,t)=>t>=0&&t<e.length&&Dp(e.charAt(t));const jR=e=>{return _i(e.innerText)};const HR=e=>e.map(e=>e.nodeName).getOr("div").toLowerCase();const $R=g=>C.from(g.selection.getRng()).map(e=>{var t;const n=C.from(g.dom.getParent(e.commonAncestorContainer,g.dom.isBlock));const o=g.getBody();const s=HR(n);const r=Fe.fromDom(e.cloneContents());qC(r);WC(r);const i=g.dom.add(o,s,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},r.dom);const c=jR(i);const a=_i((t=i.textContent)!==null&&t!==void 0?t:"");g.dom.remove(i);if(zR(a,0)||zR(a,a.length-1)){const l=n.getOr(o);const d=jR(l);const u=d.indexOf(c);if(u===-1){return c}else{const f=zR(d,u-1);const m=zR(d,u+c.length);return(f?" ":"")+c+(m?" ":"")}}else{return c}}).getOr("");const VR=(e,t)=>{const n=e.selection.getRng(),o=e.dom.create("body");const s=e.selection.getSel();const r=CC(e,Hp(s));const i=t.contextual?UR(Fe.fromDom(e.getBody()),r).dom:n.cloneContents();if(i){o.appendChild(i)}return e.selection.serializer.serialize(o,t)};const qR=(e,t)=>{if(t.format==="text"){return $R(e)}else{const n=VR(e,t);if(t.format==="tree"){return n}else{return e.selection.isCollapsed()?"":n}}};const WR=(e,t)=>({...e,format:t,get:true,selection:true,getInner:true});const KR=(n,e,t={})=>{const o=WR(t,e);return lR(n,o).fold(Y,e=>{const t=qR(n,e);return dR(n,t,e)})};const GR=0,YR=1,XR=2;const QR=(g,p)=>{const e=g.length+p.length+2;const h=new Array(e);const b=new Array(e);const r=(e,t,n)=>{return{start:e,end:t,diag:n}};const c=(n,o,s,r,i)=>{const t=a(n,o,s,r);if(t===null||t.start===o&&t.diag===o-r||t.end===n&&t.diag===n-s){let e=n;let t=s;while(e<o||t<r){if(e<o&&t<r&&g[e]===p[t]){i.push([GR,g[e]]);++e;++t}else{if(o-n>r-s){i.push([XR,g[e]]);++e}else{i.push([YR,p[t]]);++t}}}}else{c(n,t.start,s,t.start-t.diag,i);for(let e=t.start;e<t.end;++e){i.push([GR,g[e]])}c(t.end,o,t.end-t.diag,r,i)}};const v=(e,t,n,o)=>{let s=e;while(s-t<o&&s<n&&g[s]===p[s-t]){++s}return r(e,s,t)};const a=(e,t,n,o)=>{const s=t-e;const r=o-n;if(s===0||r===0){return null}const i=s-r;const c=r+s;const a=(c%2===0?c:c+1)/2;h[1+a]=e;b[1+a]=t+1;let l,d,u,f,m;for(l=0;l<=a;++l){for(d=-l;d<=l;d+=2){u=d+a;if(d===-l||d!==l&&h[u-1]<h[u+1]){h[u]=h[u+1]}else{h[u]=h[u-1]+1}f=h[u];m=f-e+n-d;while(f<t&&m<o&&g[f]===p[m]){h[u]=++f;++m}if(i%2!==0&&i-l<=d&&d<=i+l){if(b[u-i]<=h[u]){return v(b[u-i],d+e-n,t,o)}}}for(d=i-l;d<=i+l;d+=2){u=d+a-i;if(d===i-l||d!==i+l&&b[u+1]<=b[u-1]){b[u]=b[u+1]-1}else{b[u]=b[u-1]}f=b[u]-1;m=f-e+n-d;while(f>=e&&m>=n&&g[f]===p[m]){b[u]=f--;m--}if(i%2===0&&-l<=d&&d<=l){if(b[u]<=h[u+i]){return v(b[u],d+e-n,t,o)}}}}return null};const t=[];c(0,g.length,0,p.length,t);return t};const JR=e=>{if(ze(e)){return e.outerHTML}else if(je(e)){return pa.encodeRaw(e.data,false)}else if(Br(e)){return"\x3c!--"+e.data+"--\x3e"}return""};const ZR=e=>{let t;const n=document.createElement("div");const o=document.createDocumentFragment();if(e){n.innerHTML=e}while(t=n.firstChild){o.appendChild(t)}return o};const eA=(e,t,n)=>{const o=ZR(t);if(e.hasChildNodes()&&n<e.childNodes.length){const s=e.childNodes[n];e.insertBefore(o,s)}else{e.appendChild(o)}};const tA=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}};const nA=(e,t)=>{let n=0;Le(e,e=>{if(e[0]===GR){n++}else if(e[0]===YR){eA(t,e[1],n);n++}else if(e[0]===XR){tA(t,n)}})};const oA=e=>{return S(y(We(e.childNodes),JR),e=>{return e.length>0})};const sA=(e,t)=>{const n=y(We(t.childNodes),JR);nA(QR(n,e),t);return t};const rA=ft(()=>document.implementation.createHTMLDocument("undo"));const iA=e=>{return e.indexOf("</iframe>")!==-1};const cA=e=>{return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}};const aA=e=>{return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}};const lA=n=>{const e=oA(n.getBody());const t=ge(e,e=>{const t=$C(n.serializer,e);return t.length>0?[t]:[]});const o=t.join("");return iA(o)?cA(t):aA(o)};const dA=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;if(t.type==="fragmented"){sA(t.fragments,e.getBody())}else{e.setContent(t.content,{format:"raw",no_selection:De(o)&&dp(o)?!o.isFakeCaret:true})}if(o){e.selection.moveToBookmark(o);e.selection.scrollIntoView()}};const uA=e=>{return e.type==="fragmented"?e.fragments.join(""):e.content};const fA=e=>{const t=Fe.fromTag("body",rA());Gs(t,uA(e));Le(hr(t,"*[data-mce-bogus]"),Vs);return Ks(t)};const mA=(e,t)=>uA(e)===uA(t);const gA=(e,t)=>fA(e)===fA(t);const pA=(e,t)=>{if(!e||!t){return false}else if(mA(e,t)){return true}else{return gA(e,t)}};const hA=e=>e.get()===0;const bA=(e,t,n)=>{if(hA(n)){e.typing=t}};const vA=(e,t)=>{if(e.typing){bA(e,false,t);e.add()}};const yA=e=>{if(e.typing){e.typing=false;e.add()}};const CA=(e,t,n)=>{if(hA(t)){n.set(vu(e.selection))}};const wA=(e,t,n,o,s,r,i)=>{const c=lA(e);const a=U.extend(r||{},c);if(!hA(o)||e.removed){return null}const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:a,lastLevel:l,originalEvent:i}).isDefaultPrevented()){return null}if(l&&pA(l,a)){return null}if(t.data[n.get()]){s.get().each(e=>{t.data[n.get()].beforeBookmark=e})}const d=$f(e);if(d){if(t.data.length>d){for(let e=0;e<t.data.length-1;e++){t.data[e]=t.data[e+1]}t.data.length--;n.set(t.data.length)}}a.bookmark=vu(e.selection);if(n.get()<t.data.length-1){t.data.length=n.get()+1}t.data.push(a);n.set(t.data.length-1);const u={level:a,lastLevel:l,originalEvent:i};if(n.get()>0){e.setDirty(true);e.dispatch("AddUndo",u);e.dispatch("change",u)}else{e.dispatch("AddUndo",u)}return a};const xA=(e,t,n)=>{t.data=[];n.set(0);t.typing=false;e.dispatch("ClearUndos")};const kA=(e,t,n,o,s)=>{if(t.transact(o)){const r=t.data[n.get()].bookmark;const i=t.data[n.get()-1];dA(e,i,true);if(t.transact(s)){t.data[n.get()-1].beforeBookmark=r}}};const EA=(e,t,n)=>{let o;if(t.get()<n.length-1){t.set(t.get()+1);o=n[t.get()];dA(e,o,false);e.setDirty(true);e.dispatch("Redo",{level:o})}return o};const SA=(e,t,n,o)=>{let s;if(t.typing){t.add();t.typing=false;bA(t,false,n)}if(o.get()>0){o.set(o.get()-1);s=t.data[o.get()];dA(e,s,true);e.setDirty(true);e.dispatch("Undo",{level:s})}return s};const _A=e=>{e.clear();e.add()};const NA=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!pA(lA(e),t.data[0]);const RA=(e,t)=>t.get()<e.data.length-1&&!e.typing;const AA=(e,t,n)=>{vA(e,t);e.beforeChange();e.ignore(n);return e.add()};const DA=(e,t)=>{try{e.set(e.get()+1);t()}finally{e.set(e.get()-1)}};const OA=(o,e)=>{const s=o.dom;const t=De(e)?e:o.getBody();Le(s.select("table,a",t),t=>{switch(t.nodeName){case"TABLE":const n=Qf(o);const e=s.getAttrib(t,"border");if((!e||e==="0")&&o.hasVisual){s.addClass(t,n)}else{s.removeClass(t,n)}break;case"A":if(!s.getAttrib(t,"href")){const e=s.getAttrib(t,"name")||t.id;const n=Jf(o);if(e&&o.hasVisual){s.addClass(t,n)}else{s.removeClass(t,n)}}break}});o.dispatch("VisualAid",{element:e,hasVisual:o.hasVisual})};const TA=i=>({init:{bindEvents:Te},undoManager:{beforeChange:(e,t)=>CA(i,e,t),add:(e,t,n,o,s,r)=>wA(i,e,t,n,o,s,r),undo:(e,t,n)=>SA(i,e,t,n),redo:(e,t)=>EA(i,e,t),clear:(e,t)=>xA(i,e,t),reset:e=>_A(e),hasUndo:(e,t)=>NA(i,e,t),hasRedo:(e,t)=>RA(e,t),transact:(e,t,n)=>AA(e,t,n),ignore:(e,t)=>DA(e,t),extra:(e,t,n,o)=>kA(i,e,t,n,o)},formatter:{match:(e,t,n,o)=>wE(i,e,t,n,o),matchAll:(e,t)=>xE(i,e,t),matchNode:(e,t,n,o)=>CE(i,e,t,n,o),canApply:e=>EE(i,e),closest:e=>kE(i,e),apply:(e,t,n)=>YS(i,e,t,n),remove:(e,t,n,o)=>US(i,e,t,n,o),toggle:(e,t,n)=>r_(i,e,t,n),formatChanged:(e,t,n,o,s)=>s_(i,e,t,n,o,s)},editor:{getContent:e=>XC(i,e),setContent:(e,t)=>lE(i,e,t),insertContent:(e,t)=>oE(i,e,t),addVisual:e=>OA(i,e)},selection:{getContent:(e,t)=>KR(i,e,t)},autocompleter:{addDecoration:e=>DC(i,e),removeDecoration:()=>BC(i,Fe.fromDom(i.getBody()))},raw:{getModel:()=>C.none()}});const BA=e=>{const s=e=>I(e)?e:{};const{init:t,undoManager:r,formatter:i,editor:n,selection:o,autocompleter:c,raw:a}=e;return{init:{bindEvents:t.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(e,t,n)=>r.transact(n),ignore:(e,t)=>r.ignore(t),extra:(e,t,n,o)=>r.extra(n,o)},formatter:{match:(e,t,n,o)=>i.match(e,s(t),o),matchAll:i.matchAll,matchNode:i.matchNode,canApply:e=>i.canApply(e),closest:e=>i.closest(e),apply:(e,t,n)=>i.apply(e,s(t)),remove:(e,t,n,o)=>i.remove(e,s(t)),toggle:(e,t,n)=>i.toggle(e,s(t)),formatChanged:(e,t,n,o,s)=>i.formatChanged(t,n,o,s)},editor:{getContent:e=>n.getContent(e),setContent:(e,t)=>{return{content:n.setContent(e,t),html:""}},insertContent:(e,t)=>{n.insertContent(e);return""},addVisual:n.addVisual},selection:{getContent:(e,t)=>o.getContent(t)},autocompleter:{addDecoration:c.addDecoration,removeDecoration:c.removeDecoration},raw:{getModel:()=>C.some(a.getRawModel())}}};const PA=()=>{const e=Be(null);const t=Be("");return{init:{bindEvents:Te},undoManager:{beforeChange:Te,add:e,undo:e,redo:e,clear:Te,reset:Te,hasUndo:a,hasRedo:a,transact:e,ignore:Te,extra:Te},formatter:{match:a,matchAll:Be([]),matchNode:Be(undefined),canApply:a,closest:t,apply:Te,remove:Te,toggle:Te,formatChanged:Be({unbind:Te})},editor:{getContent:t,setContent:Be({content:"",html:""}),insertContent:Be(""),addVisual:Te},selection:{getContent:t},autocompleter:{addDecoration:Te,removeDecoration:Te},raw:{getModel:Be(C.none())}}};const LA=e=>Ie(e.plugins,"rtc");const MA=e=>p(e.plugins,"rtc").bind(e=>C.from(e.setup));const IA=e=>{const t=e;return MA(e).fold(()=>{t.rtcInstance=TA(e);return C.none()},e=>{t.rtcInstance=PA();return C.some(()=>e().then(e=>{t.rtcInstance=BA(e);return e.rtc.isRemote}))})};const FA=e=>e.rtcInstance?e.rtcInstance:TA(e);const c=e=>{const t=e.rtcInstance;if(!t){throw new Error("Failed to get RTC instance not yet initialized.")}else{return t}};const UA=(e,t,n)=>{c(e).undoManager.beforeChange(t,n)};const zA=(e,t,n,o,s,r,i)=>c(e).undoManager.add(t,n,o,s,r,i);const jA=(e,t,n,o)=>c(e).undoManager.undo(t,n,o);const HA=(e,t,n)=>c(e).undoManager.redo(t,n);const $A=(e,t,n)=>{c(e).undoManager.clear(t,n)};const VA=(e,t)=>{c(e).undoManager.reset(t)};const qA=(e,t,n)=>c(e).undoManager.hasUndo(t,n);const WA=(e,t,n)=>c(e).undoManager.hasRedo(t,n);const KA=(e,t,n,o)=>c(e).undoManager.transact(t,n,o);const GA=(e,t,n)=>{c(e).undoManager.ignore(t,n)};const YA=(e,t,n,o,s)=>{c(e).undoManager.extra(t,n,o,s)};const XA=(e,t,n,o,s)=>c(e).formatter.match(t,n,o,s);const QA=(e,t,n)=>c(e).formatter.matchAll(t,n);const JA=(e,t,n,o,s)=>c(e).formatter.matchNode(t,n,o,s);const ZA=(e,t)=>c(e).formatter.canApply(t);const eD=(e,t)=>c(e).formatter.closest(t);const tD=(e,t,n,o)=>{c(e).formatter.apply(t,n,o)};const nD=(e,t,n,o,s)=>{c(e).formatter.remove(t,n,o,s)};const oD=(e,t,n,o)=>{c(e).formatter.toggle(t,n,o)};const sD=(e,t,n,o,s,r)=>c(e).formatter.formatChanged(t,n,o,s,r);const rD=(e,t)=>FA(e).editor.getContent(t);const iD=(e,t,n)=>FA(e).editor.setContent(t,n);const cD=(e,t,n)=>FA(e).editor.insertContent(t,n);const aD=(e,t,n)=>c(e).selection.getContent(t,n);const lD=(e,t)=>c(e).editor.addVisual(t);const dD=e=>c(e).init.bindEvents();const uD=(e,t)=>c(e).autocompleter.addDecoration(t);const fD=e=>c(e).autocompleter.removeDecoration();const mD=(e,t={})=>{const n=t.format?t.format:"html";return aD(e,n,t)};const gD=e=>{if(e.dom.length===0){Ue(e);return C.none()}else{return C.some(e)}};const pD=(e,t)=>e.filter(e=>cb.isBookmarkNode(e.dom)).bind(t?Ko:Wo);const hD=(e,t,n,o)=>{const s=e.dom;const r=t.dom;const i=o?s.length:r.length;if(o){hw(s,r,false,!o);n.setStart(r,i)}else{hw(r,s,false,!o);n.setEnd(r,i)}};const bD=(n,o)=>{Ho(n).each(e=>{const t=n.dom;if(o&&ew(e,M(t,0))){gw(t,0)}else if(!o&&nw(e,M(t,t.length))){pw(t,t.length)}})};const vD=(e,n,o,s)=>{e.bind(t=>{const e=s?pw:gw;e(t.dom,s?t.dom.length:0);return n.filter(eo).map(e=>hD(t,e,o,s))}).orThunk(()=>{const e=pD(n,s).or(n).filter(eo);return e.map(e=>bD(e,s))})};const yD=(e,t)=>{const n=C.from(t.firstChild).map(Fe.fromDom);const o=C.from(t.lastChild).map(Fe.fromDom);e.deleteContents();e.insertNode(t);const s=n.bind(Wo).filter(eo).bind(gD);const r=o.bind(Ko).filter(eo).bind(gD);vD(s,n,e,true);vD(r,o,e,false);e.collapse(false)};const CD=(e,t)=>({format:"html",...e,set:true,selection:true,content:t});const wD=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng();const o=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock);const s=o?{context:o.nodeName.toLowerCase()}:{};const r=e.parser.parse(t.content,{forced_root_block:false,...s,...t});return ZC({validate:false},e.schema).serialize(r)}else{return t.content}};const xD=(o,e,t={})=>{const n=CD(t,e);uR(o,n).each(e=>{const t=wD(o,e);const n=o.selection.getRng();yD(n,n.createContextualFragment(t));o.selection.setRng(n);hy(o,n);fR(o,t,e)})};const kD=(e,t,n)=>{if(Ie(e,t)){const o=S(e[t],e=>e!==n);if(o.length===0){delete e[t]}else{e[t]=o}}};var ED=(n,o)=>{let r;let i;const c=(t,e)=>ue(e,e=>n.is(e,t));const a=e=>n.getParents(e,undefined,n.getRoot());const s=()=>{r={};i={};o.on("NodeChange",e=>{const n=e.element;const o=a(n);const s={};Me(r,(e,n)=>{c(n,o).each(t=>{if(!i[n]){Le(e,e=>{e(true,{node:t,selector:n,parents:o})});i[n]=e}s[n]=e})});Me(i,(e,t)=>{if(!s[t]){delete i[t];Le(e,e=>{e(false,{node:n,selector:t,parents:o})})}})})};return{selectorChangedWithUnbind:(e,t)=>{if(!r){s()}if(!r[e]){r[e]=[]}r[e].push(t);c(e,a(o.selection.getStart())).each(()=>{i[e]=r[e]});return{unbind:()=>{kD(r,e,t);kD(i,e,t)}}}}};const SD=e=>{return!!(e&&e.ownerDocument)&&Io(Fe.fromDom(e.ownerDocument),Fe.fromDom(e))};const _D=e=>{if(!e){return false}else{return SD(e.startContainer)&&SD(e.endContainer)}};const ND=(i,c,e,a)=>{let l;let d;const{selectorChangedWithUnbind:n}=ED(i,a);const t=(e,t)=>{const n=i.createRng();if(De(e)&&De(t)){n.setStart(e,t);n.setEnd(e,t);C(n);b(false)}else{th(i,n,a.getBody(),true);C(n)}};const o=e=>mD(a,e);const s=(e,t)=>xD(a,e,t);const r=e=>gC(a.getBody(),y(),e);const u=e=>pC(a.getBody(),y(),e);const f=(e,t)=>P.getBookmark(e,t);const m=e=>P.moveToBookmark(e);const g=(e,t)=>{yC(i,e,t).each(C);return e};const p=()=>{const e=y(),t=v();if(!e||e.item){return false}if(e.compareEndPoints){return e.compareEndPoints("StartToEnd",e)===0}return!t||e.collapsed};const h=()=>{const e=y();const t=a.getBody().querySelectorAll('[data-mce-selected="1"]');if(t.length>0){return qe(t,e=>i.isEditable(e.parentElement))}else if(e.startContainer===e.endContainer){return i.isEditable(e.startContainer)}else{return i.isEditable(e.startContainer)&&i.isEditable(e.endContainer)}};const b=e=>{const t=y();t.collapse(!!e);C(t)};const v=()=>c.getSelection?c.getSelection():c.document.selection;const y=()=>{let e;const t=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};const n=c.document;if(De(a.bookmark)&&!aC(a)){const o=Ty(a);if(o.isSome()){return o.map(e=>CC(a,[e])[0]).getOr(n.createRange())}}try{const s=v();if(s&&!Cr(s.anchorNode)){if(s.rangeCount>0){e=s.getRangeAt(0)}else{e=n.createRange()}e=CC(a,[e])[0]}}catch(e){}if(!e){e=n.createRange()}if(Pr(e.startContainer)&&e.collapsed){const r=i.getRoot();e.setStart(r,0);e.setEnd(r,0)}if(l&&d){if(t(e.START_TO_START,e,l)===0&&t(e.END_TO_END,e,l)===0){e=d}else{l=null;d=null}}return e};const C=(e,t)=>{if(!_D(e)){return}const n=v();const o=a.dispatch("SetSelectionRange",{range:e,forward:t});e=o.range;if(n){d=e;try{n.removeAllRanges();n.addRange(e)}catch(e){}if(t===false&&n.extend){n.collapse(e.endContainer,e.endOffset);n.extend(e.startContainer,e.startOffset)}l=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(n===null||n===void 0?void 0:n.setBaseAndExtent)){if(e.endOffset-e.startOffset<2){if(e.startContainer.hasChildNodes()){const s=e.startContainer.childNodes[e.startOffset];if(s&&s.nodeName==="IMG"){n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset);if(n.anchorNode!==e.startContainer||n.focusNode!==e.endContainer){n.setBaseAndExtent(s,0,s,1)}}}}}a.dispatch("AfterSetSelectionRange",{range:e,forward:t})};const w=e=>{s(i.getOuterHTML(e));return e};const x=()=>bC(a.getBody(),y());const k=(e,t)=>vC(i,y(),e,t);const E=()=>{const e=v();const t=e===null||e===void 0?void 0:e.anchorNode;const n=e===null||e===void 0?void 0:e.focusNode;if(!e||!t||!n||Cr(t)||Cr(n)){return true}const o=i.createRng();const s=i.createRng();try{o.setStart(t,e.anchorOffset);o.collapse(true);s.setStart(n,e.focusOffset);s.collapse(true)}catch(e){return true}return o.compareBoundaryPoints(o.START_TO_START,s)<=0};const S=()=>{const e=y();const t=v();if(!Vp(t)&&nh(a)){const n=Lv(i,e);n.each(e=>{C(e,E())});return n.getOr(e)}return e};const _=(e,t)=>{n(e,t);return B};const N=()=>{let e;let t=i.getRoot();while(t&&t.nodeName!=="BODY"){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e};const R=(e,t)=>{if(De(e)){py(a,e,t)}else{hy(a,y(),t)}};const A=(e,t)=>C(Ev(e,t,a.getDoc()));const D=()=>{const e=y();return e.collapsed?M.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()};const O=()=>{c=l=d=null;L.destroy()};const T=(e={type:"word"})=>C(Fv(i).expand(y(),e));const B={dom:i,win:c,serializer:e,editor:a,expand:T,collapse:b,setCursorLocation:t,getContent:o,setContent:s,getBookmark:f,moveToBookmark:m,select:g,isCollapsed:p,isEditable:h,isForward:E,setNode:w,getNode:x,getSel:v,setRng:C,getRng:y,getStart:r,getEnd:u,getSelectedBlocks:k,normalize:S,selectorChanged:_,selectorChangedWithUnbind:n,getScrollContainer:N,scrollIntoView:R,placeCaretAt:A,getBoundingClientRect:D,destroy:O};const P=cb(B);const L=Ub(B,a);B.bookmarkManager=P;B.controlSelection=L;return B};const RD=(t,a,l)=>{t.addAttributeFilter("data-mce-tabindex",(e,t)=>{let n=e.length;while(n--){const o=e[n];o.attr("tabindex",o.attr("data-mce-tabindex"));o.attr(t,null)}});t.addAttributeFilter("src,href,style",(t,n)=>{const o="data-mce-"+n;const s=a.url_converter;const r=a.url_converter_scope;let i=t.length;while(i--){const c=t[i];let e=c.attr(o);if(e!==undefined){c.attr(n,e.length>0?e:null);c.attr(o,null)}else{e=c.attr(n);if(n==="style"){e=l.serializeStyle(l.parseStyle(e),c.name)}else if(s){e=s.call(r,e,n,c.name)}c.attr(n,e.length>0?e:null)}}});t.addAttributeFilter("class",t=>{let n=t.length;while(n--){const o=t[n];let e=o.attr("class");if(e){e=e.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,"");o.attr("class",e.length>0?e:null)}}});t.addAttributeFilter("data-mce-type",(e,t,n)=>{let o=e.length;while(o--){const s=e[o];if(s.attr("data-mce-type")==="bookmark"&&!n.cleanup){const r=C.from(s.firstChild).exists(e=>{var t;return!Si((t=e.value)!==null&&t!==void 0?t:"")});if(r){s.unwrap()}else{s.remove()}}}});t.addNodeFilter("noscript",e=>{var t;let n=e.length;while(n--){const o=e[n].firstChild;if(o){o.value=pa.decode((t=o.value)!==null&&t!==void 0?t:"")}}});t.addNodeFilter("script,style",(e,o)=>{var s;const r=e=>{return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};let i=e.length;while(i--){const c=e[i];const t=c.firstChild;const n=(s=t===null||t===void 0?void 0:t.value)!==null&&s!==void 0?s:"";if(o==="script"){const e=c.attr("type");if(e){c.attr("type",e==="mce-no/type"?null:e.replace(/^mce\-/,""))}if(a.element_format==="xhtml"&&t&&n.length>0){t.value="// <![CDATA[\n"+r(n)+"\n// ]]>"}}else{if(a.element_format==="xhtml"&&t&&n.length>0){t.value="\x3c!--\n"+r(n)+"\n--\x3e"}}}});t.addNodeFilter("#comment",t=>{let n=t.length;while(n--){const o=t[n];const e=o.value;if(a.preserve_cdata&&(e===null||e===void 0?void 0:e.indexOf("[CDATA["))===0){o.name="#cdata";o.type=4;o.value=l.decode(e.replace(/^\[CDATA\[|\]\]$/g,""))}else if((e===null||e===void 0?void 0:e.indexOf("mce:protected "))===0){o.name="#text";o.type=3;o.raw=true;o.value=unescape(e).substr(14)}}});t.addNodeFilter("xml:namespace,input",(e,t)=>{let n=e.length;while(n--){const o=e[n];if(o.type===7){o.remove()}else if(o.type===1){if(t==="input"&&!o.attr("type")){o.attr("type","text")}}}});t.addAttributeFilter("data-mce-type",e=>{Le(e,e=>{if(e.attr("data-mce-type")==="format-caret"){if(e.isEmpty(t.schema.getNonEmptyElements())){e.remove()}else{e.unwrap()}}})});t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,"+"data-mce-selected,data-mce-expando,data-mce-block,"+"data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let n=e.length;while(n--){e[n].attr(t,null)}})};const AD=e=>{const t=e=>{return(e===null||e===void 0?void 0:e.name)==="br"};const n=e.lastChild;if(t(n)){const o=n.prev;if(t(o)){n.remove();o.remove()}}};const DD=(e,t,n)=>{let o;const s=e.dom;let r=t.cloneNode(true);const i=document.implementation;if(i.createHTMLDocument){const c=i.createHTMLDocument("");U.each(r.nodeName==="BODY"?r.childNodes:[r],e=>{c.body.appendChild(c.importNode(e,true))});if(r.nodeName!=="BODY"){r=c.body.firstChild}else{r=c.body}o=s.doc;s.doc=c}lb(e,{...n,node:r});if(o){s.doc=o}return r};const OD=(e,t)=>{return De(e)&&e.hasEventListeners("PreProcess")&&!t.no_events};const TD=(e,t,n)=>{return OD(e,n)?DD(e,t,n):t};const BD=(e,t,n)=>{if(U.inArray(t,n)===-1){e.addAttributeFilter(n,(e,t)=>{let n=e.length;while(n--){e[n].attr(t,null)}});t.push(n)}};const PD=(e,t,n)=>{if(!t.no_events&&e){const o=db(e,{...t,content:n});return o.content}else{return n}};const LD=(e,t,n)=>{const o=_i(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||hi(Fe.fromDom(t))?o:U.trim(o)};const MD=(e,t,n)=>{const o=n.selection?{forced_root_block:false,...n}:n;const s=e.parse(t,o);AD(s);return s};const ID=(e,t,n)=>{const o=ZC(e,t);return o.serialize(n)};const FD=(e,t,n,o,s)=>{const r=ID(t,n,o);return PD(e,s,r)};const UD=(i,c)=>{const e=["data-mce-selected"];const a=c&&c.dom?c.dom:He.DOM;const l=c&&c.schema?c.schema:Aa(i);i.entity_encoding=i.entity_encoding||"named";i.remove_trailing_brs="remove_trailing_brs"in i?i.remove_trailing_brs:true;const d=iR(i,l);RD(d,i,a);const t=(e,t={})=>{const n={format:"html",...t};const o=TD(c,e,n);const s=LD(a,o,n);const r=MD(d,s,n);return n.format==="tree"?r:FD(c,i,l,r,n)};return{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:t,addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:h(BD,d,e),getTempAttrs:Be(e),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}};const zD=(e,t)=>{const n=UD(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}};const jD="html";const HD=(e,t)=>({...e,format:t,get:true,getInner:true});const $D=(n,e={})=>{const t=e.format?e.format:jD;const o=HD(e,t);return lR(n,o).fold(Y,e=>{const t=rD(n,e);return dR(n,t,e)})};const VD="html";const qD=(e,t)=>({format:VD,...e,set:true,content:t});const WD=(n,e,t={})=>{const o=qD(t,e);return uR(n,o).map(e=>{const t=iD(n,e.content,e);fR(n,t.html,e);return t.content}).getOr(e)};const KD=("autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,"+"boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,"+"force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,"+"non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,"+"tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,"+"paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists").split(",");const GD="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(",");const YD="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(",");const XD=[{name:"template",replacedWith:"Advanced Template"}];const QD=(t,e)=>{const n=S(e,e=>Ie(t,e));return ve(n)};const JD=e=>{const t=QD(e,KD);const n=e.forced_root_block;if(n===false||n===""){t.push("forced_root_block (false only)")}return ve(t)};const ZD=e=>QD(e,GD);const e1=(e,t)=>{const n=U.makeMap(e.plugins," ");const o=e=>Ie(n,e);const s=S(t,o);return ve(s)};const t1=e=>e1(e,YD);const n1=e=>e1(e,XD.map(e=>e.name));const o1=(e,t)=>{const n=JD(e);const o=t1(t);const s=o.length>0;const r=n.length>0;const i=t.theme==="mobile";if(s||r||i){const c="\n- ";const a=i?`\n\nThemes:${c}mobile`:"";const l=s?`\n\nPlugins:${c}${o.join(c)}`:"";const d=r?`\n\nOptions:${c}${n.join(c)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. "+"See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+a+l+d)}};const s1=t=>ue(XD,e=>e.name===t).fold(()=>t,e=>`${t}, replaced by ${e.replacedWith}`);const r1=(e,t)=>{const n=ZD(e);const o=n1(t);const s=o.length>0;const r=n.length>0;if(s||r){const i="\n- ";const c=s?`\n\nPlugins:${i}${o.map(s1).join(i)}`:"";const a=r?`\n\nOptions:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+c+a)}};const i1=(e,t)=>{o1(e,t);r1(e,t)};const c1=He.DOM;const a1=e=>{c1.setStyle(e.id,"display",e.orgDisplay)};const l1=e=>C.from(e).each(e=>e.destroy());const d1=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null;t.bodyElement=t.contentDocument=t.contentWindow=null;t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const e=n.dom;t.selection=n.win=n.dom=e.doc=null}};const u1=e=>{const t=e.formElement;if(t){if(t._mceOldSubmit){t.submit=t._mceOldSubmit;delete t._mceOldSubmit}c1.unbind(t,"submit reset",e.formEventDelegate)}};const f1=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e;const o=e.getBody();const s=e.getElement();if(o){e.save({is_removing:true})}e.removed=true;e.unbindAllNativeEvents();if(e.hasHiddenInput&&De(s===null||s===void 0?void 0:s.nextSibling)){c1.remove(s.nextSibling)}ub(e);e.editorManager.remove(e);if(!e.inline&&o){a1(e)}fb(e);c1.remove(e.getContainer());l1(t);l1(n);e.destroy()}};const m1=(e,t)=>{const{selection:n,dom:o}=e;if(e.destroyed){return}if(!t&&!e.removed){e.remove();return}if(!t){e.editorManager.off("beforeunload",e._beforeUnload);if(e.theme&&e.theme.destroy){e.theme.destroy()}l1(n);l1(o)}u1(e);d1(e);e.destroyed=true};const g1=()=>{const n={};const e=(e,t)=>{n[e]=t};const t=e=>{if(n[e]){return n[e]}else{return{icons:{}}}};const o=e=>Ie(n,e);return{add:e,get:t,has:o}};const p1=g1();const h1=xl.ModelManager;const b1=(e,t)=>{const n=t.dom;return n[e]};const v1=(e,t)=>parseInt(Ds(t,e),10);const y1=h(b1,"clientWidth");const C1=h(b1,"clientHeight");const w1=h(v1,"margin-top");const x1=h(v1,"margin-left");const k1=e=>e.dom.getBoundingClientRect();const E1=(e,t,n)=>{const o=y1(e);const s=C1(e);return t>=0&&n>=0&&t<=o&&n<=s};const S1=(e,t,n,o)=>{const s=k1(t);const r=e?s.left+t.dom.clientLeft+x1(t):0;const i=e?s.top+t.dom.clientTop+w1(t):0;const c=n-r;const a=o-i;return{x:c,y:a}};const _1=(e,t,n)=>{const o=Fe.fromDom(e.getBody());const s=e.inline?o:zo(o);const r=S1(e.inline,s,t,n);return E1(s,r.x,r.y)};const N1=e=>C.from(e).map(Fe.fromDom);const R1=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return N1(t).map(fs).getOr(false)};var A1=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const D1=n=>{const o=[];const s=()=>{const e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():A1()};const r=()=>{return C.from(o[0])};const i=(e,t)=>{return e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout};const c=()=>{Le(o,e=>{e.reposition()})};const a=e=>{o.push(e)};const l=t=>{fe(o,e=>{return e===t}).each(e=>{o.splice(e,1)})};const d=(t,e=true)=>{if(n.removed||!R1(n)){return{}}if(e){n.dispatch("BeforeOpenNotification",{notification:t})}return ue(o,e=>{return i(s().getArgs(e),t)}).getOrThunk(()=>{n.editorManager.setActive(n);const e=s().open(t,()=>{l(e);c();r().fold(()=>n.focus(),e=>by(Fe.fromDom(e.getEl())))});a(e);c();n.dispatch("OpenNotification",{notification:{...e}});return e})};const e=()=>{r().each(e=>{s().close(e);l(e);c()})};const t=Be(o);const u=t=>{t.on("SkinLoaded",()=>{const e=Nf(t);if(e){d({text:e,type:"warning",timeout:0},false)}c()});t.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(c)});t.on("remove",()=>{Le(o.slice(),e=>{s().close(e)})})};u(n);return{open:d,close:e,getNotifications:t}};const O1=xl.PluginManager;const T1=xl.ThemeManager;var B1=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const P1=n=>{let o=[];const s=()=>{const e=n.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():B1()};const r=(t,n)=>{return(...e)=>{return n?n.apply(t,e):undefined}};const t=e=>{n.dispatch("OpenWindow",{dialog:e})};const e=e=>{n.dispatch("CloseWindow",{dialog:e})};const i=e=>{o.push(e);t(e)};const c=t=>{e(t);o=S(o,e=>{return e!==t});if(o.length===0){n.focus()}};const a=()=>{return C.from(o[o.length-1])};const l=e=>{n.editorManager.setActive(n);Oy(n);n.ui.show();const t=e();i(t);return t};const d=(e,t)=>{return l(()=>s().open(e,t,c))};const u=e=>{return l(()=>s().openUrl(e,c))};const f=(e,t,n)=>{const o=s();o.alert(e,r(n?n:o,t))};const m=(e,t,n)=>{const o=s();o.confirm(e,r(n?n:o,t))};const g=()=>{a().each(e=>{s().close(e);c(e)})};n.on("remove",()=>{Le(o,e=>{s().close(e)})});return{open:d,openUrl:u,alert:f,confirm:m,close:g}};const L1=(e,t)=>{e.notificationManager.open({type:"error",text:t})};const M1=t((e,t)=>{if(e._skinLoaded){L1(e,t)}else{e.on("SkinLoaded",()=>{L1(e,t)})}},300);const I1=(e,t)=>{M1(e,wl.translate(["Failed to upload image: {0}",t]))};const F1=(e,t,n)=>{Cb(e,t,{message:n});console.error(n)};const U1=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`;const z1=(e,t,n)=>{F1(e,"PluginLoadError",U1("plugin",t,n))};const j1=(e,t,n)=>{F1(e,"IconsLoadError",U1("icons",t,n))};const H1=(e,t,n)=>{F1(e,"LanguageLoadError",U1("language",t,n))};const $1=(e,t,n)=>{F1(e,"ThemeLoadError",U1("theme",t,n))};const V1=(e,t,n)=>{F1(e,"ModelLoadError",U1("model",t,n))};const q1=(e,t,n)=>{const o=wl.translate(["Failed to initialize plugin: {0}",t]);Cb(e,"PluginLoadError",{message:o});W1(o,n);M1(e,o)};const W1=(e,...t)=>{const n=window.console;if(n){if(n.error){n.error(e,...t)}else{n.log(e,...t)}}};const K1=e=>/^[a-z0-9\-]+$/i.test(e);const G1=e=>{return X1(e,vf(e))};const Y1=e=>{return X1(e,Cf(e))};const X1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content";const o=t.editorManager.suffix;const s=`content${o}.css`;return y(e,e=>{if(K1(e)&&!t.inline){return`${n}/${e}/${s}`}else{return t.documentBaseURI.toAbsolute(e)}})};const Q1=e=>{e.contentCSS=e.contentCSS.concat(G1(e),Y1(e))};const J1=e=>{return e?We(e.getElementsByTagName("img")):[]};const Z1=(s,r)=>{const i={};const e=(e,n=f)=>{const t=S(J1(e),e=>{const t=e.src;if(e.hasAttribute("data-mce-bogus")){return false}if(e.hasAttribute("data-mce-placeholder")){return false}if(!t||t===H.transparentSrc){return false}if(Rt(t,"blob:")){return!s.isUploaded(t)&&n(e)}if(Rt(t,"data:")){return n(e)}return false});const o=y(t,t=>{const n=t.src;if(Ie(i,n)){return i[n].then(e=>{if(Re(e)){return e}else{return{image:t,blobInfo:e.blobInfo}}})}else{const e=S_(r,n).then(e=>{delete i[n];return{image:t,blobInfo:e}}).catch(e=>{delete i[n];return e});i[n]=e;return e}});return Promise.all(o)};return{findAll:e}};const eO=()=>{const t=1,n=2;let o={};const s=(e,t)=>{return{status:e,resultUri:t}};const r=e=>{return e in o};const e=e=>{const t=o[e];return t?t.resultUri:null};const i=e=>{return r(e)?o[e].status===t:false};const c=e=>{return r(e)?o[e].status===n:false};const a=e=>{o[e]=s(t,null)};const l=(e,t)=>{o[e]=s(n,t)};const d=e=>{delete o[e]};const u=()=>{o={}};return{hasBlobUri:r,getResultUri:e,isPending:i,isUploaded:c,markPending:a,markUploaded:l,removeFailed:d,destroy:u}};let tO=0;const nO=()=>{const e=()=>{return Math.round(Math.random()*4294967295).toString(36)};const t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()};const oO=e=>{return e+tO+++nO()};const sO=()=>{let n=[];const s=e=>{const t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return t[e.toLowerCase()]||"dat"};const e=(e,t,n,o,s)=>{if(Re(e)){const r=e;return i({id:r,name:o,filename:s,blob:t,base64:n})}else if(I(e)){return i(e)}else{throw new Error("Unknown input type")}};const i=e=>{if(!e.blob||!e.base64){throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")}const t=e.id||oO("blobid");const n=e.name||t;const o=e.blob;return{id:Be(t),name:Be(n),filename:Be(e.filename||n+"."+s(o.type)),blob:Be(o),base64:Be(e.base64),blobUri:Be(e.blobUri||u.createObjectURL(o)),uri:Be(e.uri)}};const t=e=>{if(!r(e.id())){n.push(e)}};const o=e=>ue(n,e).getOrUndefined();const r=t=>o(e=>e.id()===t);const c=t=>o(e=>e.blobUri()===t);const a=(t,n)=>o(e=>e.base64()===t&&e.blob().type===n);const l=t=>{n=S(n,e=>{if(e.blobUri()===t){u.revokeObjectURL(e.blobUri());return false}return true})};const d=()=>{Le(n,e=>{u.revokeObjectURL(e.blobUri())});n=[]};return{create:e,add:t,get:r,getByUri:c,getByData:a,findFirst:o,removeByUri:l,destroy:d}};const rO=(l,i)=>{const n={};const c=(e,t)=>{if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};const t=(s,r)=>new Promise((t,n)=>{const o=new XMLHttpRequest;o.open("POST",i.url);o.withCredentials=i.credentials;o.upload.onprogress=e=>{r(e.loaded/e.total*100)};o.onerror=()=>{n("Image upload failed due to a XHR Transport error. Code: "+o.status)};o.onload=()=>{if(o.status<200||o.status>=300){n("HTTP Error: "+o.status);return}const e=JSON.parse(o.responseText);if(!e||!Re(e.location)){n("Invalid JSON: "+o.responseText);return}t(c(i.basePath,e.location))};const e=new FormData;e.append("file",s.blob(),s.filename());o.send(e)});const o=Oe(i.handler)?i.handler:t;const s=()=>new Promise(e=>{e([])});const d=(e,t)=>({url:t,blobInfo:e,status:true});const u=(e,t)=>({url:"",blobInfo:e,status:false,error:t});const f=(e,t)=>{U.each(n[e],e=>{e(t)});delete n[e]};const r=(i,c,a)=>{l.markPending(i.blobUri());return new Promise(t=>{let n;let e;try{const o=()=>{if(n){n.close();e=Te}};const s=e=>{o();l.markUploaded(i.blobUri(),e);f(i.blobUri(),d(i,e));t(d(i,e))};const r=e=>{o();l.removeFailed(i.blobUri());f(i.blobUri(),u(i,e));t(u(i,e))};e=t=>{if(t<0||t>100){return}C.from(n).orThunk(()=>C.from(a).map(Z)).each(e=>{n=e;e.progressBar.value(t)})};c(i,e).then(s,e=>{r(Re(e)?{message:e}:e)})}catch(e){t(u(i,e))}})};const a=e=>e===t;const m=e=>{const t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[];n[t].push(e)})};const g=(e,t)=>{e=U.grep(e,e=>!l.isUploaded(e.blobUri()));return Promise.all(U.map(e,e=>l.isPending(e.blobUri())?m(e):r(e,o,t)))};const e=(e,t)=>!i.url&&a(o)?s():g(e,t);return{upload:e}};const iO=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:true});const cO=(e,t)=>rO(t,{url:af(e),basePath:lf(e),credentials:df(e),handler:uf(e)});const aO=n=>{const e=eO();const o=cO(n,e);return{upload:(e,t=true)=>o.upload(e,t?iO(n):undefined)}};const lO=a=>{const l=sO();let t,e;const r=eO();const n=[];const o=t=>{return e=>{if(a.selection){return t(e)}return[]}};const s=e=>e+(e.indexOf("?")===-1?"?":"&")+(new Date).getTime();const i=(e,t,n)=>{let o=0;do{o=e.indexOf(t,o);if(o!==-1){e=e.substring(0,o)+n+e.substr(o+t.length);o+=n.length-t.length+1}}while(o!==-1);return e};const c=(e,t,n)=>{const o=`src="${n}"${n===H.transparentSrc?' data-mce-placeholder="1"':""}`;e=i(e,`src="${t}"`,o);e=i(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"');return e};const d=(t,n)=>{Le(a.undoManager.data,e=>{if(e.type==="fragmented"){e.fragments=y(e.fragments,e=>c(e,t,n))}else{e.content=c(e.content,t,n)}})};const u=(e,t)=>{const n=a.convertURL(t,"src");d(e.src,t);io(Fe.fromDom(e),{src:of(a)?s(t):t})};const f=()=>{if(!t){t=cO(a,r)}return h().then(o(c=>{const e=y(c,e=>e.blobInfo);return t.upload(e,iO(a)).then(o(e=>{const r=[];let i=false;const t=y(e,(e,t)=>{const{blobInfo:n,image:o}=c[t];let s=false;if(e.status&&sf(a)){if(e.url&&!Nt(o.src,e.url)){i=true}l.removeByUri(o.src);if(LA(a));else{u(o,e.url)}}else if(e.error){if(e.error.remove){d(o.src,H.transparentSrc);r.push(o);s=true}I1(a,e.error.message)}return{element:o,status:e.status,uploadUri:e.url,blobInfo:n,removed:s}});if(r.length>0&&!LA(a)){a.undoManager.transact(()=>{Le(r,e=>{a.dom.remove(e);l.removeByUri(e.src)})})}else if(i){a.undoManager.dispatchChange()}return t}))}))};const m=()=>nf(a)?f():Promise.resolve([]);const g=t=>qe(n,e=>e(t));const p=e=>{n.push(e)};const h=()=>{if(!e){e=Z1(r,l)}return e.findAll(a.getBody(),g).then(o(e=>{const t=S(e,e=>{if(Re(e)){M1(a,e);return false}else{return true}});if(LA(a));else{Le(t,e=>{d(e.image.src,e.blobInfo.blobUri());e.image.src=e.blobInfo.blobUri();e.image.removeAttribute("data-mce-src")})}return t}))};const b=()=>{l.destroy();r.destroy();e=t=null};const v=e=>{return e.replace(/src="(blob:[^"]+)"/g,(e,n)=>{const t=r.getResultUri(n);if(t){return'src="'+t+'"'}let o=l.getByUri(n);if(!o){o=le(a.editorManager.get(),(e,t)=>{return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},undefined)}if(o){const s=o.blob();return'src="data:'+s.type+";base64,"+o.base64()+'"'}return e})};a.on("SetContent",e=>{if(nf(a)&&!e.set_html_not_auto_upload){m()}else{h()}});a.on("RawSaveContent",e=>{e.content=v(e.content)});a.on("GetContent",e=>{if(e.source_view||e.format==="raw"||e.format==="tree"){return}e.content=v(e.content)});a.on("PostRender",()=>{a.parser.addNodeFilter("img",e=>{Le(e,e=>{const t=e.attr("src");if(!t||l.getByUri(t)){return}const n=r.getResultUri(t);if(n){e.attr("src",n)}})})});return{blobCache:l,addFilter:p,uploadImages:f,uploadImagesAuto:m,scanForImages:h,destroy:b}};const dO=e=>{const o=e.dom;const s=e.schema.type;const t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:false,classes:"align-left",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:false,preview:false},{selector:"img,audio,video",collapsed:false,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:false,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:true,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:false,preview:"font-family font-size"},{selector:"figure.image",collapsed:false,classes:"align-center",ceFalseOverride:true,preview:"font-family font-size"},{selector:"audio,video",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:true,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"[data-ephox-embed-iri]",ceFalseOverride:true,styles:{marginLeft:"auto",marginRight:"auto"},preview:false}],alignright:[{selector:"figure.image",collapsed:false,classes:"align-right",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:false,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:false,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:false,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:true,styles:{float:"right"},preview:false}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify",textAlignLast:"justify"},inherit:false,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:true};const t={inline:"strike",remove:"all",preserve_attributes:["class","style"]};const n={inline:"s",remove:"all",preserve_attributes:["class","style"]};return s!=="html4"?[n,e,t]:[e,n,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:"span",toggle:false,styles:{fontFamily:"%value"},clear_child_styles:true},fontsize:{inline:"span",toggle:false,styles:{fontSize:"%value"},clear_child_styles:true},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:true,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:(e,t,n)=>{return ze(e)&&e.hasAttribute("href")},onformat:(n,e,t)=>{U.each(t,(e,t)=>{o.setAttrib(n,t,e)})}},lang:{inline:"span",clear_child_styles:true,remove_similar:true,attributes:{lang:"%value","data-mce-lang":e=>{var t;return(t=e===null||e===void 0?void 0:e.customValue)!==null&&t!==void 0?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]};U.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{t[e]={block:e,remove:"all"}});return t};const uO={remove_similar:true,inherit:false};const fO={selector:"td,th",...uO};const mO={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...fO},tablecellverticalalign:{styles:{"vertical-align":"%value"},...fO},tablecellbordercolor:{styles:{borderColor:"%value"},...fO},tablecellclass:{classes:["%value"],...fO},tableclass:{selector:"table",classes:["%value"],...uO},tablecellborderstyle:{styles:{borderStyle:"%value"},...fO},tablecellborderwidth:{styles:{borderWidth:"%value"},...fO}};const gO=Be(mO);const pO=e=>{const n={};const t=e=>De(e)?n[e]:n;const o=e=>Ie(n,e);const s=(e,t)=>{if(e){if(!Re(e)){Me(e,(e,t)=>{s(t,e)})}else{if(!Ve(t)){t=[t]}Le(t,e=>{if(V(e.deep)){e.deep=!Dh(e)}if(V(e.split)){e.split=!Dh(e)||Oh(e)}if(V(e.remove)&&Dh(e)&&!Oh(e)){e.remove="none"}if(Dh(e)&&Oh(e)){e.mixed=true;e.block_expand=true}if(Re(e.classes)){e.classes=e.classes.split(/\s+/)}});n[e]=t}}};const r=e=>{if(e&&n[e]){delete n[e]}return n};s(dO(e));s(gO());s(Bf(e));return{get:t,has:o,register:s,unregister:r}};const hO=U.each;const bO=He.DOM;const vO=e=>De(e)&&I(e);const yO=(t,e)=>{const s=e&&e.schema||Aa({});const o=(e,t)=>{if(t.classes.length>0){bO.addClass(e,t.classes.join(" "))}bO.setAttribs(e,t.attrs)};const l=e=>{const t=Re(e)?{name:e,classes:[],attrs:{}}:e;const n=bO.create(t.name);o(n,t);return n};const d=(e,t)=>{const n=s.getElementRule(e.nodeName.toLowerCase());const o=n===null||n===void 0?void 0:n.parentsRequired;if(o&&o.length){return t&&m(o,t)?t:o[0]}else{return false}};const u=(n,e,t)=>{let o;const s=e[0];const r=vO(s)?s.name:undefined;const i=d(n,r);if(i){if(r===i){o=s;e=e.slice(1)}else{o=i}}else if(s){o=s;e=e.slice(1)}else if(!t){return n}const c=o?l(o):bO.create("div");c.appendChild(n);if(t){U.each(t,e=>{const t=l(e);c.insertBefore(t,n)})}const a=vO(o)?o.siblings:undefined;return u(c,e,a)};const n=bO.create("div");if(t.length>0){const r=t[0];const i=l(r);const e=vO(r)?r.siblings:undefined;n.appendChild(u(i,t.slice(1),e))}return n};const CO=e=>{e=U.trim(e);let t="div";const i={name:t,classes:[],attrs:{},selector:e};if(e!=="*"){t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,n,o,s)=>{switch(t){case"#":i.attrs.id=n;break;case".":i.classes.push(n);break;case":":if(U.inArray("checked disabled enabled read-only required".split(" "),n)!==-1){i.attrs[n]=n}break}if(o==="["){const r=s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);if(r){i.attrs[r[1]]=r[2]}}return""})}i.name=t||"div";return i};const wO=e=>{if(!Re(e)){return[]}e=e.split(/\s*,\s*/)[0];e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return U.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{const t=U.map(e.split(/(?:~\+|~|\+)/),CO);const n=t.pop();if(t.length){n.siblings=t}return n}).reverse()};const xO=(n,e)=>{let o="";let t=Pf(n);if(t===""){return""}const s=e=>{return Re(e)?e.replace(/%(\w+)/g,""):""};const r=(e,t)=>{return bO.getStyle(t!==null&&t!==void 0?t:n.getBody(),e,true)};if(Re(e)){const f=n.formatter.get(e);if(!f){return""}e=f[0]}if("preview"in e){const m=e.preview;if(m===false){return""}else{t=m||t}}let i=e.block||e.inline||"span";let c;const a=wO(e.selector);if(a.length>0){if(!a[0].name){a[0].name=i}i=e.selector;c=yO(a,n)}else{c=yO([i],n)}const l=bO.select(i,c)[0]||c.firstChild;hO(e.styles,(e,t)=>{const n=s(e);if(n){bO.setStyle(l,t,n)}});hO(e.attributes,(e,t)=>{const n=s(e);if(n){bO.setAttrib(l,t,n)}});hO(e.classes,e=>{const t=s(e);if(!bO.hasClass(l,t)){bO.addClass(l,t)}});n.dispatch("PreviewFormats");bO.setStyles(c,{position:"absolute",left:-65535});n.getBody().appendChild(c);const d=r("fontSize");const u=/px$/.test(d)?parseInt(d,10):0;hO(t.split(" "),e=>{let t=r(e,l);if(e==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)){t=r(e);if(jp(t).toLowerCase()==="#ffffff"){return}}if(e==="color"){if(jp(t).toLowerCase()==="#000000"){return}}if(e==="font-size"){if(/em|%$/.test(t)){if(u===0){return}const n=parseFloat(t)/(/%$/.test(t)?100:1);t=n*u+"px"}}if(e==="border"&&t){o+="padding:0 2px;"}o+=e+":"+t+";"});n.dispatch("AfterPreviewFormats");bO.remove(c);return o};const kO=t=>{t.addShortcut("meta+b","","Bold");t.addShortcut("meta+i","","Italic");t.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++){t.addShortcut("access+"+e,"",["FormatBlock",false,"h"+e])}t.addShortcut("access+7","",["FormatBlock",false,"p"]);t.addShortcut("access+8","",["FormatBlock",false,"div"]);t.addShortcut("access+9","",["FormatBlock",false,"address"])};const EO=s=>{const e=pO(s);const r=al({});kO(s);HE(s);if(!LA(s)){QS(r,s)}return{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,t,n)=>{tD(s,e,t,n)},remove:(e,t,n,o)=>{nD(s,e,t,n,o)},toggle:(e,t,n)=>{oD(s,e,t,n)},match:(e,t,n,o)=>XA(s,e,t,n,o),closest:e=>eD(s,e),matchAll:(e,t)=>QA(s,e,t),matchNode:(e,t,n,o)=>JA(s,e,t,n,o),canApply:e=>ZA(s,e),formatChanged:(e,t,n,o)=>sD(s,r,e,t,n,o),getCssText:h(xO,s)}};const SO=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return true;default:return false}};const _O=(n,o,s)=>{const r=al(false);const i=e=>{bA(o,false,s);o.add({},e)};n.on("init",()=>{o.add()});n.on("BeforeExecCommand",e=>{const t=e.command;if(!SO(t)){vA(o,s);o.beforeChange()}});n.on("ExecCommand",e=>{const t=e.command;if(!SO(t)){i(e)}});n.on("ObjectResizeStart cut",()=>{o.beforeChange()});n.on("SaveContent ObjectResized blur",i);n.on("dragend",i);n.on("keyup",e=>{const t=e.keyCode;if(e.isDefaultPrevented()){return}if(t>=33&&t<=36||t>=37&&t<=40||t===45||e.ctrlKey){i();n.nodeChanged()}if(t===46||t===8){n.nodeChanged()}if(r.get()&&o.typing&&!pA(lA(n),o.data[0])){if(!n.isDirty()){n.setDirty(true)}n.dispatch("TypingUndo");r.set(false);n.nodeChanged()}});n.on("keydown",e=>{const t=e.keyCode;if(e.isDefaultPrevented()){return}if(t>=33&&t<=36||t>=37&&t<=40||t===45){if(o.typing){i(e)}return}const n=e.ctrlKey&&!e.altKey||e.metaKey;if((t<16||t>20)&&t!==224&&t!==91&&!o.typing&&!n){o.beforeChange();bA(o,true,s);o.add({},e);r.set(true)}});n.on("mousedown",e=>{if(o.typing){i(e)}});const t=e=>e.inputType==="insertReplacementText";const c=e=>e.inputType==="insertText"&&e.data===null;const a=e=>e.inputType==="insertFromPaste"||e.inputType==="insertFromDrop";n.on("input",e=>{if(e.inputType&&(t(e)||c(e)||a(e))){i(e)}});n.on("AddUndo Undo Redo ClearUndos",e=>{if(!e.isDefaultPrevented()){n.nodeChanged()}})};const NO=e=>{e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo")};const RO=n=>{const o=Sl();const s=al(0);const r=al(0);const i={data:[],typing:false,beforeChange:()=>{UA(n,s,o)},add:(e,t)=>{return zA(n,i,r,s,o,e,t)},dispatchChange:()=>{n.setDirty(true);const e=lA(n);e.bookmark=vu(n.selection);n.dispatch("change",{level:e,lastLevel:ye(i.data,r.get()).getOrUndefined()})},undo:()=>{return jA(n,i,s,r)},redo:()=>{return HA(n,r,i.data)},clear:()=>{$A(n,i,r)},reset:()=>{VA(n,i)},hasUndo:()=>{return qA(n,i,r)},hasRedo:()=>{return WA(n,i,r)},transact:e=>{return KA(n,i,s,e)},ignore:e=>{GA(n,s,e)},extra:(e,t)=>{YA(n,i,r,e,t)}};if(!LA(n)){_O(n,i,s)}NO(n);return i};const AO=[9,27,$.HOME,$.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,$.DOWN,$.UP,$.LEFT,$.RIGHT].concat(H.browser.isFirefox()?[224]:[]);const DO="data-mce-placeholder";const OO=e=>e.type==="keydown"||e.type==="keyup";const TO=e=>{const t=e.keyCode;return t===$.BACKSPACE||t===$.DELETE};const BO=e=>{if(OO(e)){const t=e.keyCode;return!TO(e)&&($.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||m(AO,t))}else{return false}};const PO=e=>OO(e)&&!(TO(e)||e.type==="keyup"&&e.keyCode===229);const LO=(t,n,o)=>{if(l(Fe.fromDom(n),false)){const e=n.firstElementChild;if(!e){return true}else if(t.getStyle(n.firstElementChild,"padding-left")||t.getStyle(n.firstElementChild,"padding-right")){return false}else{return o===e.nodeName.toLowerCase()}}else{return false}};const MO=r=>{var e;const i=r.dom;const c=Yu(r);const a=(e=Sf(r))!==null&&e!==void 0?e:"";const l=(e,t)=>{if(BO(e)){return}const n=r.getBody();const o=PO(e)?false:LO(i,n,c);const s=i.getAttrib(n,DO)!=="";if(s!==o||t){i.setAttrib(n,DO,o?a:null);i.setAttrib(n,"aria-placeholder",o?a:null);yb(r,o);r.on(o?"keydown":"keyup",l);r.off(o?"keyup":"keydown",l)}};if(Pt(a)){r.on("init",e=>{l(e,true);r.on("change SetContent ExecCommand",l);r.on("paste",e=>Fy.setEditorTimeout(r,()=>l(e)))})}};const IO=(e,t)=>({block:e,position:t});const FO=(e,t)=>({from:e,to:t});const UO=(e,t)=>{const n=Fe.fromDom(e);const o=Fe.fromDom(t.container());return Zw(n,o).map(e=>IO(e,t))};const zO=e=>!k(e.from.block,e.to.block);const jO=(t,e)=>{const n=e=>k(e,t);const o=e=>pi(e)||Ir(e.dom);return ps(e,o,n).filter(Zn).getOr(t)};const HO=(e,t)=>{const n=Fe.fromDom(e);return k(jO(n,t.from.block),jO(n,t.to.block))};const $O=e=>_(e.from.block.dom)===false&&_(e.to.block.dom)===false;const VO=e=>{const t=e=>ui(e)||Ac(e.dom);return t(e.from.block)&&t(e.to.block)};const qO=(t,n,o)=>{if(E(o.position.getNode())&&!l(o.block)){return Jg(false,o.block.dom).bind(e=>{if(e.isEqual(o.position)){return Yg(n,t,e).bind(e=>UO(t,e))}else{return C.some(o)}}).getOr(o)}else{return o}};const WO=(t,n,e)=>{const o=UO(t,M.fromRangeStart(e));const s=o.bind(e=>Yg(n,t,e.position).bind(e=>UO(t,e).map(e=>qO(t,n,e))));return Bn(o,s,FO).filter(e=>zO(e)&&HO(t,e)&&$O(e)&&VO(e))};const KO=(e,t,n)=>n.collapsed?WO(e,t,n):C.none();const GO=e=>{const t=Xo(e);return fe(t,ci).fold(Be(t),e=>t.slice(0,e))};const YO=e=>{const t=GO(e);Le(t,Ue);return t};const XO=(e,t)=>{const n=S0(t,e);return ue(n.reverse(),e=>l(e)).each(Ue)};const QO=e=>S(Go(e),e=>!l(e)).length===0;const JO=(e,t,n,o)=>{if(l(n)){xi(n);return tp(n.dom)}if(QO(o)&&l(t)){Ms(o,Fe.fromTag("br"))}const s=ep(n.dom,M.before(o.dom));Le(YO(t),e=>{Ms(o,e)});XO(e,t);return s};const ZO=(e,t,n)=>{if(l(n)){if(l(t)){const s=e=>{const n=(e,t)=>Jo(e).fold(()=>t,e=>li(e)?n(e,t.concat(Gl(e))):t);return n(e,[])};const r=ae(s(n),(e,t)=>{zs(e,t);return t},wi());$s(t);Us(t,r)}Ue(n);return tp(t.dom)}const o=np(n.dom);Le(YO(t),e=>{Us(n,e)});XO(e,t);return o};const eT=(e,t)=>{const n=S0(t,e);return C.from(n[n.length-1])};const tT=(e,t)=>Io(t,e)?eT(t,e):C.none();const nT=(e,t)=>{Jg(e,t.dom).bind(e=>C.from(e.getNode())).map(Fe.fromDom).filter(di).each(Ue)};const oT=(e,t,n)=>{nT(true,t);nT(false,n);return tT(t,n).fold(h(ZO,e,t,n),h(JO,e,t,n))};const sT=(e,t,n,o)=>t?oT(e,o,n):oT(e,n,o);const rT=(t,n)=>{const o=Fe.fromDom(t.getBody());const e=KO(o.dom,n,t.selection.getRng()).map(e=>()=>{sT(o,n,e.from.block,e.to.block).each(e=>{t.selection.setRng(e.toRange())})});return e};const iT=(n,o)=>{const s=o.getRng();return Bn(Zw(n,Fe.fromDom(s.startContainer)),Zw(n,Fe.fromDom(s.endContainer)),(e,t)=>{if(!k(e,t)){return C.some(()=>{s.deleteContents();sT(n,true,e,t).each(e=>{o.setRng(e.toRange())})})}else{return C.none()}}).getOr(C.none())};const cT=(e,t)=>{const n=Fe.fromDom(t);const o=h(k,e);return gs(n,pi,o).isSome()};const aT=(e,t)=>cT(e,t.startContainer)||cT(e,t.endContainer);const lT=(e,t)=>{const n=ep(e.dom,M.fromRangeStart(t)).isNone();const o=Zg(e.dom,M.fromRangeEnd(t)).isNone();return!aT(e,t)&&n&&o};const dT=e=>{return C.some(()=>{e.setContent("");e.selection.setCursorLocation()})};const uT=e=>{const t=Fe.fromDom(e.getBody());const n=e.selection.getRng();return lT(t,n)?dT(e):iT(t,e.selection)};const fT=(e,t)=>e.selection.isCollapsed()?C.none():uT(e);const mT=(e,t,n,o,s)=>C.from(t._selectionOverrides.showCaret(e,n,o,s));const gT=e=>{const t=e.ownerDocument.createRange();t.selectNode(e);return t};const pT=(e,t)=>{const n=e.dispatch("BeforeObjectSelected",{target:t});if(n.isDefaultPrevented()){return C.none()}return C.some(gT(t))};const hT=(e,t,n)=>{const o=wg(1,e.getBody(),t);const s=M.fromRangeStart(o);const r=s.getNode();if(Qm(r)){return mT(1,e,r,!s.isAtEnd(),false)}const i=s.getNode(true);if(Qm(i)){return mT(1,e,i,false,false)}const c=Zx(e.dom.getRoot(),s.getNode());if(Qm(c)){return mT(1,e,c,false,n)}return C.none()};const bT=(e,t,n)=>t.collapsed?hT(e,t,n).getOr(t):t;const vT=e=>C0(e)||h0(e);const yT=e=>w0(e)||b0(e);const CT=(e,t)=>{if(je(t)&&t.data.length===0){e.remove(t)}};const wT=(e,n,t,o,s,r)=>{mT(o,e,r.getNode(!s),s,true).each(t=>{if(n.collapsed){const e=n.cloneRange();if(s){e.setEnd(t.startContainer,t.startOffset)}else{e.setStart(t.endContainer,t.endOffset)}e.deleteContents()}else{n.deleteContents()}e.selection.setRng(t)});CT(e.dom,t)};const xT=(e,t)=>{const n=e.selection.getRng();if(!je(n.commonAncestorContainer)){return C.none()}const o=t?Rg.Forwards:Rg.Backwards;const s=jg(e.getBody());const r=h(_g,t?s.next:s.prev);const i=t?vT:yT;const c=kg(o,e.getBody(),n);const a=r(c);const l=a?Vw(t,a):a;if(!l||!Ng(c,l)){return C.none()}else if(i(l)){return C.some(()=>wT(e,n,c.getNode(),o,t,l))}const d=r(l);if(d&&i(d)){if(Ng(l,d)){return C.some(()=>wT(e,n,c.getNode(),o,t,d))}}return C.none()};const kT=(e,t)=>xT(e,t);const ET=(e,t)=>{const n=e.getBody();return t?tp(n).filter(C0):np(n).filter(w0)};const ST=e=>{const t=e.selection.getRng();return!t.collapsed&&(ET(e,true).exists(e=>e.isEqual(M.fromRangeStart(t)))||ET(e,false).exists(e=>e.isEqual(M.fromRangeEnd(t))))};const _T=e=>De(e)&&(pi(Fe.fromDom(e))||mi(Fe.fromDom(e)));const NT=Eu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]);const RT=(e,t)=>{const n=t.getNode(!e);const o=e?"after":"before";return ze(n)&&n.getAttribute("data-mce-caret")===o};const AT=(t,e,n,o)=>{const s=e=>li(Fe.fromDom(e))&&!gg(n,o,t);return xg(!e,n).fold(()=>xg(e,o).fold(a,s),s)};const DT=(e,t,n,o)=>{const s=o.getNode(!t);return Zw(Fe.fromDom(e),Fe.fromDom(n.getNode())).map(e=>l(e)?NT.remove(e.dom):NT.moveToElement(s)).orThunk(()=>C.some(NT.moveToElement(s)))};const OT=(t,n,o)=>Yg(n,t,o).bind(e=>{if(_T(e.getNode())){return C.none()}else if(AT(t,n,o,e)){return C.none()}else if(n&&_(e.getNode())){return DT(t,n,o,e)}else if(!n&&_(e.getNode(true))){return DT(t,n,o,e)}else if(n&&w0(o)){return C.some(NT.moveToPosition(e))}else if(!n&&C0(o)){return C.some(NT.moveToPosition(e))}else{return C.none()}});const TT=(e,t)=>{if(Ae(t)){return C.none()}else if(e&&_(t.nextSibling)){return C.some(NT.moveToElement(t.nextSibling))}else if(!e&&_(t.previousSibling)){return C.some(NT.moveToElement(t.previousSibling))}else{return C.none()}};const BT=(t,n,e)=>e.fold(e=>C.some(NT.remove(e)),e=>C.some(NT.moveToElement(e)),e=>{if(gg(n,e,t)){return C.none()}else{return C.some(NT.moveToPosition(e))}});const PT=(t,e,n)=>{if(RT(e,n)){return TT(e,n.getNode(!e)).orThunk(()=>OT(t,e,n))}else{return OT(t,e,n).bind(e=>BT(t,n,e))}};const LT=(e,t,n)=>{const o=wg(t?1:-1,e,n);const s=M.fromRangeStart(o);const r=Fe.fromDom(e);if(!t&&w0(s)){return C.some(NT.remove(s.getNode(true)))}else if(t&&C0(s)){return C.some(NT.remove(s.getNode()))}else if(!t&&C0(s)&&I0(r,s)){return F0(r,s).map(e=>NT.remove(e.getNode()))}else if(t&&w0(s)&&M0(r,s)){return U0(r,s).map(e=>NT.remove(e.getNode()))}else{return PT(e,t,s)}};const MT=(t,n)=>e=>{t._selectionOverrides.hideFakeCaret();Lw(t,n,Fe.fromDom(e));return true};const IT=(n,o)=>e=>{const t=o?M.before(e):M.after(e);n.selection.setRng(t.toRange());return true};const FT=t=>e=>{t.selection.setRng(e.toRange());return true};const UT=(e,t)=>C.from(Zx(e.getBody(),t));const zT=(t,n)=>{const e=t.selection.getNode();return UT(t,e).filter(_).fold(()=>LT(t.getBody(),n,t.selection.getRng()).map(e=>()=>e.fold(MT(t,n),IT(t,n),FT(t))),()=>C.some(Te))};const jT=e=>{Le(hr(e,".mce-offscreen-selection"),Ue)};const HT=(e,t)=>{const n=e.selection.getNode();if(_(n)&&!Fr(n)){const o=UT(e,n.parentNode).filter(_);return o.fold(()=>C.some(()=>{jT(Fe.fromDom(e.getBody()));Lw(e,t,Fe.fromDom(e.selection.getNode()));ex(e)}),()=>C.some(Te))}if(ST(e)){return C.some(()=>{ox(e,e.selection.getRng(),Fe.fromDom(e.getBody()))})}return C.none()};const $T=e=>{const t=e.dom,n=e.selection;const o=Zx(e.getBody(),n.getNode());if(Ir(o)&&t.isBlock(o)&&t.isEmpty(o)){const s=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,"");o.appendChild(s);n.setRng(M.before(s).toRange())}return true};const VT=(e,t)=>{if(e.selection.isCollapsed()){return zT(e,t)}else{return HT(e,t)}};const qT=(t,n)=>{const e=M.fromRangeStart(t.selection.getRng());return Yg(n,t.getBody(),e).filter(e=>n?g0(e):p0(e)).bind(e=>pg(n?0:-1,e)).map(e=>()=>t.selection.select(e))};const WT=(e,t)=>e.selection.isCollapsed()?qT(e,t):C.none();const KT=je;const GT=e=>KT(e)&&e.data[0]===Ei;const YT=e=>KT(e)&&e.data[e.data.length-1]===Ei;const XT=e=>{var t;const n=(t=e.ownerDocument)!==null&&t!==void 0?t:document;return n.createTextNode(Ei)};const QT=e=>{var t;if(KT(e.previousSibling)){if(YT(e.previousSibling)){return e.previousSibling}else{e.previousSibling.appendData(Ei);return e.previousSibling}}else if(KT(e)){if(GT(e)){return e}else{e.insertData(0,Ei);return e}}else{const n=XT(e);(t=e.parentNode)===null||t===void 0?void 0:t.insertBefore(n,e);return n}};const JT=e=>{var t,n;if(KT(e.nextSibling)){if(GT(e.nextSibling)){return e.nextSibling}else{e.nextSibling.insertData(0,Ei);return e.nextSibling}}else if(KT(e)){if(YT(e)){return e}else{e.appendData(Ei);return e}}else{const o=XT(e);if(e.nextSibling){(t=e.parentNode)===null||t===void 0?void 0:t.insertBefore(o,e.nextSibling)}else{(n=e.parentNode)===null||n===void 0?void 0:n.appendChild(o)}return o}};const ZT=(e,t)=>e?QT(t):JT(t);const eB=h(ZT,true);const tB=h(ZT,false);const nB=(e,t)=>{if(je(e.container())){return ZT(t,e.container())}else{return ZT(t,e.getNode())}};const oB=(e,t)=>{const n=t.get();return n&&e.container()===n&&Di(n)};const sB=(n,e)=>e.fold(e=>{Hm(n.get());const t=eB(e);n.set(t);return C.some(M(t,t.length-1))},e=>tp(e).map(t=>{if(!oB(t,n)){Hm(n.get());const e=nB(t,true);n.set(e);return M(e,1)}else{const e=n.get();return M(e,1)}}),e=>np(e).map(t=>{if(!oB(t,n)){Hm(n.get());const e=nB(t,false);n.set(e);return M(e,e.length-1)}else{const e=n.get();return M(e,e.length-1)}}),e=>{Hm(n.get());const t=tB(e);n.set(t);return C.some(M(t,1))});const rB=(t,n)=>{for(let e=0;e<t.length;e++){const o=t[e].apply(null,n);if(o.isSome()){return o}}return C.none()};const iB=Eu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]);const cB=(e,t)=>{const n=mg(t,e);return n?n:e};const aB=(e,t,n)=>{const o=qw(n);const s=cB(t,o.container());return jw(e,s,o).fold(()=>Zg(s,o).bind(h(jw,e,s)).map(e=>iB.before(e)),C.none)};const lB=(e,t)=>rp(e,t)===null;const dB=(e,t,n)=>jw(e,t,n).filter(h(lB,t));const uB=(e,t,n)=>{const o=Ww(n);return dB(e,t,o).bind(e=>{const t=ep(e,o);return t.isNone()?C.some(iB.start(e)):C.none()})};const fB=(e,t,n)=>{const o=qw(n);return dB(e,t,o).bind(e=>{const t=Zg(e,o);return t.isNone()?C.some(iB.end(e)):C.none()})};const mB=(e,t,n)=>{const o=Ww(n);const s=cB(t,o.container());return jw(e,s,o).fold(()=>ep(s,o).bind(h(jw,e,s)).map(e=>iB.after(e)),C.none)};const gB=e=>!Uw(hB(e));const pB=(e,t,n)=>{const o=rB([aB,uB,fB,mB],[e,t,n]);return o.filter(gB)};const hB=e=>e.fold(Y,Y,Y,Y);const bB=e=>e.fold(Be("before"),Be("start"),Be("end"),Be("after"));const vB=e=>e.fold(iB.before,iB.before,iB.after,iB.after);const yB=e=>e.fold(iB.start,iB.start,iB.end,iB.end);const CB=(e,t)=>bB(e)===bB(t)&&hB(e)===hB(t);const wB=(n,e,o,t,s,r)=>Bn(jw(e,o,t),jw(e,o,s),(e,t)=>{if(e!==t&&Hw(o,e,t)){return iB.after(n?e:t)}else{return r}}).getOr(r);const xB=(e,t)=>e.fold(f,e=>!CB(e,t));const kB=(t,n,o,s,e)=>{const r=Vw(t,e);const i=Yg(t,o,r).map(h(Vw,t));const c=i.fold(()=>s.map(vB),e=>pB(n,o,e).map(h(wB,t,n,o,r,e)).filter(h(xB,s)));return c.filter(gB)};const EB=(e,t)=>{if(e){return t.fold(K(C.some,iB.start),C.none,K(C.some,iB.after),C.none)}else{return t.fold(C.none,K(C.some,iB.before),C.none,K(C.some,iB.end))}};const SB=(e,t,n,o)=>{const s=Vw(e,o);const r=pB(t,n,s);return pB(t,n,s).bind(h(EB,e)).orThunk(()=>kB(e,t,n,r,o))};const _B=e=>{return Oe(e.selection.getSel().modify)};const NB=(e,t,n)=>{const o=e?1:-1;t.setRng(M(n.container(),n.offset()+o).toRange());t.getSel().modify("move",e?"forward":"backward","word");return true};const RB=(e,t)=>{const n=t.selection.getRng();const o=e?M.fromRangeEnd(n):M.fromRangeStart(n);if(!_B(t)){return false}else if(e&&Pi(o)){return NB(true,t.selection,o)}else if(!e&&Li(o)){return NB(false,t.selection,o)}else{return false}};var AB;(function(e){e[e["Br"]=0]="Br";e[e["Block"]=1]="Block";e[e["Wrap"]=2]="Wrap";e[e["Eol"]=3]="Eol"})(AB||(AB={}));const DB=(e,t)=>e===Rg.Backwards?pe(t):t;const OB=(e,t,n)=>e===Rg.Forwards?t.next(n):t.prev(n);const TB=(e,t,n,o)=>{if(E(o.getNode(t===Rg.Forwards))){return AB.Br}else if(gg(n,o)===false){return AB.Block}else{return AB.Wrap}};const BB=(e,t,n,o)=>{const s=jg(n);let r=o;const i=[];while(r){const c=OB(t,s,r);if(!c){break}if(E(c.getNode(false))){if(t===Rg.Forwards){return{positions:DB(t,i).concat([c]),breakType:AB.Br,breakAt:C.some(c)}}else{return{positions:DB(t,i),breakType:AB.Br,breakAt:C.some(c)}}}if(!c.isVisible()){r=c;continue}if(e(r,c)){const a=TB(n,t,r,c);return{positions:DB(t,i),breakType:a,breakAt:C.some(c)}}i.push(c);r=c}return{positions:DB(t,i),breakType:AB.Eol,breakAt:C.none()}};const PB=(n,o,s,e)=>o(s,e).breakAt.map(e=>{const t=o(s,e).positions;return n===Rg.Backwards?t.concat(e):[e].concat(t)}).getOr([]);const LB=(e,i)=>le(e,(e,r)=>e.fold(()=>C.some(r),s=>Bn(Ce(s.getClientRects()),Ce(r.getClientRects()),(e,t)=>{const n=Math.abs(i-e.left);const o=Math.abs(i-t.left);return o<=n?r:s}).or(e)),C.none());const MB=(t,e)=>Ce(e.getClientRects()).bind(e=>LB(t,e.left));const IB=h(BB,M.isAbove,-1);const FB=h(BB,M.isBelow,1);const UB=h(PB,-1,IB);const zB=h(PB,1,FB);const jB=(e,t)=>IB(e,t).breakAt.isNone();const HB=(e,t)=>FB(e,t).breakAt.isNone();const $B=t=>tp(t).map(e=>[e].concat(FB(t,e).positions)).getOr([]);const VB=t=>np(t).map(e=>IB(t,e).positions.concat(e)).getOr([]);const qB=(e,t)=>MB(UB(e,t),t);const WB=(e,t)=>MB(zB(e,t),t);const KB=_;const GB=(e,t)=>Math.abs(e.left-t);const YB=(e,t)=>Math.abs(e.right-t);const XB=e=>Ze(e,"node");const QB=(e,s)=>lt(e,(e,t)=>{const n=Math.min(GB(e,s),YB(e,s));const o=Math.min(GB(t,s),YB(t,s));if(o===n&&XB(t)&&KB(t.node)){return t}if(o<n){return t}return e});const JB=n=>{const e=e=>{return y(e,e=>{const t=td(e);t.node=n;return t})};if(ze(n)){return e(n.getClientRects())}else if(je(n)){const t=n.ownerDocument.createRange();t.setStart(n,0);t.setEnd(n,n.data.length);return e(t.getClientRects())}else{return[]}};const ZB=e=>ge(e,JB);var eP;(function(e){e[e["Up"]=-1]="Up";e[e["Down"]=1]="Down"})(eP||(eP={}));const tP=(e,t,n,o)=>{let s=o;while(s=ug(s,e,nc,t)){if(n(s)){return}}};const nP=(o,s,r,e,i,t)=>{let c=0;const a=[];const n=e=>{let t=ZB([e]);if(o===-1){t=t.reverse()}for(let e=0;e<t.length;e++){const n=t[e];if(r(n,l)){continue}if(a.length>0&&s(n,ut(a))){c++}n.line=c;if(i(n)){return true}a.push(n)}return false};const l=ut(t.getClientRects());if(!l){return a}const d=t.getNode();if(d){n(d);tP(o,e,n,d)}return a};const oP=(e,t)=>t.line>e;const sP=(e,t)=>t.line===e;const rP=h(nP,eP.Up,rd,id);const iP=h(nP,eP.Down,id,rd);const cP=e=>{return ut(e.getClientRects())};const aP=(e,t,n,o)=>{const s=jg(t);let r;let i;let c;let a;const l=[];let d=0;if(e===1){r=s.next;i=id;c=rd;a=M.after(o)}else{r=s.prev;i=rd;c=id;a=M.before(o)}const u=cP(a);do{if(!a.isVisible()){continue}const f=cP(a);if(c(f,u)){continue}if(l.length>0&&i(f,ut(l))){d++}const m=td(f);m.position=a;m.line=d;if(n(m)){return l}l.push(m)}while(a=r(a));return l};const lP=t=>e=>oP(t,e);const dP=t=>e=>sP(t,e);const uP=(e,t)=>{e.selection.setRng(t);hy(e,e.selection.getRng())};const fP=(e,t,n)=>C.some(bT(e,t,n));const mP=(e,t,n,o,s,r)=>{const i=t===Rg.Forwards;const c=jg(e.getBody());const a=h(_g,i?c.next:c.prev);const l=i?o:s;if(!n.collapsed){const g=fd(n);if(r(g)){return mT(t,e,g,t===Rg.Backwards,false)}else if(ST(e)){const p=n.cloneRange();p.collapse(t===Rg.Backwards);return C.from(p)}}const d=kg(t,e.getBody(),n);if(l(d)){return pT(e,d.getNode(!i))}let u=a(d);const f=ji(n);if(!u){return f?C.some(n):C.none()}else{u=Vw(i,u)}if(l(u)){return mT(t,e,u.getNode(!i),i,false)}const m=a(u);if(m&&l(m)){if(Ng(u,m)){return mT(t,e,m.getNode(!i),i,false)}}if(f){return fP(e,u.toRange(),false)}return C.none()};const gP=(t,n,e,o,s,r)=>{const i=kg(n,t.getBody(),e);const c=ut(i.getClientRects());const a=n===eP.Down;const l=t.getBody();if(!c){return C.none()}if(ST(t)){const i=a?M.fromRangeEnd(e):M.fromRangeStart(e);const h=!a?qB:WB;return h(l,i).orThunk(()=>C.from(i)).map(e=>e.toRange())}const d=a?iP:rP;const u=d(l,lP(1),i);const f=S(u,dP(1));const m=c.left;const g=QB(f,m);if(g&&r(g.node)){const b=Math.abs(m-g.left);const v=Math.abs(m-g.right);return mT(n,t,g.node,b<v,false)}let p;if(o(i)){p=i.getNode()}else if(s(i)){p=i.getNode(true)}else{p=fd(e)}if(p){const y=aP(n,l,lP(1),p);let e=QB(S(y,dP(1)),m);if(e){return fP(t,e.position.toRange(),false)}e=ut(S(y,dP(0)));if(e){return fP(t,e.position.toRange(),false)}}if(f.length===0){return pP(t,a).filter(a?s:o).map(e=>bT(t,e.toRange(),false))}return C.none()};const pP=(e,t)=>{const n=e.selection.getRng();const o=t?M.fromRangeEnd(n):M.fromRangeStart(n);const s=fg(o.container(),e.getBody());if(t){const r=FB(s,o);return we(r.positions)}else{const r=IB(s,o);return Ce(r.positions)}};const hP=(t,e,n)=>pP(t,e).filter(n).exists(e=>{t.selection.setRng(e.toRange());return true});const bP=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset());n.setEnd(t.container(),t.offset());e.selection.setRng(n)};const vP=(e,t)=>{if(e){t.setAttribute("data-mce-selected","inline-boundary")}else{t.removeAttribute("data-mce-selected")}};const yP=(t,e,n)=>sB(e,n).map(e=>{bP(t,e);return n});const CP=(t,n,o)=>{const s=M.fromRangeStart(t);if(t.collapsed){return s}else{const e=M.fromRangeEnd(t);return o?ep(n,e).getOr(e):Zg(n,s).getOr(s)}};const wP=(t,n,e)=>{const o=t.getBody();const s=CP(t.selection.getRng(),o,e);const r=h(Fw,t);const i=SB(e,r,o,s);return i.bind(e=>yP(t,n,e))};const xP=(e,t,n)=>{const o=y(hr(Fe.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom);const s=S(o,e);const r=S(n,e);Le(he(s,r),h(vP,false));Le(he(r,s),h(vP,true))};const kP=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const o=M.fromRangeStart(e.selection.getRng());if(M.isTextPosition(o)&&!$w(o)){bP(e,jm(n,o));t.set(null)}}};const EP=(n,o,s,e)=>{if(o.selection.isCollapsed()){const t=S(e,n);Le(t,e=>{const t=M.fromRangeStart(o.selection.getRng());pB(n,o.getBody(),t).bind(e=>yP(o,s,e))})}};const SP=(e,t,n)=>Tf(e)?wP(e,t,n).isSome():false;const _P=(e,t,n)=>Tf(t)?RB(e,t):false;const NP=t=>{const n=al(null);const o=h(Fw,t);t.on("NodeChange",e=>{if(Tf(t)){xP(o,t.dom,e.parents);kP(t,n);EP(o,t,n,e.parents)}});return n};const RP=h(_P,true);const AP=h(_P,false);const DP=(n,t,o)=>{if(Tf(n)){const e=pP(n,t).getOrThunk(()=>{const e=n.selection.getRng();return t?M.fromRangeEnd(e):M.fromRangeStart(e)});return pB(h(Fw,n),n.getBody(),e).exists(e=>{const t=vB(e);return sB(o,t).exists(e=>{bP(n,e);return true})})}else{return false}};const OP=(e,t)=>{const n=document.createRange();n.setStart(e.container(),e.offset());n.setEnd(t.container(),t.offset());return n};const TP=s=>Bn(tp(s),np(s),(e,t)=>{const n=Vw(true,e);const o=Vw(false,t);return Zg(s,n).forall(e=>e.isEqual(o))}).getOr(true);const BP=(t,n)=>e=>sB(n,e).map(e=>()=>bP(t,e));const PP=(e,t,n,o)=>{const s=e.getBody();const r=h(Fw,e);e.undoManager.ignore(()=>{e.selection.setRng(OP(n,o));Yw(e);pB(r,s,M.fromRangeStart(e.selection.getRng())).map(yB).bind(BP(e,t)).each(ee)});e.nodeChanged()};const LP=(e,t)=>{const n=mg(t,e);return n?n:e};const MP=(n,o,s,r)=>{const i=LP(n.getBody(),r.container());const c=h(Fw,n);const a=pB(c,i,r);const e=a.bind(e=>{if(s){return e.fold(Be(C.some(yB(e))),C.none,Be(C.some(vB(e))),C.none)}else{return e.fold(C.none,Be(C.some(vB(e))),C.none,Be(C.some(yB(e))))}});return e.map(BP(n,o)).getOrThunk(()=>{const e=Xg(s,i,r);const t=e.bind(e=>pB(c,i,e));return Bn(a,t,()=>jw(c,i,r).bind(e=>{if(TP(e)){return C.some(()=>{Lw(n,s,Fe.fromDom(e))})}else{return C.none()}})).getOrThunk(()=>t.bind(()=>e.map(e=>{return()=>{if(s){PP(n,o,r,e)}else{PP(n,o,e,r)}}})))})};const IP=(t,n,o)=>{if(t.selection.isCollapsed()&&Tf(t)){const e=M.fromRangeStart(t.selection.getRng());return MP(t,n,o,e)}return C.none()};const FP=e=>es(e)>1;const UP=(e,t)=>{const n=Fe.fromDom(e.getBody());const o=Fe.fromDom(e.selection.getStart());const s=S0(o,n);return fe(s,t).fold(Be(s),e=>s.slice(0,e))};const zP=e=>UP(e,e=>ci(e)||FP(e));const jP=e=>UP(e,ci);const HP=(e,t)=>{const n=h(WE,e);return ge(t,e=>n(e)?[e.dom]:[])};const $P=e=>{const t=jP(e);return HP(e,t)};const VP=(e,t,n,o)=>{const s=HP(t,o);if(s.length===0){Lw(t,e,n)}else{const r=VE(n.dom,s);t.selection.setRng(r.toRange())}};const qP=(n,o)=>{const s=zP(n);return we(s).bind(e=>{const t=M.fromRangeStart(n.selection.getRng());if(tx(o,t,e.dom)&&!KE(e)){return C.some(()=>VP(o,n,e,s))}else{return C.none()}})};const WP=(e,t)=>{const n=t.parentElement;return E(t)&&!z(n)&&e.dom.isEmpty(n)};const KP=e=>KE(Fe.fromDom(e));const GP=(e,t)=>{const n=e.selection.getStart();const o=WP(e,n)||KP(n)?VE(n,t):qE(e,t);e.selection.setRng(o.toRange())};const YP=(e,t)=>{const n=he(t,$P(e));if(n.length>0){GP(e,n)}};const XP=e=>je(e.startContainer);const QP=e=>e.startOffset===0&&XP(e);const JP=(e,t)=>{const n=t.startContainer.parentElement;return!z(n)&&WE(e,Fe.fromDom(n))};const ZP=e=>{const t=e.startContainer.parentNode;const n=e.endContainer.parentNode;return!z(t)&&!z(n)&&t.isEqualNode(n)};const eL=e=>{const t=e.endContainer;return e.endOffset===(je(t)?t.length:t.childNodes.length)};const tL=e=>ZP(e)&&eL(e);const nL=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer);const oL=e=>tL(e)||nL(e);const sL=e=>{const t=e.selection.getRng();return QP(t)&&JP(e,t)&&oL(t)};const rL=e=>{if(sL(e)){const t=$P(e);return C.some(()=>{Yw(e);YP(e,t)})}else{return C.none()}};const iL=(e,t)=>e.selection.isCollapsed()?qP(e,t):rL(e);const cL=e=>dE(e,e=>sp(e.dom),ci);const aL=e=>cL(Fe.fromDom(e.selection.getStart()));const lL=e=>{const t=e.selection.getRng();return t.collapsed&&(XP(t)||e.dom.isEmpty(t.startContainer))&&!aL(e)};const dL=e=>{if(lL(e)){GP(e,[])}return true};const uL=(e,t,n)=>{if(De(n)){return C.some(()=>{e._selectionOverrides.hideFakeCaret();Lw(e,t,Fe.fromDom(n))})}else{return C.none()}};const fL=(t,n)=>{const o=n?h0:b0;const e=n?Rg.Forwards:Rg.Backwards;const s=kg(e,t.getBody(),t.selection.getRng());if(o(s)){return uL(t,n,s.getNode(!n))}else{return C.from(Vw(n,s)).filter(e=>o(e)&&Ng(s,e)).bind(e=>uL(t,n,e.getNode(!n)))}};const mL=(e,t)=>{const n=e.selection.getNode();return zr(n)?uL(e,t,n):C.none()};const gL=(e,t)=>e.selection.isCollapsed()?fL(e,t):mL(e,t);const pL=e=>ps(e,e=>Ir(e.dom)||_(e.dom)).exists(e=>Ir(e.dom));const hL=e=>It(e!==null&&e!==void 0?e:"").getOr(0);const bL=(e,t)=>{const n=e||ai(t)?"margin":"padding";const o=Ds(t,"direction")==="rtl"?"-right":"-left";return n+o};const vL=(e,t,n,o,s,r)=>{const i=bL(n,Fe.fromDom(r));const c=hL(e.getStyle(r,i));if(t==="outdent"){const a=Math.max(0,c-o);e.setStyle(r,i,a?a+s:"")}else{const a=c+o+s;e.setStyle(r,i,a)}};const yL=(s,e)=>qe(e,e=>{const t=bL(hf(s),e);const n=Ts(e,t).map(hL).getOr(0);const o=s.dom.getContentEditable(e.dom);return o!=="false"&&n>0});const CL=e=>{const t=kL(e);return!e.mode.isReadOnly()&&(t.length>1||yL(e,t))};const wL=e=>fi(e)||mi(e);const xL=e=>Ho(e).exists(wL);const kL=e=>S(Ws(e.selection.getSelectedBlocks()),e=>!wL(e)&&!xL(e)&&pL(e));const EL=(e,t)=>{var n,o;const{dom:s}=e;const r=bf(e);const i=(o=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px";const c=hL(r);const a=hf(e);Le(kL(e),e=>{vL(s,t,a,c,i,e.dom)})};const SL=e=>EL(e,"indent");const _L=e=>EL(e,"outdent");const NL=t=>{if(t.selection.isCollapsed()&&CL(t)){const e=t.dom;const n=t.selection.getRng();const o=M.fromRangeStart(n);const s=e.getParent(n.startContainer,e.isBlock);if(s!==null&&D0(Fe.fromDom(s),o)){return C.some(()=>_L(t))}}return C.none()};const RL=(t,n,o)=>xe([NL,VT,kT,(e,t)=>IP(e,n,t),rT,Jx,WT,gL,fT,iL],e=>e(t,o)).filter(e=>t.selection.isEditable());const AL=(e,t)=>{const n=RL(e,t,false);n.fold(()=>{Yw(e);ex(e)},ee)};const DL=(e,t)=>{const n=RL(e,t,true);n.fold(()=>Xw(e),ee)};const OL=(e,t)=>{e.addCommand("delete",()=>{AL(e,t)});e.addCommand("forwardDelete",()=>{DL(e,t)})};const TL=5;const BL=400;const PL=e=>{if(e.touches===undefined||e.touches.length!==1){return C.none()}return C.some(e.touches[0])};const LL=(e,t)=>{const n=Math.abs(e.clientX-t.x);const o=Math.abs(e.clientY-t.y);return n>TL||o>TL};const ML=n=>{const o=Sl();const s=al(false);const r=Nl(e=>{n.dispatch("longpress",{...e,type:"longpress"});s.set(true)},BL);n.on("touchstart",n=>{PL(n).each(e=>{r.cancel();const t={x:e.clientX,y:e.clientY,target:n.target};r.throttle(n);s.set(false);o.set(t)})},true);n.on("touchmove",e=>{r.cancel();PL(e).each(t=>{o.on(e=>{if(LL(t,e)){o.clear();s.set(false);n.dispatch("longpresscancel")}})})},true);n.on("touchend touchcancel",t=>{r.cancel();if(t.type==="touchcancel"){return}o.get().filter(e=>e.target.isEqualNode(t.target)).each(()=>{if(s.get()){t.preventDefault()}else{n.dispatch("tap",{...t,type:"tap"})}})},true)};const IL=(e,t)=>Ie(e,t.nodeName);const FL=(e,t)=>{if(je(t)){return true}else if(ze(t)){return!IL(e.getBlockElements(),t)&&!Np(t)&&!Tc(e,t)}else{return false}};const UL=(t,e,n)=>{return Pe(E0(Fe.fromDom(n),Fe.fromDom(e)),e=>{return IL(t,e.dom)})};const zL=(e,t)=>{if(je(t)){if(t.data.length===0){return true}else if(/^\s+$/.test(t.data)&&(!t.nextSibling||IL(e,t.nextSibling))){return true}}return false};const jL=e=>e.dom.create(Yu(e),Xu(e));const HL=e=>{const t=e.dom,n=e.selection;const o=e.schema;const s=o.getBlockElements();const r=n.getStart();const i=e.getBody();let c;let a;let l=false;const d=Yu(e);if(!r||!ze(r)){return}const u=i.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||UL(s,i,r)){return}const f=n.getRng();const{startContainer:m,startOffset:g,endContainer:p,endOffset:h}=f;const b=aC(e);let v=i.firstChild;while(v){if(ze(v)){Nc(o,v)}if(FL(o,v)){if(zL(s,v)){a=v;v=v.nextSibling;t.remove(a);continue}if(!c){c=jL(e);i.insertBefore(c,v);l=true}a=v;v=v.nextSibling;c.appendChild(a)}else{c=null;v=v.nextSibling}}if(l&&b){f.setStart(m,g);f.setEnd(p,h);n.setRng(f);e.nodeChanged()}};const $L=(e,t,n)=>{const o=Fe.fromDom(jL(e));const s=wi();Us(o,s);n(t,o);const r=document.createRange();r.setStartBefore(s.dom);r.setEndBefore(s.dom);return r};const VL=e=>{e.on("NodeChange",h(HL,e))};const qL=t=>e=>(" "+e.attr("class")+" ").indexOf(t)!==-1;const WL=(i,c,a)=>{return function(e){const t=arguments,n=t[t.length-2];const o=n>0?c.charAt(n-1):"";if(o==='"'){return e}if(o===">"){const s=c.lastIndexOf("<",n);if(s!==-1){const r=c.substring(s,n);if(r.indexOf('contenteditable="false"')!==-1){return e}}}return'<span class="'+a+'" data-mce-content="'+i.dom.encode(t[0])+'">'+i.dom.encode(typeof t[1]==="string"?t[1]:t[0])+"</span>"}};const KL=(e,t,n)=>{let o=t.length,s=n.content;if(n.format==="raw"){return}while(o--){s=s.replace(t[o],WL(e,s,ym(e)))}n.content=s};const GL=t=>{const o="contenteditable";const e=" "+U.trim(Cm(t))+" ";const n=" "+U.trim(ym(t))+" ";const s=qL(e);const r=qL(n);const i=wm(t);if(i.length>0){t.on("BeforeSetContent",e=>{KL(t,i,e)})}t.parser.addAttributeFilter("class",e=>{let t=e.length;while(t--){const n=e[t];if(s(n)){n.attr(o,"true")}else if(r(n)){n.attr(o,"false")}}});t.serializer.addAttributeFilter(o,e=>{let t=e.length;while(t--){const n=e[t];if(!s(n)&&!r(n)){continue}if(i.length>0&&n.attr("data-mce-content")){n.name="#text";n.type=3;n.raw=true;n.value=n.attr("data-mce-content")}else{n.attr(o,null)}}})};const YL=e=>Cs(Fe.fromDom(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();const XL=(e,t)=>{if(t.hasAttribute("data-mce-caret")){zi(t);e.selection.setRng(e.selection.getRng());e.selection.scrollIntoView(t)}};const QL=(e,t)=>{const n=YL(e);if(!n){return}if(t.type==="compositionstart"){t.preventDefault();t.stopPropagation();XL(e,n);return}if(Ti(n)){XL(e,n);e.undoManager.add()}};const JL=e=>{e.on("keyup compositionstart",h(QL,e))};const ZL=_;const eM=(e,t,n)=>mP(t,e,n,C0,w0,ZL);const tM=(e,t,n)=>{const o=e=>C0(e)||v0(e);const s=e=>w0(e)||y0(e);return gP(t,e,n,o,s,ZL)};const nM=e=>{const t=e.dom.create(Yu(e));t.innerHTML='<br data-mce-bogus="1">';return t};const oM=(e,t,n)=>{const o=jg(e.getBody());const s=h(_g,t===1?o.next:o.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r){return}const i=s(M.fromRangeStart(n));if(!i){const c=Fe.fromDom(nM(e));if(t===1){Is(Fe.fromDom(r),c)}else{Ms(Fe.fromDom(r),c)}e.selection.select(c.dom,true);e.selection.collapse()}}};const sM=(e,t)=>{const n=t?Rg.Forwards:Rg.Backwards;const o=e.selection.getRng();return eM(n,e,o).orThunk(()=>{oM(e,n,o);return C.none()})};const rM=(e,t)=>{const n=t?1:-1;const o=e.selection.getRng();return tM(n,e,o).orThunk(()=>{oM(e,n,o);return C.none()})};const iM=(t,e)=>sM(t,e).exists(e=>{uP(t,e);return true});const cM=(t,e)=>rM(t,e).exists(e=>{uP(t,e);return true});const aM=(e,t)=>{const n=t?w0:C0;return hP(e,t,n)};const lM=(o,s)=>ET(o,!s).map(e=>{const t=e.toRange();const n=o.selection.getRng();if(s){t.setStart(n.startContainer,n.startOffset)}else{t.setEnd(n.endContainer,n.endOffset)}return t}).exists(e=>{uP(o,e);return true});const dM=e=>m(["figcaption"],g(e));const uM=(e,t)=>{const n=h(k,t);return ps(Fe.fromDom(e.container()),ci,n).filter(dM)};const fM=(e,t,n)=>t?HB(e.dom,n):jB(e.dom,n);const mM=(n,o)=>{const s=Fe.fromDom(n.getBody());const r=M.fromRangeStart(n.selection.getRng());return uM(r,s).exists(()=>{if(fM(s,o,r)){const e=o?Us:Fs;const t=$L(n,s,e);n.selection.setRng(t);return true}else{return false}})};const gM=(e,t)=>{if(e.selection.isCollapsed()){return mM(e,t)}else{return false}};const pM={shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0};const hM=e=>y(e,e=>({...pM,...e}));const bM=e=>y(e,e=>({...pM,...e}));const vM=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey;const yM=(e,t)=>ge(hM(e),e=>vM(e,t)?[e]:[]);const CM=(e,t)=>ge(bM(e),e=>vM(e,t)?[e]:[]);const d=(e,...t)=>()=>e.apply(null,t);const wM=(e,t)=>ue(yM(e,t),e=>e.action());const xM=(e,t)=>xe(CM(e,t),e=>e.action());const kM=(t,e)=>{const n=e?Rg.Forwards:Rg.Backwards;const o=t.selection.getRng();return mP(t,n,o,h0,b0,zr).exists(e=>{uP(t,e);return true})};const EM=(t,e)=>{const n=e?1:-1;const o=t.selection.getRng();return gP(t,n,o,h0,b0,zr).exists(e=>{uP(t,e);return true})};const SM=(e,t)=>{const n=t?b0:h0;return hP(e,t,n)};const _M=Eu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]);const NM=e=>_M.none(e);const RM={..._M,none:NM};const AM=(e,t)=>{return DM(e,t,f)};const DM=(e,t,n)=>{return ge(Xo(e),e=>{if(Bo(e,t)){return n(e)?[e]:[]}else{return DM(e,t,n)}})};const OM=(e,t,n=a)=>{if(n(t)){return C.none()}if(m(e,g(t))){return C.some(t)}const o=e=>Bo(e,"table")||n(e);return ys(t,e.join(","),o)};const TM=(e,t)=>OM(["td","th"],e,t);const BM=e=>AM(e,"th,td");const PM=(e,t)=>ws(e,"table",t);const LM=(e,t,n,o,s=f)=>{const r=o===1;if(!r&&n<=0){return RM.first(e[0])}else if(r&&n>=e.length-1){return RM.last(e[e.length-1])}else{const i=n+o;const c=e[i];return s(c)?RM.middle(t,c):LM(e,t,i,o,s)}};const MM=(o,e)=>{return PM(o,e).bind(e=>{const t=BM(e);const n=fe(t,e=>k(o,e));return n.map(e=>({index:e,all:t}))})};const IM=(t,n,e)=>{const o=MM(t,e);return o.fold(()=>{return RM.none(t)},e=>{return LM(e.all,t,e.index,1,n)})};const FM=(t,n,e)=>{const o=MM(t,e);return o.fold(()=>{return RM.none()},e=>{return LM(e.all,t,e.index,-1,n)})};const UM=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t});const zM=(n,e)=>ge(e,e=>{const t=UM(td(e.getBoundingClientRect()),-1);return[{x:t.left,y:n(t),cell:e},{x:t.right,y:n(t),cell:e}]});const jM=(e,s,r)=>le(e,(e,o)=>e.fold(()=>C.some(o),e=>{const t=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-r));const n=Math.sqrt(Math.abs(o.x-s)+Math.abs(o.y-r));return C.some(n<t?o:e)}),C.none());const HM=(e,t,n,o,s)=>{const r=hr(Fe.fromDom(n),"td,th,caption").map(e=>e.dom);const i=S(zM(e,r),e=>t(e,s));return jM(i,o,s).map(e=>e.cell)};const $M=e=>e.bottom;const VM=e=>e.top;const qM=(e,t)=>e.y<t;const WM=(e,t)=>e.y>t;const KM=h(HM,$M,qM);const GM=h(HM,VM,WM);const YM=(t,n)=>Ce(n.getClientRects()).bind(e=>KM(t,e.left,e.top)).bind(e=>MB(VB(e),n));const XM=(t,n)=>we(n.getClientRects()).bind(e=>GM(t,e.left,e.top)).bind(e=>MB($B(e),n));const QM=(t,n,e)=>e.breakAt.exists(e=>t(n,e).breakAt.isSome());const JM=e=>e.breakType===AB.Wrap&&e.positions.length===0;const ZM=e=>e.breakType===AB.Br&&e.positions.length===1;const eI=(e,t,n)=>{const o=e(t,n);if(JM(o)||!E(n.getNode())&&ZM(o)){return!QM(e,t,o)}else{return o.breakAt.isNone()}};const tI=h(eI,IB);const nI=h(eI,FB);const oI=(e,t,n)=>{const o=M.fromRangeStart(t);return Jg(!e,n).exists(e=>e.isEqual(o))};const sI=(t,e,n,o)=>{const s=t.selection.getRng();const r=e?1:-1;if(Xm()&&oI(e,s,n)){mT(r,t,n,!e,false).each(e=>{uP(t,e)});return true}return false};const rI=(t,n,e)=>YM(n,e).orThunk(()=>Ce(e.getClientRects()).bind(e=>LB(UB(t,M.before(n)),e.left))).getOr(M.before(n));const iI=(t,n,e)=>XM(n,e).orThunk(()=>Ce(e.getClientRects()).bind(e=>LB(zB(t,M.after(n)),e.left))).getOr(M.after(n));const cI=(e,t)=>{const n=t.getNode(e);return Rr(n)?C.some(n):C.none()};const aI=(n,o,s)=>{o.undoManager.transact(()=>{const e=n?Is:Ms;const t=$L(o,Fe.fromDom(s),e);uP(o,t)})};const lI=(n,o,s)=>{const e=o?cI(true,s):cI(false,s);const r=o===false;e.fold(()=>uP(n,s.toRange()),t=>Jg(r,n.getBody()).filter(e=>e.isEqual(s)).fold(()=>uP(n,s.toRange()),e=>aI(o,n,t)))};const dI=(e,t,n,o)=>{const s=e.selection.getRng();const r=M.fromRangeStart(s);const i=e.getBody();if(!t&&tI(o,r)){const c=rI(i,n,r);lI(e,t,c);return true}else if(t&&nI(o,r)){const c=iI(i,n,r);lI(e,t,c);return true}else{return false}};const uI=(n,o,s)=>C.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(t=>C.from(n.dom.getParent(t,"table")).map(e=>s(n,o,e,t))).getOr(false);const fI=(e,t)=>uI(e,t,sI);const mI=(e,t)=>uI(e,t,dI);const gI=e=>{const t=hv.exact(e,0,e,0);return xv(t)};const pI=(t,n,e)=>{return e.fold(C.none,C.none,(e,t)=>{return _C(t).map(e=>{return gI(e)})},e=>{t.execCommand("mceTableInsertRowAfter");return hI(t,n,e)})};const hI=(e,t,n)=>pI(e,t,IM(n,ks));const bI=(e,t,n)=>pI(e,t,FM(n,ks));const vI=(o,s)=>{const n=["table","li","dl"];const r=Fe.fromDom(o.getBody());const i=e=>{const t=g(e);return k(e,r)||m(n,t)};const e=o.selection.getRng();const t=Fe.fromDom(!s?e.startContainer:e.endContainer);return TM(t,i).map(e=>{PM(e,i).each(e=>{o.model.table.clearSelectedCells(e.dom)});o.selection.collapse(!s);const t=!s?bI:hI;const n=t(o,i,e);n.each(e=>{o.selection.setRng(e)});return true}).getOr(false)};const yI=(e,t,n)=>{const o=H.os.isMacOS()||H.os.isiOS();wM([{keyCode:$.RIGHT,action:d(iM,e,true)},{keyCode:$.LEFT,action:d(iM,e,false)},{keyCode:$.UP,action:d(cM,e,false)},{keyCode:$.DOWN,action:d(cM,e,true)},...o?[{keyCode:$.UP,action:d(lM,e,false),metaKey:true,shiftKey:true},{keyCode:$.DOWN,action:d(lM,e,true),metaKey:true,shiftKey:true}]:[],{keyCode:$.RIGHT,action:d(fI,e,true)},{keyCode:$.LEFT,action:d(fI,e,false)},{keyCode:$.UP,action:d(mI,e,false)},{keyCode:$.DOWN,action:d(mI,e,true)},{keyCode:$.RIGHT,action:d(kM,e,true)},{keyCode:$.LEFT,action:d(kM,e,false)},{keyCode:$.UP,action:d(EM,e,false)},{keyCode:$.DOWN,action:d(EM,e,true)},{keyCode:$.RIGHT,action:d(SP,e,t,true)},{keyCode:$.LEFT,action:d(SP,e,t,false)},{keyCode:$.RIGHT,ctrlKey:!o,altKey:o,action:d(RP,e,t)},{keyCode:$.LEFT,ctrlKey:!o,altKey:o,action:d(AP,e,t)},{keyCode:$.UP,action:d(gM,e,false)},{keyCode:$.DOWN,action:d(gM,e,true)}],n).each(e=>{n.preventDefault()})};const CI=(t,n)=>{t.on("keydown",e=>{if(!e.isDefaultPrevented()){yI(t,n,e)}})};const wI=(e,t)=>({container:e,offset:t});const xI=He.DOM;const kI=t=>e=>t===e?-1:0;const EI=t=>e=>t.isBlock(e)||m(["BR","IMG","HR","INPUT"],e.nodeName)||t.getContentEditable(e)==="false";const SI=(e,t,n)=>{if(je(e)&&t>=0){return C.some(wI(e,t))}else{const o=Zl(xI);return C.from(o.backwards(e,t,kI(e),n)).map(e=>wI(e.container,e.container.data.length))}};const _I=(e,t,n)=>{if(je(e)&&t>=e.length){return C.some(wI(e,t))}else{const o=Zl(xI);return C.from(o.forwards(e,t,kI(e),n)).map(e=>wI(e.container,0))}};const NI=(e,n,o)=>{if(!je(e)){return C.none()}const t=e.data;if(n>=0&&n<=t.length){return C.some(wI(e,n))}else{const s=Zl(xI);return C.from(s.backwards(e,n,kI(e),o)).bind(e=>{const t=e.container.data;return NI(e.container,n+t.length,o)})}};const RI=(e,t,n)=>{if(!je(e)){return C.none()}const o=e.data;if(t<=o.length){return C.some(wI(e,t))}else{const s=Zl(xI);return C.from(s.forwards(e,t,kI(e),n)).bind(e=>RI(e.container,t-o.length,n))}};const AI=(e,t,n,o,s)=>{const r=Zl(e,EI(e));return C.from(r.backwards(t,n,o,s))};const DI=e=>e.collapsed&&je(e.startContainer);const OI=e=>_i(e.toString().replace(/\u00A0/g," "));const TI=e=>e!==""&&"  \f\n\r\t\v".indexOf(e)!==-1;const BI=(e,t)=>e.substring(t.length);const PI=(e,t,n)=>{let o;const s=n.charAt(0);for(o=t-1;o>=0;o--){const r=e.charAt(o);if(TI(r)){return C.none()}if(s===r&&Nt(e,n,o,t)){break}}return C.some(o)};const LI=(e,s,r,i=0)=>{if(!DI(s)){return C.none()}const o={text:"",offset:0};const t=(e,t,n)=>{o.text=n+o.text;o.offset+=t;return PI(o.text,o.offset,r).getOr(t)};const n=e.getParent(s.startContainer,e.isBlock)||e.getRoot();return AI(e,s.startContainer,s.startOffset,t,n).bind(e=>{const t=s.cloneRange();t.setStart(e.container,e.offset);t.setEnd(s.endContainer,s.endOffset);if(t.collapsed){return C.none()}const n=OI(t);const o=n.lastIndexOf(r);if(o!==0||BI(n,r).length<i){return C.none()}else{return C.some({text:BI(n,r),range:t,trigger:r})}})};const MI=(o,e,s,t=0)=>OC(Fe.fromDom(e.startContainer)).fold(()=>LI(o,e,s,t),e=>{const t=o.createRng();t.selectNode(e.dom);const n=OI(t);return C.some({range:t,text:BI(n,s),trigger:s})});const II=e=>e.nodeType===Gn;const FI=e=>e.nodeType===Kn;const UI=t=>{if(II(t)){return wI(t,t.data.length)}else{const e=t.childNodes;return e.length>0?UI(e[e.length-1]):wI(t,e.length)}};const zI=(e,t)=>{const n=e.childNodes;if(n.length>0&&t<n.length){return zI(n[t],0)}else if(n.length>0&&FI(e)&&n.length===t){return UI(n[n.length-1])}else{return wI(e,t)}};const jI=(e,t)=>{var n;const o=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return AI(e,t.container,t.offset,(e,t)=>t===0?-1:t,o).filter(e=>{const t=e.container.data.charAt(e.offset-1);return!TI(t)}).isSome()};const HI=n=>e=>{const t=zI(e.startContainer,e.startOffset);return!jI(n,t)};const $I=(t,n,e)=>xe(e.triggers,e=>MI(t,n,e));const VI=(t,n)=>{const e=n();const o=t.selection.getRng();return $I(t.dom,o,e).bind(e=>qI(t,n,e))};const qI=(t,e,n,o={})=>{var s;const r=e();const i=t.selection.getRng();const c=(s=i.startContainer.nodeValue)!==null&&s!==void 0?s:"";const a=S(r.lookupByTrigger(n.trigger),e=>n.text.length>=e.minChars&&e.matches.getOrThunk(()=>HI(t.dom))(n.range,c,n.text));if(a.length===0){return C.none()}const l=Promise.all(y(a,t=>{const e=t.fetch(n.text,t.maxResults,o);return e.then(e=>({matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))}));return C.some({lookupData:l,context:n})};var WI;(function(e){e[e["Error"]=0]="Error";e[e["Value"]=1]="Value"})(WI||(WI={}));const KI=(e,t,n)=>e.stype===WI.Error?t(e.serror):n(e.svalue);const GI=e=>{const t=[];const n=[];Le(e,e=>{KI(e,e=>n.push(e),e=>t.push(e))});return{values:t,errors:n}};const YI=(e,t)=>{if(e.stype===WI.Error){return{stype:WI.Error,serror:t(e.serror)}}else{return e}};const XI=(e,t)=>{if(e.stype===WI.Value){return{stype:WI.Value,svalue:t(e.svalue)}}else{return e}};const QI=(e,t)=>{if(e.stype===WI.Value){return t(e.svalue)}else{return e}};const JI=(e,t)=>{if(e.stype===WI.Error){return t(e.serror)}else{return e}};const ZI=e=>({stype:WI.Value,svalue:e});const eF=e=>({stype:WI.Error,serror:e});const tF=e=>KI(e,xu.error,xu.value);const nF=e=>e.fold(eF,ZI);const oF={fromResult:nF,toResult:tF,svalue:ZI,partition:GI,serror:eF,bind:QI,bindError:JI,map:XI,mapError:YI,fold:KI};const sF=e=>{return I(e)&&Ee(e).length>100?" removed due to size":JSON.stringify(e,null,2)};const rF=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Be("... (only showing first ten failures)")}]):e;return y(t,e=>{return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()})};const iF=(e,t)=>{return oF.serror([{path:e,getErrorInfo:t}])};const cF=(e,t,n)=>iF(e,()=>'Could not find valid *required* value for "'+t+'" in '+sF(n));const aF=(e,t)=>iF(e,()=>'Choice schema did not contain choice key: "'+t+'"');const lF=(e,t,n)=>iF(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+sF(t));const dF=(e,t)=>iF(e,Be(t));const uF=(t,n,e,o)=>{const s=p(e,o);return s.fold(()=>lF(t,e,o),e=>e.extract(t.concat(["branch: "+o]),n))};const fF=(o,s)=>{const e=(t,n)=>{const e=p(n,o);return e.fold(()=>aF(t,o),e=>uF(t,n,s,e))};const t=()=>"chooseOn("+o+"). Possible values: "+Ee(s);return{extract:e,toString:t}};const mF=(e,t)=>{return t};const gF=(e,t)=>{const n=F(e)&&F(t);return n?hF(e,t):t};const pF=r=>{return(...t)=>{if(t.length===0){throw new Error(`Can't merge zero objects`)}const n={};for(let e=0;e<t.length;e++){const o=t[e];for(const s in o){if(Ie(o,s)){n[s]=r(n[s],o[s])}}}return n}};const hF=pF(gF);const bF=pF(mF);const vF=()=>({tag:"required",process:{}});const yF=e=>({tag:"defaultedThunk",process:e});const CF=e=>yF(Be(e));const wF=()=>({tag:"option",process:{}});const xF=(e,t)=>e.length>0?oF.svalue(hF(t,bF.apply(undefined,e))):oF.svalue(t);const kF=e=>K(oF.serror,me)(e);const EF=(e,t)=>{const n=oF.partition(e);return n.errors.length>0?kF(n.errors):xF(n.values,t)};const SF=e=>{const t=oF.partition(e);return t.errors.length>0?kF(t.errors):oF.svalue(t.values)};const _F={consolidateObj:EF,consolidateArr:SF};const NF=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o});const RF=(e,t)=>({tag:"custom",newKey:e,instantiator:t});const AF=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}};const DF=n=>{const e=(t,e)=>{return oF.bindError(n(e),e=>dF(t,e))};const t=Be("val");return{extract:e,toString:t}};const OF=DF(oF.svalue);const TF=(e,t,n,o)=>p(t,n).fold(()=>cF(e,n,t),o);const BF=(e,t,n,o)=>{const s=p(e,t).getOrThunk(()=>n(e));return o(s)};const PF=(e,t,n)=>n(p(e,t));const LF=(t,e,n,o)=>{const s=p(t,e).map(e=>e===true?n(t):e);return o(s)};const MF=(n,o,s,r,i)=>{const c=e=>i.extract(o.concat([r]),e);const e=e=>e.fold(()=>oF.svalue(C.none()),e=>{const t=i.extract(o.concat([r]),e);return oF.map(t,C.some)});switch(n.tag){case"required":return TF(o,s,r,c);case"defaultedThunk":return BF(s,r,n.process,c);case"option":return PF(s,r,e);case"defaultedOptionThunk":return LF(s,r,n.process,e);case"mergeWithThunk":{return BF(s,r,Be({}),e=>{const t=hF(n.process(s),e);return c(t)})}}};const IF=(r,i,t)=>{const c={};const a=[];for(const e of t){AF(e,(e,t,n,o)=>{const s=MF(n,r,i,e,o);oF.fold(s,e=>{a.push(...e)},e=>{c[t]=e})},(e,t)=>{c[e]=t(i)})}return a.length>0?oF.serror(a):oF.svalue(c)};const FF=n=>{const e=(e,t)=>IF(e,t,n);const t=()=>{const e=y(n,e=>AF(e,(e,t,n,o)=>e+" -> "+o.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+e.join("\n")+"}"};return{extract:e,toString:t}};const UF=o=>{const e=(n,e)=>{const t=y(e,(e,t)=>o.extract(n.concat(["["+t+"]"]),e));return _F.consolidateArr(t)};const t=()=>"array("+o.toString()+")";return{extract:e,toString:t}};const zF=t=>DF(e=>t(e).fold(oF.serror,oF.svalue));const jF=(e,t,n)=>{const o=t.extract([e],n);return oF.mapError(o,e=>({input:n,errors:e}))};const HF=(e,t,n)=>oF.toResult(jF(e,t,n));const $F=e=>{return"Errors: \n"+rF(e.errors).join("\n")+"\n\nInput object: "+sF(e.input)};const VF=(e,t)=>fF(e,_e(t,FF));const qF=Be(OF);const WF=(n,o)=>DF(e=>{const t=typeof e;return n(e)?oF.svalue(e):oF.serror(`Expected type: ${o} but got: ${t}`)});const KF=WF(q,"number");const GF=WF(Re,"string");const YF=WF(j,"boolean");const XF=WF(Oe,"function");const QF=NF;const JF=RF;const ZF=t=>zF(e=>m(t,e)?xu.value(e):xu.error(`Unsupported value: "${e}", choose one of "${t.join(", ")}".`));const eU=(e,t)=>QF(e,e,vF(),t);const tU=e=>eU(e,GF);const nU=e=>eU(e,XF);const oU=(e,t)=>QF(e,e,vF(),UF(t));const sU=(e,t)=>QF(e,e,wF(),t);const rU=e=>sU(e,GF);const iU=e=>sU(e,XF);const cU=(e,t)=>QF(e,e,CF(t),qF());const aU=(e,t,n)=>QF(e,e,CF(t),n);const lU=(e,t)=>aU(e,t,KF);const dU=(e,t)=>aU(e,t,GF);const uU=(e,t,n)=>aU(e,t,ZF(n));const fU=(e,t)=>aU(e,t,YF);const mU=(e,t)=>aU(e,t,XF);const gU=(e,t,n)=>aU(e,t,UF(n));const pU=tU("type");const hU=nU("fetch");const bU=nU("onAction");const vU=mU("onSetup",()=>Te);const yU=rU("text");const CU=rU("icon");const wU=rU("tooltip");const xU=rU("label");const kU=fU("active",false);const EU=fU("enabled",true);const SU=fU("primary",false);const _U=e=>cU("columns",e);const NU=e=>dU("type",e);const RU=FF([pU,tU("trigger"),lU("minChars",1),_U(1),lU("maxResults",10),iU("matches"),hU,bU,gU("highlightOn",[],GF)]);const AU=e=>HF("Autocompleter",RU,{trigger:e.ch,...e});const DU=[EU,wU,CU,yU,vU];const OU=[kU].concat(DU);const TU=[mU("predicate",a),uU("scope","node",["node","editor"]),uU("position","selection",["node","selection","line"])];const BU=DU.concat([NU("contextformbutton"),SU,bU,JF("original",Y)]);const PU=OU.concat([NU("contextformbutton"),SU,bU,JF("original",Y)]);const LU=DU.concat([NU("contextformbutton")]);const MU=OU.concat([NU("contextformtogglebutton")]);const IU=VF("type",{contextformbutton:BU,contextformtogglebutton:PU});FF([NU("contextform"),mU("initValue",Be("")),xU,oU("commands",IU),sU("launch",VF("type",{contextformbutton:LU,contextformtogglebutton:MU}))].concat(TU));const FU=e=>{const t=e.ui.registry.getAll().popups;const n=_e(t,e=>AU(e).fold(e=>{throw new Error($F(e))},Y));const o=tt(Qe(n,e=>e.trigger));const s=Je(n);const r=t=>S(s,e=>e.trigger===t);return{dataset:n,triggers:o,lookupByTrigger:r}};const UU=(e,n)=>{const o=Nl(n.load,50);e.on("keypress compositionend",e=>{if(e.which===27){return}o.throttle()});e.on("keydown",e=>{const t=e.which;if(t===8){o.throttle()}else if(t===27){n.cancelIfNecessary()}});e.on("remove",o.cancel)};const zU=s=>{const r=Sl();const i=al(false);const t=r.isSet;const c=()=>{if(t()){fD(s);Ab(s);i.set(false);r.clear()}};const n=e=>{if(!t()){uD(s,e.range);r.set({trigger:e.trigger,matchLength:e.text.length})}};const o=ft(()=>FU(s));const a=t=>r.get().map(e=>MI(s.dom,s.selection.getRng(),e.trigger).bind(e=>qI(s,o,e,t))).getOrThunk(()=>VI(s,o));const l=e=>{a(e).fold(c,o=>{n(o.context);o.lookupData.then(n=>{r.get().map(e=>{const t=o.context;if(e.trigger===t.trigger){if(t.text.length-e.matchLength>=10){c()}else{r.set({...e,matchLength:t.text.length});if(i.get()){Rb(s,{lookupData:n})}else{i.set(true);Nb(s,{lookupData:n})}}}})})})};s.addCommand("mceAutocompleterReload",(e,t)=>{const n=I(t)?t.fetchOptions:{};l(n)});s.addCommand("mceAutocompleterClose",c);UU(s,{cancelIfNecessary:c,load:l})};const jU=i=>(e,t,n={})=>{const o=e.getBody();const s={bubbles:true,composed:true,data:null,isComposing:false,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:false,srcElement:o,cancelable:false,preventDefault:Te,inputType:t};const r=La(new InputEvent(i));return e.dispatch(i,{...r,...s,...n})};const HU=jU("input");const $U=jU("beforeinput");const VU=(n,e,o)=>{const s=o.keyCode===$.BACKSPACE?"deleteContentBackward":"deleteContentForward";xM([{keyCode:$.BACKSPACE,action:d(NL,n)},{keyCode:$.BACKSPACE,action:d(VT,n,false)},{keyCode:$.DELETE,action:d(VT,n,true)},{keyCode:$.BACKSPACE,action:d(kT,n,false)},{keyCode:$.DELETE,action:d(kT,n,true)},{keyCode:$.BACKSPACE,action:d(IP,n,e,false)},{keyCode:$.DELETE,action:d(IP,n,e,true)},{keyCode:$.BACKSPACE,action:d(Jx,n,false)},{keyCode:$.DELETE,action:d(Jx,n,true)},{keyCode:$.BACKSPACE,action:d(WT,n,false)},{keyCode:$.DELETE,action:d(WT,n,true)},{keyCode:$.BACKSPACE,action:d(gL,n,false)},{keyCode:$.DELETE,action:d(gL,n,true)},{keyCode:$.BACKSPACE,action:d(fT,n,false)},{keyCode:$.DELETE,action:d(fT,n,true)},{keyCode:$.BACKSPACE,action:d(rT,n,false)},{keyCode:$.DELETE,action:d(rT,n,true)},{keyCode:$.BACKSPACE,action:d(iL,n,false)},{keyCode:$.DELETE,action:d(iL,n,true)}],o).filter(e=>n.selection.isEditable()).each(e=>{o.preventDefault();const t=$U(n,s);if(!t.isDefaultPrevented()){e();HU(n,s)}})};const qU=(e,t,n)=>{const o=gn();const s=o.os;const r=o.browser;const i=s.isMacOS()?[{keyCode:$.BACKSPACE,altKey:true,action:d(dL,e)},{keyCode:$.DELETE,altKey:true,action:d(dL,e)}]:[{keyCode:$.BACKSPACE,ctrlKey:true,action:d(dL,e)},{keyCode:$.DELETE,ctrlKey:true,action:d(dL,e)}];if(s.isMacOS()&&n){i.push({keyCode:r.isFirefox()?224:91,action:d(dL,e)})}wM([{keyCode:$.BACKSPACE,action:d($T,e)},{keyCode:$.DELETE,action:d($T,e)},...i],t)};const WU=(t,n)=>{let o=false;t.on("keydown",e=>{o=e.keyCode===$.BACKSPACE;if(!e.isDefaultPrevented()){VU(t,n,e)}});t.on("keyup",e=>{if(!e.isDefaultPrevented()){qU(t,e,o)}o=false})};const KU=e=>{while(e){if(ze(e)||je(e)&&e.data&&/[\r\n\s]/.test(e.data)){return e}e=e.nextSibling}return null};const GU=(e,n)=>{const t=e.dom;const o=e.schema.getMoveCaretBeforeOnEnterElements();if(!n){return}if(/^(LI|DT|DD)$/.test(n.nodeName)){const e=KU(n.firstChild);if(e&&/^(UL|OL|DL)$/.test(e.nodeName)){n.insertBefore(t.doc.createTextNode($r),n.firstChild)}}const s=t.createRng();n.normalize();if(n.hasChildNodes()){const r=new vr(n,n);let e=n;let t;while(t=r.current()){if(je(t)){s.setStart(t,0);s.setEnd(t,0);break}if(o[t.nodeName.toLowerCase()]){s.setStartBefore(t);s.setEndBefore(t);break}e=t;t=r.next()}if(!t){s.setStart(e,0);s.setEnd(e,0)}}else{if(E(n)){if(n.nextSibling&&t.isBlock(n.nextSibling)){s.setStartBefore(n);s.setEndBefore(n)}else{s.setStartAfter(n);s.setEndAfter(n)}}else{s.setStart(n,0);s.setEnd(n,0)}}e.selection.setRng(s);hy(e,s)};const YU=(e,t)=>{const n=e.getRoot();let o;let s=t;while(s!==n&&s&&e.getContentEditable(s)!=="false"){if(e.getContentEditable(s)==="true"){o=s}s=s.parentNode}return s!==n?o:n};const XU=e=>{return C.from(e.dom.getParent(e.selection.getStart(true),e.dom.isBlock))};const QU=e=>{return XU(e).fold(Be(""),e=>{return e.nodeName.toUpperCase()})};const JU=e=>{return XU(e).filter(e=>{return mi(Fe.fromDom(e))}).isSome()};const ZU=(e,t)=>{return e.firstChild&&e.firstChild.nodeName===t};const ez=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e};const tz=(e,t)=>{const n=e===null||e===void 0?void 0:e.parentNode;return De(n)&&n.nodeName===t};const nz=e=>{return De(e)&&/^(OL|UL|LI)$/.test(e.nodeName)};const oz=e=>{return De(e)&&/^(LI|DT|DD)$/.test(e.nodeName)};const sz=e=>{return nz(e)&&nz(e.parentNode)};const rz=e=>{const t=e.parentNode;return oz(t)?t:e};const iz=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];while(o){if(ze(o)){break}o=o[n?"nextSibling":"previousSibling"]}return o===t};const cz=(e,t,n,o,s)=>{const r=e.dom;const i=e.selection.getRng();const c=n.parentNode;if(n===e.getBody()||!c){return}if(sz(n)){s="LI"}let a=t(s);if(iz(n,o,true)&&iz(n,o,false)){if(tz(n,"LI")){const l=rz(n);r.insertAfter(a,l);if(ez(n)){r.remove(l)}else{r.remove(n)}}else{r.replace(a,n)}}else if(iz(n,o,true)){if(tz(n,"LI")){r.insertAfter(a,rz(n));a.appendChild(r.doc.createTextNode(" "));a.appendChild(n)}else{c.insertBefore(a,n)}r.remove(o)}else if(iz(n,o,false)){r.insertAfter(a,rz(n));r.remove(o)}else{n=rz(n);const d=i.cloneRange();d.setStartAfter(o);d.setEndAfter(n);const u=d.extractContents();if(s==="LI"&&ZU(u,"LI")){a=u.firstChild;r.insertAfter(u,n)}else{r.insertAfter(u,n);r.insertAfter(a,n)}r.remove(o)}GU(e,a)};const az=e=>{Le(pr(Fe.fromDom(e),eo),e=>{const t=e.dom;t.nodeValue=_i(t.data)})};const lz=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"};const dz=(e,t)=>{return t&&t.nodeName==="A"&&e.isEmpty(t)};const uz=e=>{e.innerHTML='<br data-mce-bogus="1">'};const fz=(e,t)=>{return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t};const mz=(e,t)=>{return De(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false"};const gz=(e,t,n)=>{var o;const s=[];if(!n){return}let r=n;while(r=r.firstChild){if(e.isBlock(r)){return}if(ze(r)&&!t[r.nodeName.toLowerCase()]){s.push(r)}}let i=s.length;while(i--){r=s[i];if(!r.hasChildNodes()||r.firstChild===r.lastChild&&((o=r.firstChild)===null||o===void 0?void 0:o.nodeValue)===""){e.remove(r)}else{if(dz(e,r)){e.remove(r)}}}};const pz=(e,t,n)=>{if(!je(t)){return n}else if(e){return n===1&&t.data.charAt(n-1)===Ei?0:n}else{return n===t.data.length-1&&t.data.charAt(n)===Ei?t.data.length:n}};const hz=e=>{const t=e.cloneRange();t.setStart(e.startContainer,pz(true,e.startContainer,e.startOffset));t.setEnd(e.endContainer,pz(false,e.endContainer,e.endOffset));return t};const bz=e=>{let t=e;do{if(je(t)){t.data=t.data.replace(/^[\r\n]+/,"")}t=t.firstChild}while(t)};const vz=(e,s,t)=>{const r=e.dom;C.from(t.style).map(r.parseStyle).each(e=>{const t=Bs(Fe.fromDom(s));const n={...t,...e};r.setStyles(s,n)});const n=C.from(t.class).map(e=>e.split(/\s+/));const o=C.from(s.className).map(e=>S(e.split(/\s+/),e=>e!==""));Bn(n,o,(t,e)=>{const n=S(e,e=>!m(t,e));const o=[...t,...n];r.setAttrib(s,"class",o.join(" "))});const i=["style","class"];const c=Xe(t,(e,t)=>!m(i,t));r.setAttribs(s,c)};const yz=(e,t)=>{const n=Yu(e);if(n.toLowerCase()===t.tagName.toLowerCase()){const o=Xu(e);vz(e,t,o)}};const Cz=(n,o,s,r,i)=>{var e,c;const a=n.dom;const l=(e=YU(a,r))!==null&&e!==void 0?e:a.getRoot();let d=a.getParent(r,a.isBlock);if(!d||!mz(a,d)){d=d||l;if(!d.hasChildNodes()){const f=a.create(o);yz(n,f);d.appendChild(f);s.setStart(f,0);s.setEnd(f,0);return f}let t=r;while(t&&t.parentNode!==d){t=t.parentNode}let e;while(t&&!a.isBlock(t)){e=t;t=t.previousSibling}const u=(c=e===null||e===void 0?void 0:e.parentElement)===null||c===void 0?void 0:c.nodeName;if(e&&u&&n.schema.isValidChild(u,o.toLowerCase())){const m=e.parentNode;const f=a.create(o);yz(n,f);m.insertBefore(f,e);t=e;while(t&&!a.isBlock(t)){const e=t.nextSibling;f.appendChild(t);t=e}s.setStart(r,i);s.setEnd(r,i)}}return r};const wz=(e,t)=>{t.normalize();const n=t.lastChild;if(!n||ze(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",true))){e.add(t,"br")}};const xz=(e,t)=>{const n=tf(e);if(Ae(t)){return false}else if(Re(n)){return m(U.explode(n),t.nodeName.toLowerCase())}else{return n}};const kz=(i,e)=>{let c;let s;let a;let t;let r=false;const l=i.dom;const d=i.schema,u=d.getNonEmptyElements();const n=i.selection.getRng();const f=Yu(i);const o=e=>{let t=c;const n=d.getTextInlineElements();let o;if(e||a==="TABLE"||a==="HR"){o=l.create(e||f)}else{o=v.cloneNode(false)}let s=o;if(ef(i)===false){l.setAttrib(o,"style",null);l.setAttrib(o,"class",null)}else{do{if(n[t.nodeName]){if(sp(t)||Np(t)){continue}const r=t.cloneNode(false);l.setAttrib(r,"id","");if(o.hasChildNodes()){r.appendChild(o.firstChild);o.appendChild(r)}else{s=r;o.appendChild(r)}}}while((t=t.parentNode)&&t!==b)}yz(i,o);uz(s);return o};const m=e=>{const t=pz(e,c,s);if(je(c)&&(e?t>0:t<c.data.length)){return false}if(c.parentNode===v&&r&&!e){return true}if(e&&ze(c)&&c===v.firstChild){return true}if(fz(c,"TABLE")||fz(c,"HR")){return r&&!e||!r&&e}const n=new vr(c,v);if(je(c)){if(e&&t===0){n.prev()}else if(!e&&t===c.data.length){n.next()}}let o;while(o=n.current()){if(ze(o)){if(!o.getAttribute("data-mce-bogus")){const e=o.nodeName.toLowerCase();if(u[e]&&e!=="br"){return false}}}else if(je(o)&&!sc(o.data)){return false}if(e){n.prev()}else{n.next()}}return true};const g=()=>{let e;if(/^(H[1-6]|PRE|FIGURE)$/.test(a)&&y!=="HGROUP"){e=o(f)}else{e=o()}if(xz(i,t)&&mz(l,t)&&l.isEmpty(v)){e=l.split(t,v)}else{l.insertAfter(e,v)}GU(i,e);return e};Lv(l,n).each(e=>{n.setStart(e.startContainer,e.startOffset);n.setEnd(e.endContainer,e.endOffset)});c=n.startContainer;s=n.startOffset;const p=!!(e&&e.shiftKey);const h=!!(e&&e.ctrlKey);if(ze(c)&&c.hasChildNodes()){r=s>c.childNodes.length-1;c=c.childNodes[Math.min(s,c.childNodes.length-1)]||c;if(r&&je(c)){s=c.data.length}else{s=0}}const b=YU(l,c);if(!b||lz(i,c)){return}if(!p){c=Cz(i,f,n,c,s)}let v=l.getParent(c,l.isBlock)||l.getRoot();t=De(v===null||v===void 0?void 0:v.parentNode)?l.getParent(v.parentNode,l.isBlock):null;a=v?v.nodeName.toUpperCase():"";const y=t?t.nodeName.toUpperCase():"";if(y==="LI"&&!h){const x=t;v=x;t=x.parentNode;a=y}if(/^(LI|DT|DD)$/.test(a)&&ze(t)){if(l.isEmpty(v)){cz(i,o,t,v,f);return}}if(v===i.getBody()||!mz(l,v)){return}const C=v.parentNode;let w;if(Ai(v)){w=zi(v);if(l.isEmpty(v)){uz(v)}yz(i,w);GU(i,w)}else if(m(false)){w=g()}else if(m(true)&&C){w=C.insertBefore(o(),v);GU(i,fz(v,"HR")?w:v)}else{const k=hz(n).cloneRange();k.setEndAfter(v);const E=k.extractContents();az(E);bz(E);w=E.firstChild;l.insertAfter(E,v);gz(l,u,w);wz(l,v);if(l.isEmpty(v)){uz(v)}w.normalize();if(l.isEmpty(w)){l.remove(w);g()}else{yz(i,w);GU(i,w)}}l.setAttrib(w,"id","");i.dispatch("NewBlock",{newBlock:w})};const Ez="insertParagraph";const Sz={insert:kz,fakeEventName:Ez};const _z=(e,t,n)=>{const o=new vr(t,n);let s;const r=e.getNonEmptyElements();while(s=o.next()){if(r[s.nodeName.toLowerCase()]||je(s)&&s.length>0){return true}}return false};const Nz=(e,t,n)=>{const o=e.dom.createRng();if(!n){o.setStartAfter(t);o.setEndAfter(t)}else{o.setStartBefore(t);o.setEndBefore(t)}e.selection.setRng(o);hy(e,o)};const Rz=(e,t)=>{const n=e.selection;const o=e.dom;const s=n.getRng();let r;let i=false;Lv(o,s).each(e=>{s.setStart(e.startContainer,e.startOffset);s.setEnd(e.endContainer,e.endOffset)});let c=s.startOffset;let a=s.startContainer;if(ze(a)&&a.hasChildNodes()){const m=c>a.childNodes.length-1;a=a.childNodes[Math.min(c,a.childNodes.length-1)]||a;if(m&&je(a)){c=a.data.length}else{c=0}}let l=o.getParent(a,o.isBlock);const d=l&&l.parentNode?o.getParent(l.parentNode,o.isBlock):null;const u=d?d.nodeName.toUpperCase():"";const f=!!(t&&t.ctrlKey);if(u==="LI"&&!f){l=d}if(je(a)&&c>=a.data.length){if(!_z(e.schema,a,l||o.getRoot())){r=o.create("br");s.insertNode(r);s.setStartAfter(r);s.setEndAfter(r);i=true}}r=o.create("br");Hd(o,s,r);Nz(e,r,i);e.undoManager.add()};const Az=(e,t)=>{const n=Fe.fromTag("br");Ms(Fe.fromDom(t),n);e.undoManager.add()};const Dz=(e,t)=>{if(!Tz(e.getBody(),t)){Is(Fe.fromDom(t),Fe.fromTag("br"))}const n=Fe.fromTag("br");Is(Fe.fromDom(t),n);Nz(e,n.dom,false);e.undoManager.add()};const Oz=e=>{return E(e.getNode())};const Tz=(e,t)=>{if(Oz(M.after(t))){return true}else{return Zg(e,M.after(t)).map(e=>{return E(e.getNode())}).getOr(false)}};const Bz=e=>{return e&&e.nodeName==="A"&&"href"in e};const Pz=e=>{return e.fold(a,Bz,Bz,a)};const Lz=e=>{const t=h(Fw,e);const n=M.fromRangeStart(e.selection.getRng());return pB(t,e.getBody(),n).filter(Pz)};const Mz=(e,t)=>{t.fold(Te,h(Az,e),h(Dz,e),Te)};const Iz=(e,t)=>{const n=Lz(e);if(n.isSome()){n.each(h(Mz,e))}else{Rz(e,t)}};const Fz="insertLineBreak";const Uz={insert:Iz,fakeEventName:Fz};const zz=(e,t)=>{return XU(e).filter(e=>{return t.length>0&&Bo(Fe.fromDom(e),t)}).isSome()};const jz=e=>{return zz(e,Ju(e))};const Hz=e=>{return zz(e,Zu(e))};const $z=Eu.generate([{br:[]},{block:[]},{none:[]}]);const Vz=(e,t)=>{return Hz(e)};const qz=n=>{return(e,t)=>{return JU(e)===n}};const Wz=(o,s)=>(e,t)=>{const n=QU(e)===o.toUpperCase();return n===s};const Kz=e=>{const t=YU(e.dom,e.selection.getStart());return Ae(t)};const Gz=e=>Wz("pre",e);const Yz=()=>Wz("summary",true);const Xz=n=>{return(e,t)=>{return Gu(e)===n}};const Qz=(e,t)=>{return jz(e)};const Jz=(e,t)=>{return t};const Zz=e=>{const t=Yu(e);const n=YU(e.dom,e.selection.getStart());return De(n)&&e.schema.isValidChild(n.nodeName,t)};const ej=(t,s)=>{return(n,o)=>{const e=le(t,(e,t)=>{return e&&t(n,o)},true);return e?C.some(s):C.none()}};const tj=(e,t)=>{return rB([ej([Vz],$z.none()),ej([Gz(true),Kz],$z.none()),ej([Yz()],$z.br()),ej([Gz(true),Xz(false),Jz],$z.br()),ej([Gz(true),Xz(false)],$z.block()),ej([Gz(true),Xz(true),Jz],$z.block()),ej([Gz(true),Xz(true)],$z.br()),ej([qz(true),Jz],$z.br()),ej([qz(true)],$z.block()),ej([Qz],$z.br()),ej([Jz],$z.br()),ej([Zz],$z.block())],[e,!!(t&&t.shiftKey)]).getOr($z.none())};const nj=(e,t,n)=>{if(!t.selection.isCollapsed()){Gw(t)}if(De(n)){const o=$U(t,e.fakeEventName);if(o.isDefaultPrevented()){return}}e.insert(t,n);if(De(n)){HU(t,e.fakeEventName)}};const oj=(e,t)=>{const n=()=>nj(Uz,e,t);const o=()=>nj(Sz,e,t);const s=tj(e,t);switch(Qu(e)){case"linebreak":s.fold(n,n,Te);break;case"block":s.fold(o,o,Te);break;case"invert":s.fold(o,n,Te);break;default:s.fold(n,o,Te);break}};const sj=(e,t)=>{if(t.isDefaultPrevented()){return}t.preventDefault();yA(e.undoManager);e.undoManager.transact(()=>{oj(e,t)})};const rj=t=>{t.on("keydown",e=>{if(e.keyCode===$.ENTER){sj(t,e)}})};const ij=(e,t,n)=>{const o=H.os.isMacOS()||H.os.isiOS();wM([{keyCode:$.END,action:d(aM,e,true)},{keyCode:$.HOME,action:d(aM,e,false)},...!o?[{keyCode:$.HOME,action:d(lM,e,false),ctrlKey:true,shiftKey:true},{keyCode:$.END,action:d(lM,e,true),ctrlKey:true,shiftKey:true}]:[],{keyCode:$.END,action:d(SM,e,true)},{keyCode:$.HOME,action:d(SM,e,false)},{keyCode:$.END,action:d(DP,e,true,t)},{keyCode:$.HOME,action:d(DP,e,false,t)}],n).each(e=>{n.preventDefault()})};const cj=(t,n)=>{t.on("keydown",e=>{if(!e.isDefaultPrevented()){ij(t,n,e)}})};const aj=t=>{t.on("input",e=>{if(!e.isComposing){fw(t)}})};const lj=gn();const dj=(e,t,n)=>{wM([{keyCode:$.PAGE_UP,action:d(DP,e,false,t)},{keyCode:$.PAGE_DOWN,action:d(DP,e,true,t)}],n)};const uj=e=>e.stopImmediatePropagation();const fj=e=>e.keyCode===$.PAGE_UP||e.keyCode===$.PAGE_DOWN;const mj=(e,t,n)=>{if(n&&!e.get()){t.on("NodeChange",uj,true)}else if(!n&&e.get()){t.off("NodeChange",uj)}e.set(n)};const gj=(t,n)=>{if(lj.os.isMacOS()){return}const o=al(false);t.on("keydown",e=>{if(fj(e)){mj(o,t,true)}});t.on("keyup",e=>{if(!e.isDefaultPrevented()){dj(t,n,e)}if(fj(e)&&o.get()){mj(o,t,false);t.nodeChanged()}})};const pj=(n,o)=>{const e=o.container();const t=o.offset();if(je(e)){e.insertData(t,n);return C.some(M(e,t+n.length))}else{return Eg(o).map(e=>{const t=Fe.fromText(n);if(o.isAtEnd()){Is(e,t)}else{Ms(e,t)}return M(t.dom,n.length)})}};const hj=h(pj,$r);const bj=h(pj," ");const vj=t=>e=>e.fold(e=>ep(t.dom,M.before(e)),e=>tp(e),e=>np(e),e=>Zg(t.dom,M.after(e)));const yj=(t,n)=>e=>Z0(t,e)?hj(n):bj(n);const Cj=t=>e=>{t.selection.setRng(e.toRange());t.nodeChanged();return true};const wj=t=>{const n=M.fromRangeStart(t.selection.getRng());const o=Fe.fromDom(t.getBody());if(t.selection.isCollapsed()){const e=h(Fw,t);const s=M.fromRangeStart(t.selection.getRng());return pB(e,t.getBody(),s).bind(vj(o)).map(e=>()=>yj(o,n)(e).each(Cj(t)))}else{return C.none()}};const xj=(n,o)=>{xM([{keyCode:$.SPACEBAR,action:d(wj,n)}],o).each(e=>{o.preventDefault();const t=$U(n,"insertText",{data:" "});if(!t.isDefaultPrevented()){e();HU(n,"insertText",{data:" "})}})};const kj=t=>{t.on("keydown",e=>{if(!e.isDefaultPrevented()){xj(t,e)}})};const Ej=e=>{if(Dm(e)){return[{keyCode:$.TAB,action:d(vI,e,true)},{keyCode:$.TAB,shiftKey:true,action:d(vI,e,false)}]}else{return[]}};const Sj=(e,t)=>{wM([...Ej(e)],t).each(e=>{t.preventDefault()})};const _j=t=>{t.on("keydown",e=>{if(!e.isDefaultPrevented()){Sj(t,e)}})};const Nj=e=>{e.addShortcut("Meta+P","","mcePrint");zU(e);if(LA(e)){return al(null)}else{const t=NP(e);JL(e);CI(e,t);WU(e,t);rj(e);kj(e);aj(e);_j(e);cj(e,t);gj(e,t);return t}};class Rj{constructor(o){this.lastPath=[];this.editor=o;let s;const t=this;if(!("onselectionchange"in o.getDoc())){o.on("NodeChange click mouseup keyup focus",e=>{const t=o.selection.getRng();const n={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};if(e.type==="nodechange"||!Sv(n,s)){o.dispatch("SelectionChange")}s=n})}o.on("contextmenu",()=>{o.dispatch("SelectionChange")});o.on("SelectionChange",()=>{const e=o.selection.getStart(true);if(!e){return}if(nh(o)&&!t.isSameElementPath(e)&&o.dom.isChildOf(e,o.getBody())){o.nodeChanged({selectionChange:true})}});o.on("mouseup",e=>{if(!e.isDefaultPrevented()&&nh(o)){if(o.selection.getNode().nodeName==="IMG"){Fy.setEditorTimeout(o,()=>{o.nodeChanged()})}else{o.nodeChanged()}}})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!Vf(this.editor)&&!this.editor.mode.isReadOnly()){const s=this.editor.getBody();o=n.getStart(true)||s;if(o.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(o,s)){o=s}const t=[];this.editor.dom.getParent(o,e=>{if(e===s){return true}else{t.push(e);return false}});this.editor.dispatch("NodeChange",{...e,element:o,parents:t})}}isSameElementPath(e){let t;const n=this.editor;const o=pe(n.dom.getParents(e,f,n.getBody()));if(o.length===this.lastPath.length){for(t=o.length;t>=0;t--){if(o[t]!==this.lastPath[t]){break}}if(t===-1){this.lastPath=o;return true}}this.lastPath=o;return false}}const Aj="x-tinymce/html";const Dj=Be(Aj);const Oj="\x3c!-- "+Aj+" --\x3e";const Tj=e=>Oj+e;const Bj=e=>e.replace(Oj,"");const Pj=e=>e.indexOf(Oj)!==-1;const Lj=e=>{return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)};const Mj=(e,t)=>{let n="<"+e;const o=Qe(t,(e,t)=>t+'="'+pa.encodeAllRaw(e)+'"');if(o.length){n+=" "+o.join(" ")}return n+">"};const Ij=(e,t,n)=>{const o=e.split(/\n\n/);const s=Mj(t,n);const r="</"+t+">";const i=y(o,e=>{return e.split(/\n/).join("<br />")});const c=e=>{return s+e+r};return i.length===1?i[0]:y(i,c).join("")};const Fj="%MCEPASTEBIN%";const Uj=(e,t)=>{const{dom:n,selection:o}=e;const s=e.getBody();t.set(o.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Fj);if(H.browser.isFirefox()){n.setStyle(r,"left",n.getStyle(s,"direction",true)==="rtl"?65535:-65535)}n.bind(r,"beforedeactivate focusin focusout",e=>{e.stopPropagation()});r.focus();o.select(r,true)};const zj=(t,n)=>{const o=t.dom;if(jj(t)){let e;const s=n.get();while(e=jj(t)){o.remove(e);o.unbind(e)}if(s){t.selection.setRng(s)}}n.set(null)};const jj=e=>e.dom.get("mcepastebin");const Hj=e=>De(e)&&e.id==="mcepastebin";const $j=e=>{const n=e.dom;const t=(e,t)=>{e.appendChild(t);n.remove(t,true)};const[o,...s]=S(e.getBody().childNodes,Hj);Le(s,e=>{t(o,e)});const r=n.select("div[id=mcepastebin]",o);for(let e=r.length-1;e>=0;e--){const i=n.create("div");o.insertBefore(i,r[e]);t(i,r[e])}return o?o.innerHTML:""};const Vj=e=>e===Fj;const qj=e=>{const t=al(null);return{create:()=>Uj(e,t),remove:()=>zj(e,t),getEl:()=>jj(e),getHtml:()=>$j(e),getLastRng:t.get}};const Wj=e=>{const t=/<meta.*?Microsoft (Excel|Word|PowerPoint)\s[\d].*?>/;if(e.search(t)===-1)return e;let n=e;n=n.substring(n.indexOf("<html "),n.length);n=n.substring(0,n.lastIndexOf("</html>")+"</html>".length);const o=document.createElement("iframe");o.style.display="none";document.body.appendChild(o);const s=o.contentDocument||o.contentWindow.document;s.open();s.write(n);s.close();let r;let i;if(!s.styleSheets.length)return e;const c=s.styleSheets[s.styleSheets.length-1]["cssRules"];for(let e=0;e<c.length;e++){if(c[e].selectorText==null||c[e].selectorText==""||!c[e].selectorText.startsWith("."))continue;r=s.body.querySelectorAll(c[e].selectorText);for(i=0;i<r.length;i++){r[i].style.cssText=c[e].style.cssText+r[i].style.cssText}}const a=s.firstChild["outerHTML"];o.parentNode.removeChild(o);return a};const Kj=(t,e)=>{t=Wj(t);U.each(e,e=>{if(L(e,RegExp)){t=t.replace(e,"")}else{t=t.replace(e[0],e[1])}});return t};const Gj=e=>{const o=Aa();const t=iR({},o);let s="";const r=o.getVoidElements();const i=U.makeMap("script noscript style textarea video audio iframe object"," ");const c=o.getBlockElements();const a=t=>{const e=t.name,n=t;if(e==="br"){s+="\n";return}if(e==="wbr"){return}if(r[e]){s+=" "}if(i[e]){s+=" ";return}if(t.type===3){s+=t.value}if(!(t.name in o.getVoidElements())){let e=t.firstChild;if(e){do{a(e)}while(e=e.next)}}if(c[e]&&n.next){s+="\n";if(e==="p"){s+="\n"}}};e=Kj(e,[/<!\[[^\]]+\]>/g]);a(t.parse(e));return s};const Yj=e=>{const t=(e,t,n)=>{if(!t&&!n){return" "}return $r};e=Kj(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]);return e};const Xj=e=>{let t=0;return()=>{return e+t++}};const Qj=e=>{const t=e.toLowerCase();const n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return U.hasOwn(n,t)?"image/"+n[t]:"image/"+t};const Jj=(e,t)=>{const n=iR({sanitize:Em(e)},e.schema);n.addNodeFilter("meta",e=>{U.each(e,e=>{e.remove()})});const o=n.parse(t,{forced_root_block:false,isRootContent:true});return ZC({validate:true},e.schema).serialize(o)};const Zj=(e,t)=>({content:e,cancelled:t});const eH=(e,t,n)=>{const o=e.dom.create("div",{style:"display:none"},t);const s=Ob(e,o,n);return Zj(s.node.innerHTML,s.isDefaultPrevented())};const tH=(e,t,n)=>{const o=Db(e,t,n);const s=Jj(e,o.content);if(e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()){return eH(e,s,n)}else{return Zj(s,o.isDefaultPrevented())}};const nH=(e,t,n)=>{return tH(e,t,n)};const oH=(e,t)=>{e.insertContent(t,{merge:fm(e),paste:true});return true};const sH=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e);const rH=(e,t)=>{return sH(t)&&Pe(Am(e),e=>At(t.toLowerCase(),`.${e.toLowerCase()}`))};const iH=(e,t,n)=>{e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')});return true};const cH=(e,t,n)=>{e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",false,t)});return true};const aH=(e,t,n)=>!e.selection.isCollapsed()&&sH(t)?cH(e,t,n):false;const lH=(e,t,n)=>rH(e,t)?iH(e,t,n):false;const dH=(t,n)=>{U.each([aH,lH,oH],e=>{return!e(t,n,oH)})};const uH=(e,t,n)=>{if(n||!mm(e)){oH(e,t)}else{dH(e,t)}};const fH=Xj("mceclip");const mH=(e,t,n,o,s)=>{const r=nH(e,t,n);if(!r.cancelled&&!s){uH(e,r.content,o)}};const gH=(e,t,n,o)=>{const s=n||Pj(t);mH(e,Bj(t),s,false,o)};const pH=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,"\n");const o=ac(n,pm(e));const s=Ij(o,Yu(e),Xu(e));mH(e,s,false,true)};const hH=t=>{const n={};if(t&&t.types){for(let e=0;e<t.types.length;e++){const o=t.types[e];try{n[o]=t.getData(o)}catch(e){n[o]=""}}}return n};const bH=(e,t)=>t in e&&e[t].length>0;const vH=e=>bH(e,"text/html")||bH(e,"text/plain");const yH=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return De(n)?e.dom.encode(n[1]):undefined};const CH=(e,t,n,o)=>{const s=fH();const r=of(e)&&De(n.name);const i=r?yH(e,n.name):s;const c=r?n.name:undefined;const a=t.create(s,n,o,i,c);t.add(a);return a};const wH=(a,l)=>{p_(l.uri).each(({data:e,type:t,base64Encoded:n})=>{const o=n?e:btoa(e);const s=l.file;const r=a.editorUpload.blobCache;const i=r.getByData(o,t);const c=i!==null&&i!==void 0?i:CH(a,r,s,o);gH(a,`<img src="${c.blobUri()}">`,false)})};const xH=e=>e.type==="paste";const kH=e=>Promise.all(y(e,t=>{return y_(t).then(e=>({file:t,uri:e}))}));const EH=e=>{const n=Am(e);return t=>Rt(t.type,"image/")&&Pe(n,e=>{return Qj(e)===t.type})};const SH=(e,t)=>{const n=t.items?ge(We(t.items),e=>{return e.kind==="file"?[e.getAsFile()]:[]}):[];const o=t.files?We(t.files):[];return S(n.length>0?n:o,EH(e))};const _H=async(o,e,n,s)=>{const t=xH(e)?e.clipboardData:e.dataTransfer;if(cm(o)&&t){const r=SH(o,t);if(r.length>0){e.preventDefault();const i=await kH(r);if(n){o.selection.setRng(n)}const c=o.options.get("emoticonsPath");let t="Please go to <a href='https://image.huawei.com/tiny-lts/index/#/' style='font-weight:bold;' target='_blank'> here</a> to compress the image and upload it again.";if(c){t="Compress the image and upload it again."}const{sizeLimit:a={}}=o.userConfig||{};const l=a.image||4;for(let n of i){if(n.file.size/1024/1024>l){o.notificationManager.open({text:`${o.translate(["The image file size cannot exceed {0} MB,",l])}${o.translate(t)}`,type:"warning",timeout:5e3});return}if(n.uri){let e=await new Promise(t=>{let e=new Image;e.src=n.uri;e.onload=({target:e})=>{t(e)}});if(e.width>6e3||e.height>8e3){o.notificationManager.open({text:`${o.translate("The resolution of an image file cannot exceed 6000 x 8000,")}${o.translate(t)}`,type:"warning",timeout:5e3});return}}!s&&wH(o,n)}return true}}return false};const NH=e=>{var t,n;return H.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0};const RH=e=>$.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45;const AH=(e,t,n,o,s)=>{let r=Yj(n);const i=bH(t,Dj())||Pj(n);const c=!i&&Lj(r);const a=sH(r);if(Vj(r)||!r.length||c&&!a){o=true}if(o||a){if(bH(t,"text/plain")&&c){r=t["text/plain"]}else{r=Gj(r)}}if(Vj(r)){return}if(o){pH(e,r)}else{gH(e,r,i,s)}};const DH=(a,l,d)=>{let u;const f=()=>l.getLastRng()||a.selection.getRng();a.on("keydown",e=>{if(RH(e)&&!e.isDefaultPrevented()){u=e.shiftKey&&e.keyCode===86}});a.on("paste",async e=>{if(e.isDefaultPrevented()||NH(e)){return}const t=d.get()==="text"||u;u=false;const n=hH(e.clipboardData);a.clipboardData=e.clipboardData;const{files:o,items:s}=e.clipboardData;const r=e=>({}).toString.call(e)==="[object File]";const i=s.length===3&&o.length===1&&r(o[0]);const c=!vH(n)||i;if(c&&await _H(a,e,f(),i)){return}if(bH(n,"text/html")){e.preventDefault();AH(a,n,n["text/html"],t,n["text/rtf"])}else if(bH(n,"text/plain")&&bH(n,"text/uri-list")){e.preventDefault();AH(a,n,n["text/plain"],t)}else{l.create();Fy.setEditorTimeout(a,()=>{const e=l.getHtml();l.remove();AH(a,n,e,t)},0)}})};const OH=r=>{const i=e=>Rt(e,"webkit-fake-url");const c=e=>Rt(e,"data:");const a=e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.paste)===true};r.parser.addNodeFilter("img",(e,t,n)=>{if(!cm(r)&&a(n)){for(const o of e){const s=o.attr("src");if(Re(s)&&!o.attr("data-mce-object")&&s!==H.transparentSrc){if(i(s)){o.remove()}else if(!hm(r)&&c(s)){o.remove()}}}}})};const TH=(e,t,n)=>{DH(e,t,n);OH(e)};const BH=(e,t)=>{if(t.get()==="text"){t.set("html");Tb(e,false)}else{t.set("text");Tb(e,true)}e.focus()};const PH=(n,e)=>{n.addCommand("mceTogglePlainTextPaste",()=>{BH(n,e)});n.addCommand("mceInsertClipboardContent",(e,t)=>{if(t.html){gH(n,t.html,t.internal)}if(t.text){pH(n,t.text)}})};const LH=(e,t,n)=>{if(e){try{e.clearData();e.setData("text/html",t);e.setData("text/plain",n);e.setData(Dj(),t);return true}catch(e){return false}}else{return false}};const MH=(e,t,n,o)=>{if(LH(e.clipboardData,t.html,t.text)){e.preventDefault();o()}else{n(t.html,o)}};const IH=a=>(e,t)=>{const{dom:n,selection:o}=a;const s=n.create("div",{contenteditable:"false","data-mce-bogus":"all"});const r=n.create("div",{contenteditable:"true"},e);n.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});s.appendChild(r);n.add(a.getBody(),s);const i=o.getRng();r.focus();const c=n.createRng();c.selectNodeContents(r);o.setRng(c);Fy.setEditorTimeout(a,()=>{o.setRng(i);n.remove(s);t()},0)};const FH=e=>({html:Tj(e.selection.getContent({contextual:true})),text:e.selection.getContent({format:"text"})});const UH=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());const zH=e=>!e.selection.isCollapsed()||UH(e);const jH=t=>e=>{if(!e.isDefaultPrevented()&&zH(t)){MH(e,FH(t),IH(t),()=>{if(H.browser.isChromium()||H.browser.isFirefox()){const e=t.selection.getRng();Fy.setEditorTimeout(t,()=>{t.selection.setRng(e);t.execCommand("Delete")},0)}else{t.execCommand("Delete")}})}};const HH=t=>e=>{if(!e.isDefaultPrevented()&&zH(t)){MH(e,FH(t),IH(t),Te)}};const $H=e=>{e.on("cut",jH(e));e.on("copy",HH(e))};const VH=(e,t)=>{var n,o;return Fv.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(o=t.clientY)!==null&&o!==void 0?o:0,e.getDoc())};const qH=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:false};const WH=(e,t)=>{e.focus();if(t){e.selection.setRng(t)}};const KH=e=>Pe(e.files,e=>/^image\//.test(e.type));const GH=(e,t,n,o)=>{const s=e.getParent(n,e=>Tc(t,e));if(s&&Ie(o,"text/html")){const r=(new DOMParser).parseFromString(o["text/html"],"text/html").body;return!z(r.querySelector(s.nodeName.toLowerCase()))}else{return false}};const YH=(c,a)=>{if(im(c)){c.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault();e.stopPropagation()})}if(!cm(c)){c.on("drop",e=>{const t=e.dataTransfer;if(t&&KH(t)){e.preventDefault()}})}c.on("drop",e=>{if(e.isDefaultPrevented()){return}const t=VH(c,e);if(Ae(t)){return}const n=hH(e.dataTransfer);const o=bH(n,Dj());if((!vH(n)||qH(n))&&_H(c,e,t)){return}const s=n[Dj()];const r=s||n["text/html"]||n["text/plain"];const i=GH(c.dom,c.schema,t.startContainer,n);if(a.get()&&!i){return}if(r){e.preventDefault();Fy.setEditorTimeout(c,()=>{c.undoManager.transact(()=>{if(s){c.execCommand("Delete")}WH(c,t);const e=Yj(r);if(n["text/html"]){gH(c,e,o)}else{pH(c,e)}})})}});c.on("dragstart",e=>{a.set(true)});c.on("dragover dragend",e=>{if(cm(c)&&!a.get()){e.preventDefault();WH(c,VH(c,e))}if(e.type==="dragend"){a.set(false)}})};const XH=n=>{const e=t=>e=>{t(n,e)};const t=am(n);if(Oe(t)){n.on("PastePreProcess",e(t))}const o=lm(n);if(Oe(o)){n.on("PastePostProcess",e(o))}};const QH=(t,n)=>{t.on("PastePreProcess",e=>{e.content=n(t,e.content,e.internal)})};const JH=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi;const ZH=e=>U.trim(e).replace(JH,jp).toLowerCase();const e$=(e,t,n)=>{const o=dm(e);if(n||o==="all"||!um(e)){return t}const l=o?o.split(/[, ]/):[];if(l&&o!=="none"){const a=e.dom,d=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,n,o)=>{const s=a.parseStyle(a.decode(n));const r={};for(let n=0;n<l.length;n++){const c=s[l[n]];let e=c;let t=a.getStyle(d,l[n],true);if(/color/.test(l[n])){e=ZH(e);t=ZH(t)}if(t!==e){r[l[n]]=c}}const i=a.serializeStyle(r,"span");if(i){return t+' style="'+i+'"'+o}return t+o})}else{t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,n,o)=>{return t+' style="'+n+'"'+o});return t};const t$=e=>{if(H.browser.isChromium()||H.browser.isSafari()){QH(e,e$)}};const n$=e=>{const t=al(false);const n=al(gm(e)?"text":"html");const o=qj(e);t$(e);PH(e,n);XH(e);e.on("PreInit",()=>{$H(e);YH(e,t);TH(e,o,n)})};const o$=t=>{t.on("click",e=>{if(t.dom.getParent(e.target,"details")){e.preventDefault()}})};const s$=e=>{e.parser.addNodeFilter("details",e=>{Le(e,e=>{e.attr("data-mce-open",e.attr("open"));e.attr("open","open")})});e.serializer.addNodeFilter("details",e=>{Le(e,e=>{const t=e.attr("data-mce-open");e.attr("open",Re(t)?t:null);e.attr("data-mce-open",null)})})};const r$=e=>{o$(e);s$(e)};const i$=E;const c$=je;const a$=e=>_(e.dom);const l$=e=>Ir(e.dom);const d$=t=>e=>k(Fe.fromDom(t),e);const u$=(e,t)=>ps(Fe.fromDom(e),e=>l$(e)||ci(e),d$(t)).getOr(Fe.fromDom(t)).dom;const f$=(e,t)=>ps(Fe.fromDom(e),a$,d$(t));const m$=(t,e,n)=>{const o=new vr(t,e);const s=n?o.next.bind(o):o.prev.bind(o);let r=t;for(let e=n?t:s();e&&!i$(e);e=s()){if(Xi(e)){r=e}}return r};const g$=(e,t)=>{const n=M.fromRangeStart(e);const o=n.getNode();const s=u$(o,t);const r=m$(o,s,false);const i=m$(o,s,true);const c=document.createRange();f$(r,s).fold(()=>{if(c$(r)){c.setStart(r,0)}else{c.setStartBefore(r)}},e=>c.setStartBefore(e.dom));f$(i,s).fold(()=>{if(c$(i)){c.setEnd(i,i.data.length)}else{c.setEndAfter(i)}},e=>c.setEndAfter(e.dom));return c};const p$=e=>{const t=g$(e.selection.getRng(),e.getBody());e.selection.setRng(wk(t))};const h$=t=>{t.on("mousedown",e=>{if(e.detail>=3){e.preventDefault();p$(t)}})};var b$;(function(e){e["Before"]="before";e["After"]="after"})(b$||(b$={}));const v$=(e,t)=>Math.abs(e.left-t);const y$=(e,t)=>Math.abs(e.right-t);const C$=(e,t)=>e>=t.top&&e<=t.bottom;const w$=(e,t)=>e.top<t.bottom&&e.bottom>t.top;const x$=(e,t)=>{const n=dd(e,t)/Math.min(e.height,t.height);return w$(e,t)&&n>.5};const k$=(o,t)=>{const e=S(o,e=>C$(t,e));return ad(e).fold(()=>[[],o],t=>{const{pass:e,fail:n}=ce(o,e=>x$(e,t));return[e,n]})};const E$=(e,t)=>{return{node:e.node,position:v$(e,t)<y$(e,t)?b$.Before:b$.After}};const S$=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t));const _$=(e,r,i)=>{const c=e=>{if(Xi(e.node)){return C.some(e)}else if(ze(e.node)){return _$(We(e.node.childNodes),r,i)}else{return C.none()}};const o=(e,t)=>{if(e.length>=2){const n=c(e[0]).getOr(e[0]);const o=c(e[1]).getOr(e[1]);const s=Math.abs(t(n,r,i)-t(o,r,i));if(s<2){if(je(n.node)){return C.some(n)}else if(je(o.node)){return C.some(o)}}}return C.none()};const t=(e,n)=>{const t=ve(e,(e,t)=>n(e,r,i)-n(t,r,i));return o(t,n).orThunk(()=>xe(t,c))};const[n,s]=k$(ZB(e),i);const{pass:a,fail:l}=ce(s,e=>e.top<i);return t(n,S$).orThunk(()=>t(l,ld)).orThunk(()=>t(a,ld))};const N$=(s,e,r,i)=>{const c=(t,e)=>{const n=e=>ze(e)&&e.classList.contains("mce-drag-container");const o=S(t.dom.childNodes,Q(n));return e.fold(()=>_$(o,r,i),t=>{const e=S(o,e=>e!==t.dom);return _$(e,r,i)}).orThunk(()=>{const e=k(t,s)?C.none():$o(t);return e.bind(e=>c(e,C.some(t)))})};return c(e,C.none())};const R$=(e,t,n)=>{const o=Fe.fromDom(e);const s=Uo(o);const r=Fe.fromPoint(s,t,n).filter(e=>Io(o,e));const i=r.getOr(o);return N$(o,i,t,n)};const A$=(e,t,n)=>R$(e,t,n).filter(e=>Jm(e.node)).map(e=>E$(e,t));const D$=e=>{var t,n;const o=e.getBoundingClientRect();const s=e.ownerDocument;const r=s.documentElement;const i=s.defaultView;return{top:o.top+((t=i===null||i===void 0?void 0:i.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:o.left+((n=i===null||i===void 0?void 0:i.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}};const O$=e=>e.inline?D$(e.getBody()):{left:0,top:0};const T$=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}};const B$=e=>{const t=e.getBody(),n=e.getDoc().documentElement;const o={left:t.scrollLeft,top:t.scrollTop};const s={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?o:s};const P$=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=D$(e.getContentAreaContainer());const o=B$(e);return{left:t.pageX-n.left+o.left,top:t.pageY-n.top+o.top}}return{left:t.pageX,top:t.pageY}};const L$=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top});const M$=(e,t)=>L$(O$(e),T$(e),P$(e,t));const I$=(e,t,n)=>({...t,dataTransfer:null,type:e,...n});const F$=(e,t)=>{const n=J("Function not supported on simulated event.");const o={bubbles:true,cancelBubble:false,cancelable:true,composed:false,currentTarget:null,defaultPrevented:false,eventPhase:0,isTrusted:true,returnValue:false,srcElement:null,target:null,timeStamp:0,type:e,composedPath:n,initEvent:n,preventDefault:Te,stopImmediatePropagation:Te,stopPropagation:Te,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:false,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:false,metaKey:false,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:false,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:null,...t};return o};const U$=e=>({target:e,srcElement:e});const z$=t=>e=>F$(t,U$(e));const j$=n=>(e,t)=>I$(n,e,U$(t));const H$=j$("dragstart");const $$=j$("drop");const V$=z$("dragend");const q$=j$("dragend");const W$=32;const K$=100;const G$=8;const Y$=16;const X$=_;const Q$=bd(X$,Ir);const J$=(e,t,n)=>X$(n)&&n!==t&&e.isEditable(n.parentElement);const Z$=(e,t,n)=>{if(Ae(t)){return false}else if(t===n||e.dom.isChildOf(t,n)){return false}else{return e.dom.isEditable(t)}};const e2=e=>{const t=e.cloneNode(true);t.removeAttribute("data-mce-selected");return t};const t2=(e,t,n,o)=>{const s=e.dom;const r=t.cloneNode(true);s.setStyles(r,{width:n,height:o});s.setAttrib(r,"data-mce-selected",null);const i=s.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});s.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o});s.setStyles(r,{margin:0,boxSizing:"border-box"});i.appendChild(r);return i};const n2=(e,t)=>{if(e.parentNode!==t){t.appendChild(e)}};const o2=(n,o)=>t=>()=>{const e=n==="left"?t.scrollX:t.scrollY;t.scroll({[n]:e+o,behavior:"smooth"})};const s2=o2("left",-W$);const r2=o2("left",W$);const i2=o2("top",-W$);const c2=o2("top",W$);const a2=(e,t,n,o,s,r,i,c,a,l,d,u)=>{let f=0,m=0;e.style.left=t.pageX+"px";e.style.top=t.pageY+"px";if(t.pageX+n>s){f=t.pageX+n-s}if(t.pageY+o>r){m=t.pageY+o-r}e.style.width=n-f+"px";e.style.height=o-m+"px";const g=a.clientHeight;const p=a.clientWidth;const h=i+a.getBoundingClientRect().top;const b=c+a.getBoundingClientRect().left;d.on(e=>{e.intervalId.clear();if(e.dragging&&u){if(i+G$>=g){e.intervalId.set(c2(l))}else if(i-G$<=0){e.intervalId.set(i2(l))}else if(c+G$>=p){e.intervalId.set(r2(l))}else if(c-G$<=0){e.intervalId.set(s2(l))}else if(h+Y$>=window.innerHeight){e.intervalId.set(c2(window))}else if(h-Y$<=0){e.intervalId.set(i2(window))}else if(b+Y$>=window.innerWidth){e.intervalId.set(r2(window))}else if(b-Y$<=0){e.intervalId.set(s2(window))}}})};const l2=e=>{if(e&&e.parentNode){e.parentNode.removeChild(e)}};const d2=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);l2(t);if(n&&n!==e.getRoot()&&e.isEmpty(n)){xi(Fe.fromDom(n))}};const u2=e=>e.button===0;const f2=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5});const m2=(r,i)=>e=>{if(u2(e)){const t=ue(i.dom.getParents(e.target),Q$).getOr(null);if(De(t)&&J$(i.dom,i.getBody(),t)){const n=i.dom.getPos(t);const o=i.getBody();const s=i.getDoc().documentElement;r.set({element:t,dragging:false,screenX:e.screenX,screenY:e.screenY,maxX:(i.inline?o.scrollWidth:s.offsetWidth)-2,maxY:(i.inline?o.scrollHeight:s.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:t2(i,t,t.offsetWidth,t.offsetHeight),intervalId:El(K$)})}}};const g2=(n,o,s)=>{n._selectionOverrides.hideFakeCaret();A$(n.getBody(),o,s).fold(()=>n.selection.placeCaretAt(o,s),e=>{const t=n._selectionOverrides.showCaret(1,e.node,e.position===b$.Before,false);if(t){n.selection.setRng(t)}else{n.selection.placeCaretAt(o,s)}})};const p2=(e,i)=>{const c=_l((e,t)=>g2(i,e,t),0);i.on("remove",c.cancel);const a=e;return r=>e.on(e=>{const t=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&t>10){const n=i.dispatch("dragstart",H$(r,e.element));if(n.isDefaultPrevented()){return}e.dragging=true;i.focus()}if(e.dragging){const o=r.currentTarget===i.getDoc().documentElement;const s=f2(e,M$(i,r));n2(e.ghost,i.getBody());a2(e.ghost,s,e.width,e.height,e.maxX,e.maxY,r.clientY,r.clientX,i.getContentAreaContainer(),i.getWin(),a,o);c.throttle(r.clientX,r.clientY)}})};const h2=e=>{const t=e.getSel();if(De(t)){const n=t.getRangeAt(0);const o=n.startContainer;return je(o)?o.parentNode:o}else{return null}};const b2=(e,i)=>r=>{e.on(e=>{var t;e.intervalId.clear();if(e.dragging){if(Z$(i,h2(i.selection),e.element)){const n=e2(e.element);const o=(t=i.getDoc().elementFromPoint(r.clientX,r.clientY))!==null&&t!==void 0?t:i.getBody();const s=i.dispatch("drop",$$(r,o));if(!s.isDefaultPrevented()){i.undoManager.transact(()=>{d2(i.dom,e.element);i.insertContent(i.dom.getOuterHTML(n));i._selectionOverrides.hideFakeCaret()})}}i.dispatch("dragend",q$(r,i.getBody()))}});C2(e)};const v2=(e,n,o)=>{e.on(t=>{t.intervalId.clear();if(t.dragging){const e=o.fold(()=>V$(t.element),e=>q$(e,t.element));n.dispatch("dragend",e)}});C2(e)};const y2=(t,n)=>e=>v2(t,n,C.some(e));const C2=e=>{e.on(e=>{e.intervalId.clear();l2(e.ghost)});e.clear()};const w2=t=>{const n=Sl();const e=He.DOM;const o=document;const s=m2(n,t);const r=p2(n,t);const i=b2(n,t);const c=y2(n,t);t.on("mousedown",s);t.on("mousemove",r);t.on("mouseup",i);e.bind(o,"mousemove",r);e.bind(o,"mouseup",c);t.on("remove",()=>{e.unbind(o,"mousemove",r);e.unbind(o,"mouseup",c)});t.on("keydown",e=>{if(e.keyCode===$.ESC){v2(n,t,C.none())}})};const x2=r=>{const i=e=>{if(!e.isDefaultPrevented()){const t=e.dataTransfer;if(t&&(m(t.types,"Files")||t.files.length>0)){e.preventDefault();if(e.type==="drop"){M1(r,"Dropped file type is not supported")}}}};const c=e=>{if(Gy(r,e.target)){i(e)}};const e=()=>{const t=He.DOM;const n=r.dom;const o=document;const s=r.inline?r.getBody():r.getDoc();const e=["drop","dragover"];Le(e,e=>{t.bind(o,e,c);n.bind(s,e,i)});r.on("remove",()=>{Le(e,e=>{t.unbind(o,e,c);n.unbind(s,e,i)})})};r.on("init",()=>{Fy.setEditorTimeout(r,e,0)})};const k2=e=>{w2(e);if(Yf(e)){x2(e)}};const E2=n=>{const e=_l(()=>{if(!n.removed&&n.getBody().contains(document.activeElement)){const e=n.selection.getRng();if(e.collapsed){const t=bT(n,e,false);n.selection.setRng(t)}}},0);n.on("focus",()=>{e.throttle()});n.on("blur",()=>{e.cancel()})};const S2=s=>{s.on("init",()=>{s.on("focusin",e=>{const t=e.target;if(zr(t)){const n=Zx(s.getBody(),t);const o=_(n)?n:t;if(s.selection.getNode()!==o){pT(s,o).each(e=>s.selection.setRng(e))}}})})};const _2=_;const N2=(e,t)=>Zx(e.getBody(),t);const R2=c=>{const a=c.selection,u=c.dom;const f=c.getBody();const r=Ym(c,f,u.isBlock,()=>aC(c));const l="sel-"+u.uniqueId();const i="data-mce-selected";let d;const s=e=>De(e)&&u.hasClass(e,"mce-offscreen-selection");const m=e=>e!==f&&(_2(e)||zr(e))&&u.isChildOf(e,f)&&u.isEditable(e.parentNode);const g=e=>{if(e){a.setRng(e)}};const p=(e,t,n,o=true)=>{const s=c.dispatch("ShowCaret",{target:t,direction:e,before:n});if(s.isDefaultPrevented()){return null}if(o){a.scrollIntoView(t,e===-1)}return r.show(n,t)};const e=e=>{if(e.hasAttribute("data-mce-caret")){zi(e);a.scrollIntoView(e)}};const t=()=>{c.on("click",e=>{if(!u.isEditable(e.target)){e.preventDefault();c.focus()}});c.on("blur NewBlock",w);c.on("ResizeWindow FullscreenStateChanged",r.reposition);c.on("tap",e=>{const t=e.target;const n=N2(c,t);if(_2(n)){e.preventDefault();pT(c,n).each(C)}else if(m(t)){pT(c,t).each(C)}},true);c.on("mousedown",n=>{const e=n.target;if(e!==f&&e.nodeName!=="HTML"&&!u.isChildOf(e,f)){return}if(!_1(c,n.clientX,n.clientY)){return}w();x();const o=N2(c,e);if(_2(o)){n.preventDefault();pT(c,o).each(C)}else{A$(f,n.clientX,n.clientY).each(e=>{n.preventDefault();const t=p(1,e.node,e.position===b$.Before,false);g(t);if(ze(o)){o.focus()}else{c.getBody().focus()}})}});c.on("keypress",e=>{if($.modifierPressed(e)){return}if(_2(a.getNode())){e.preventDefault()}});c.on("GetSelectionRange",e=>{let t=e.range;if(d){if(!d.parentNode){d=null;return}t=t.cloneRange();t.selectNode(d);e.range=t}});c.on("SetSelectionRange",e=>{e.range=b(e.range);const t=C(e.range,e.forward);if(t){e.range=t}});const o=e=>ze(e)&&e.id==="mcepastebin";c.on("AfterSetSelectionRange",e=>{const t=e.range;const n=t.startContainer.parentElement;if(!h(t)&&!o(n)){x()}if(!s(n)){w()}});k2(c);E2(c);S2(c)};const n=e=>Oi(e)||Ii(e)||Fi(e);const h=e=>n(e.startContainer)||n(e.endContainer);const b=e=>{const t=c.schema.getVoidElements();const n=u.createRng();const o=e.startContainer;const s=e.startOffset;const r=e.endContainer;const i=e.endOffset;if(Ie(t,o.nodeName.toLowerCase())){if(s===0){n.setStartBefore(o)}else{n.setStartAfter(o)}}else{n.setStart(o,s)}if(Ie(t,r.nodeName.toLowerCase())){if(i===0){n.setEndBefore(r)}else{n.setEndAfter(r)}}else{n.setEnd(r,i)}return n};const v=(e,t)=>{const n=Fe.fromDom(c.getBody());const o=c.getDoc();const s=Cs(n,"#"+l).getOrThunk(()=>{const e=Fe.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',o);ro(e,"id",l);Us(n,e);return e});const r=u.createRng();$s(s);Hs(s,[Fe.fromText($r,o),Fe.fromDom(t),Fe.fromText($r,o)]);r.setStart(s.dom.firstChild,1);r.setEnd(s.dom.lastChild,0);As(s,{top:u.getPos(e,c.getBody()).y+"px"});by(s);const i=a.getSel();if(i){i.removeAllRanges();i.addRange(r)}return r};const y=e=>{const t=e.cloneNode(true);const n=c.dispatch("ObjectSelected",{target:e,targetClone:t});if(n.isDefaultPrevented()){return null}const o=v(e,n.targetClone);const s=Fe.fromDom(e);Le(hr(Fe.fromDom(c.getBody()),`*[${i}]`),e=>{if(!k(s,e)){uo(e,i)}});if(!u.getAttrib(e,i)){e.setAttribute(i,"1")}d=e;x();return o};const C=(e,t)=>{if(!e){return null}if(e.collapsed){if(!h(e)){const r=t?1:-1;const i=kg(r,f,e);const c=i.getNode(!t);if(De(c)){if(Jm(c)){return p(r,c,t?!i.isAtEnd():false,false)}if(Di(c)&&_(c.nextSibling)){const l=u.createRng();l.setStart(c,0);l.setEnd(c,0);return l}}const a=i.getNode(t);if(De(a)){if(Jm(a)){return p(r,a,t?false:!i.isAtEnd(),false)}if(Di(a)&&_(a.previousSibling)){const l=u.createRng();l.setStart(a,1);l.setEnd(a,1);return l}}}return null}let n=e.startContainer;let o=e.startOffset;const s=e.endOffset;if(je(n)&&o===0&&_2(n.parentNode)){n=n.parentNode;o=u.nodeIndex(n);n=n.parentNode}if(!ze(n)){return null}if(s===o+1&&n===e.endContainer){const d=n.childNodes[o];if(m(d)){return y(d)}}return null};const w=()=>{if(d){d.removeAttribute(i)}Cs(Fe.fromDom(c.getBody()),"#"+l).each(Ue);d=null};const o=()=>{r.destroy();d=null};const x=()=>{r.hide()};if(!LA(c)){t()}return{showCaret:p,showBlockCaretContainer:e,hideFakeCaret:x,destroy:o}};const A2=(t,e)=>{let n=e;for(let e=t.previousSibling;je(e);e=e.previousSibling){n+=e.data.length}return n};const D2=(e,t,n,o,s)=>{if(je(n)&&(o<0||o>n.data.length)){return[]}const r=s&&je(n)?[A2(n,o)]:[o];let i=n;while(i!==t&&i.parentNode){r.push(e.nodeIndex(i,s));i=i.parentNode}return i===t?r.reverse():[]};const O2=(e,t,n,o,s,r,i=false)=>{const c=D2(e,t,n,o,i);const a=D2(e,t,s,r,i);return{start:c,end:a}};const T2=(e,t)=>{const n=t.slice();const o=n.pop();if(!q(o)){return C.none()}else{const s=le(n,(e,t)=>e.bind(e=>C.from(e.childNodes[t])),C.some(e));return s.bind(e=>{if(je(e)&&(o<0||o>e.data.length)){return C.none()}else{return C.some({node:e,offset:o})}})}};const B2=(e,t)=>T2(e,t.start).bind(({node:o,offset:s})=>T2(e,t.end).map(({node:e,offset:t})=>{const n=document.createRange();n.setStart(o,s);n.setEnd(e,t);return n}));const P2=(e,t,n,o=false)=>O2(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o);const L2=(t,n,o)=>{if(n&&t.isEmpty(n)&&!o(n)){const e=n.parentNode;t.remove(n);L2(t,e,o)}};const M2=(e,t,n,o=true)=>{const s=t.startContainer.parentNode;const r=t.endContainer.parentNode;t.deleteContents();if(o&&!n(t.startContainer)){if(je(t.startContainer)&&t.startContainer.data.length===0){e.remove(t.startContainer)}if(je(t.endContainer)&&t.endContainer.data.length===0){e.remove(t.endContainer)}L2(e,s,n);if(s!==r){L2(e,r,n)}}};const I2=(e,t)=>C.from(e.dom.getParent(t.startContainer,e.dom.isBlock));const F2=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Au(o).concat(e.blockPatterns),inlinePatterns:Du(o).concat(e.inlinePatterns)}};const U2=(e,t,n,o)=>{const s=e.createRng();s.setStart(t,0);s.setEnd(n,o);return s.toString()};const z2=e=>/^\s[^\s]/.test(e);const j2=(s,r,i)=>{const e=_I(r,0,r);e.each(e=>{const n=e.container;RI(n,i.start.length,r).each(e=>{const t=s.createRng();t.setStart(n,0);t.setEnd(e.container,e.offset);M2(s,t,e=>e===r)});const t=Fe.fromDom(n);const o=Gr(t);if(z2(o)){Xr(t,o.slice(1))}})};const H2=(t,e)=>{const n=t.dom;const o=e.pattern;const s=B2(n.getRoot(),e.range).getOrDie("Unable to resolve path range");const r=(e,t)=>{const n=t.get(e);return Ve(n)&&Ce(n).exists(e=>Ie(e,"block"))};I2(t,s).each(e=>{if(o.type==="block-format"){if(r(o.format,t.formatter)){t.undoManager.transact(()=>{j2(t.dom,e,o);t.formatter.apply(o.format)})}}else if(o.type==="block-command"){t.undoManager.transact(()=>{j2(t.dom,e,o);t.execCommand(o.cmd,false,o.value)})}});return true};const $2=e=>ve(e,(e,t)=>t.start.length-e.start.length);const V2=(e,t)=>{const n=$2(e);const o=t.replace($r," ");return ue(n,e=>t.indexOf(e.start)===0||o.indexOf(e.start)===0)};const q2=(e,t,n,o)=>{var s;const r=e.dom;const i=Yu(e);if(!r.is(t,i)){return[]}const c=(s=t.textContent)!==null&&s!==void 0?s:"";return V2(n.blockPatterns,c).map(e=>{if(U.trim(c).length===e.start.length){return[]}return[{pattern:e,range:O2(r,r.getRoot(),t,0,t,0,o)}]}).getOr([])};const W2=(t,e)=>{if(e.length===0){return}const n=t.selection.getBookmark();Le(e,e=>H2(t,e));t.selection.moveToBookmark(n)};const K2=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t});const G2=(e,t)=>{const n=e.createRng();n.setStartAfter(t.start);n.setEndBefore(t.end);return n};const Y2=(e,t,n)=>{const o=B2(e.getRoot(),n).getOrDie("Unable to resolve path range");const s=o.startContainer;const r=o.endContainer;const i=o.endOffset===0?r:r.splitText(o.endOffset);const c=o.startOffset===0?s:s.splitText(o.startOffset);const a=c.parentNode;const l=i.parentNode;return{prefix:t,end:l.insertBefore(K2(e,t+"-end"),i),start:a.insertBefore(K2(e,t+"-start"),c)}};const X2=(e,t,n)=>{L2(e,e.get(t.prefix+"-end"),n);L2(e,e.get(t.prefix+"-start"),n)};const Q2=e=>e.start.length===0;const J2=i=>(e,t)=>{const n=e.data;const o=n.substring(0,t);const s=o.lastIndexOf(i.charAt(i.length-1));const r=o.lastIndexOf(i);if(r!==-1){return r+i.length}else if(s!==-1){return s+1}else{return-1}};const Z2=(c,a,l,e)=>{const d=a.start;const t=AI(c,e.container,e.offset,J2(d),l);return t.bind(n=>{var e,t;const o=(t=(e=l.textContent)===null||e===void 0?void 0:e.indexOf(d))!==null&&t!==void 0?t:-1;const s=o!==-1&&n.offset>=o+d.length;if(s){const r=c.createRng();r.setStart(n.container,n.offset-d.length);r.setEnd(n.container,n.offset);return C.some(r)}else{const i=n.offset-d.length;return NI(n.container,i,l).map(e=>{const t=c.createRng();t.setStart(e.container,e.offset);t.setEnd(n.container,n.offset);return t}).filter(e=>e.toString()===d).orThunk(()=>Z2(c,a,l,wI(n.container,0)))}})};const e3=(t,o,e,n,s,r=false)=>{if(o.start.length===0&&!r){const i=t.createRng();i.setStart(e,n);i.setEnd(e,n);return C.some(i)}return SI(e,n,s).bind(n=>{const e=Z2(t,o,s,n);return e.bind(e=>{var t;if(r){if(e.endContainer===n.container&&e.endOffset===n.offset){return C.none()}else if(n.offset===0&&((t=e.endContainer.textContent)===null||t===void 0?void 0:t.length)===e.endOffset){return C.none()}}return C.some(e)})})};const t3=(i,c,a,l)=>{const d=i.dom;const u=d.getRoot();const f=a.pattern;const e=a.position.container;const m=a.position.offset;return NI(e,m-a.pattern.end.length,c).bind(t=>{const n=O2(d,u,t.container,t.offset,e,m,l);if(Q2(f)){return C.some({matches:[{pattern:f,startRng:n,endRng:n}],position:t})}else{const o=n3(i,a.remainingPatterns,t.container,t.offset,c,l);const s=o.getOr({matches:[],position:t});const r=s.position;const e=e3(d,f,r.container,r.offset,c,o.isNone());return e.map(e=>{const t=P2(d,u,e,l);return{matches:s.matches.concat([{pattern:f,startRng:t,endRng:n}]),position:wI(e.startContainer,e.startOffset)}})}})};const n3=(i,c,a,l,d,u)=>{const e=i.dom;return SI(a,l,e.getRoot()).bind(t=>{const n=U2(e,d,a,l);for(let e=0;e<c.length;e++){const o=c[e];if(!At(n,o.end)){continue}const s=c.slice();s.splice(e,1);const r=t3(i,d,{pattern:o,remainingPatterns:s,position:t},u);if(r.isNone()&&l>0){return n3(i,c,a,l-1,d,u)}if(r.isSome()){return r}}return C.none()})};const o3=(t,e,n)=>{t.selection.setRng(n);if(e.type==="inline-format"){Le(e.format,e=>{t.formatter.apply(e)})}else{t.execCommand(e.cmd,false,e.value)}};const s3=(e,t,n,o)=>{const s=G2(e.dom,n);M2(e.dom,s,o);o3(e,t,s)};const r3=(e,t,n,o,s)=>{const r=e.dom;const i=G2(r,o);const c=G2(r,n);M2(r,c,s);M2(r,i,s);const a={prefix:n.prefix,start:n.end,end:o.start};const l=G2(r,a);o3(e,t,l)};const i3=(s,e)=>{const r=Vl("mce_textpattern");const i=ae(e,(e,t)=>{const n=Y2(s,r+`_end${e.length}`,t.endRng);return e.concat([{...t,endMarker:n}])},[]);return ae(i,(e,t)=>{const n=i.length-e.length-1;const o=Q2(t.pattern)?t.endMarker:Y2(s,r+`_start${n}`,t.startRng);return e.concat([{...t,startMarker:o}])},[])};const c3=e=>ve(e,(e,t)=>t.end.length-e.end.length);const a3=(e,n)=>{const t=qe(e,t=>Pe(n,e=>t.pattern.start===e.pattern.start&&t.pattern.end===e.pattern.end));if(e.length===n.length){if(t){return e}else{return n}}return e.length>n.length?e:n};const l3=(e,t,n,o,s,r)=>{const i=n3(e,s.inlinePatterns,n,o,t,r).fold(()=>[],e=>e.matches);const c=n3(e,c3(s.inlinePatterns),n,o,t,r).fold(()=>[],e=>e.matches);return a3(i,c)};const d3=(o,e)=>{if(e.length===0){return}const s=o.dom;const t=o.selection.getBookmark();const n=i3(s,e);Le(n,e=>{const t=s.getParent(e.startMarker.start,s.isBlock);const n=e=>e===t;if(Q2(e.pattern)){s3(o,e.pattern,e.endMarker,n)}else{r3(o,e.pattern,e.startMarker,e.endMarker,n)}X2(s,e.endMarker,n);X2(s,e.startMarker,n)});o.selection.moveToBookmark(t)};const u3=(i,c)=>{const a=i.selection.getRng();return I2(i,a).map(e=>{var t;const n=Math.max(0,a.startOffset);const o=F2(c,e,(t=e.textContent)!==null&&t!==void 0?t:"");const s=l3(i,e,a.startContainer,n,o,true);const r=q2(i,e,o,true);if(r.length>0||s.length>0){i.undoManager.add();i.undoManager.extra(()=>{i.execCommand("mceInsertNewLine")},()=>{i.insertContent(Hr);d3(i,s);W2(i,r);const e=i.selection.getRng();const t=SI(e.startContainer,e.startOffset,i.dom.getRoot());i.execCommand("mceInsertNewLine");t.each(e=>{const t=e.container;if(t.data.charAt(e.offset-1)===Hr){t.deleteData(e.offset-1,1);L2(i.dom,t.parentNode,e=>e===i.dom.getRoot())}})});return true}return false}).getOr(false)};const f3=(r,i)=>{const c=r.selection.getRng();I2(r,c).map(e=>{const t=Math.max(0,c.startOffset-1);const n=U2(r.dom,e,c.startContainer,t);const o=F2(i,e,n);const s=l3(r,e,c.startContainer,t,o,false);if(s.length>0){r.undoManager.transact(()=>{d3(r,s)})}})};const m3=(t,n,o)=>{for(let e=0;e<t.length;e++){if(o(t[e],n)){return true}}return false};const g3=(e,t)=>m3(e,t,(e,t)=>{return e===t.keyCode&&!$.modifierPressed(t)});const p3=(e,t)=>m3(e,t,(e,t)=>{return e.charCodeAt(0)===t.charCode});const h3=o=>{const t=[",",".",";",":","!","?"];const n=[32];const s=()=>Ou(bm(o),vm(o));const r=()=>Sm(o);o.on("keydown",e=>{if(e.keyCode===13&&!$.modifierPressed(e)&&o.selection.isCollapsed()){const t=s();const n=t.inlinePatterns.length>0||t.blockPatterns.length>0||r();if(n&&u3(o,t)){e.preventDefault()}}},true);const i=()=>{if(o.selection.isCollapsed()){const e=s();const t=e.inlinePatterns.length>0||r();if(t){f3(o,e)}}};o.on("keyup",e=>{if(g3(n,e)){i()}});o.on("keypress",e=>{if(p3(t,e)){Fy.setEditorTimeout(o,i)}})};const b3=e=>{h3(e)};const v3=i=>{const s=U.each;const c=$.BACKSPACE,a=$.DELETE,l=i.dom,d=i.selection,e=i.parser;const t=H.browser;const n=t.isFirefox();const o=t.isChromium()||t.isSafari();const r=H.deviceType.isiPhone()||H.deviceType.isiPad();const u=H.os.isMacOS()||H.os.isiOS();const f=(e,t)=>{try{i.getDoc().execCommand(e,false,String(t))}catch(e){}};const m=e=>{return e.isDefaultPrevented()};const g=()=>{const s=e=>{const t=l.create("body");const n=e.cloneContents();t.appendChild(n);return d.serializer.serialize(t,{format:"html"})};const r=e=>{const t=s(e);const n=l.createRng();n.selectNode(i.getBody());const o=s(n);return t===o};i.on("keydown",e=>{const t=e.keyCode;if(!m(e)&&(t===a||t===c)&&i.selection.isEditable()){const n=i.selection.isCollapsed();const o=i.getBody();if(n&&!l.isEmpty(o)){return}if(!n&&!r(i.selection.getRng())){return}e.preventDefault();i.setContent("");if(o.firstChild&&l.isBlock(o.firstChild)){i.selection.setCursorLocation(o.firstChild,0)}else{i.selection.setCursorLocation(o,0)}i.nodeChanged()}})};const p=()=>{i.shortcuts.add("meta+a",null,"SelectAll")};const h=()=>{if(!i.inline){l.bind(i.getDoc(),"mousedown mouseup",e=>{let t;if(e.target===i.getDoc().documentElement){t=d.getRng();i.getBody().focus();if(e.type==="mousedown"){if(Oi(t.startContainer)){return}d.placeCaretAt(e.clientX,e.clientY)}else{d.setRng(t)}}})}};const b=()=>{i.on("keydown",e=>{if(!m(e)&&e.keyCode===c){if(!i.getBody().getElementsByTagName("hr").length){return}if(d.isCollapsed()&&d.getRng().startOffset===0){const t=d.getNode();const n=t.previousSibling;if(t.nodeName==="HR"){l.remove(t);e.preventDefault();return}if(n&&n.nodeName&&n.nodeName.toLowerCase()==="hr"){l.remove(n);e.preventDefault()}}}})};const v=()=>{if(!Range.prototype.getClientRects){i.on("mousedown",e=>{if(!m(e)&&e.target.nodeName==="HTML"){const t=i.getBody();t.blur();Fy.setEditorTimeout(i,()=>{t.focus()})}})}};const y=()=>{const n=Jf(i);i.on("click",e=>{const t=e.target;if(/^(IMG|HR)$/.test(t.nodeName)&&l.isEditable(t.parentNode)){e.preventDefault();i.selection.select(t);i.nodeChanged()}if(t.nodeName==="A"&&l.hasClass(t,n)&&t.childNodes.length===0&&l.isEditable(t.parentNode)){e.preventDefault();d.select(t)}})};const C=()=>{const n=()=>{const e=l.getAttribs(d.getStart().cloneNode(false));return()=>{const t=d.getStart();if(t!==i.getBody()){l.setAttrib(t,"style",null);s(e,e=>{t.setAttributeNode(e.cloneNode(true))})}}};const o=()=>{return!d.isCollapsed()&&l.getParent(d.getStart(),l.isBlock)!==l.getParent(d.getEnd(),l.isBlock)};i.on("keypress",e=>{let t;if(!m(e)&&(e.keyCode===8||e.keyCode===46)&&o()){t=n();i.getDoc().execCommand("delete",false);t();e.preventDefault();return false}else{return true}});l.bind(i.getDoc(),"cut",e=>{if(!m(e)&&o()){const e=n();Fy.setEditorTimeout(i,()=>{e()})}})};const w=()=>{i.on("keydown",e=>{if(!m(e)&&e.keyCode===c){if(d.isCollapsed()&&d.getRng().startOffset===0){const t=d.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()==="table"){e.preventDefault();return false}}}return true})};const x=()=>{i.on("keydown",e=>{if(m(e)||e.keyCode!==$.BACKSPACE){return}let t=d.getRng();const n=t.startContainer;const o=t.startOffset;const s=l.getRoot();let r=n;if(!t.collapsed||o!==0){return}while(r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==s){r=r.parentNode}if(r.nodeName==="BLOCKQUOTE"){i.formatter.toggle("blockquote",undefined,r);t=l.createRng();t.setStart(n,0);t.setEnd(n,0);d.setRng(t)}})};const k=()=>{const e=()=>{f("StyleWithCSS",false);f("enableInlineTableEditing",false);if(!kf(i)){f("enableObjectResizing",false)}};if(!qf(i)){i.on("BeforeExecCommand mousedown",e)}};const E=()=>{const t=()=>{s(l.select("a:not([data-mce-block])"),e=>{var t;let n=e.parentNode;const o=l.getRoot();if((n===null||n===void 0?void 0:n.lastChild)===e){while(n&&!l.isBlock(n)){if(((t=n.parentNode)===null||t===void 0?void 0:t.lastChild)!==n||n===o){return}n=n.parentNode}l.add(n,"br",{"data-mce-bogus":1})}})};i.on("SetContent ExecCommand",e=>{if(e.type==="setcontent"||e.command==="mceInsertLink"){t()}})};const S=()=>{i.on("init",()=>{f("DefaultParagraphSeparator",Yu(i))})};const _=e=>{const t=e.getBody();const n=e.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===t&&n.startOffset===0&&n.endOffset===t.childNodes.length};const N=()=>{i.on("keyup focusin mouseup",e=>{if(!$.modifierPressed(e)&&!_(i)){d.normalize()}},true)};const R=()=>{i.contentStyles.push("img:-moz-broken {"+"-moz-force-broken-image-icon:1;"+"min-width:24px;"+"min-height:24px"+"}")};const A=()=>{if(!i.inline){i.on("keydown",()=>{if(document.activeElement===document.body){i.getWin().focus()}})}};const D=()=>{if(!i.inline){i.contentStyles.push("body {min-height: 150px}");i.on("click",e=>{let t;if(e.target.nodeName==="HTML"){t=i.selection.getRng();i.getBody().focus();i.selection.setRng(t);i.selection.normalize();i.nodeChanged()}})}};const O=()=>{if(u){i.on("keydown",t=>{if($.metaKeyPressed(t)&&!t.shiftKey&&(t.keyCode===37||t.keyCode===39)){t.preventDefault();const e=i.selection.getSel();e.modify("move",t.keyCode===37?"backward":"forward","lineboundary")}})}};const T=()=>{i.on("click",e=>{let t=e.target;do{if(t.tagName==="A"){e.preventDefault();return}}while(t=t.parentNode)});i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")};const B=()=>{i.on("init",()=>{i.dom.bind(i.getBody(),"submit",e=>{e.preventDefault()})})};const P=()=>{e.addNodeFilter("br",e=>{let t=e.length;while(t--){if(e[t].attr("class")==="Apple-interchange-newline"){e[t].remove()}}})};const L=Te;const M=()=>{if(!n||i.removed){return false}const e=i.selection.getSel();return!e||!e.rangeCount||e.rangeCount===0};const I=()=>{if(o){h();y();B();p();if(r){A();D();T()}}if(n){v();k();R();O()}};const F=()=>{x();g();if(!H.windowsPhone){N()}if(o){h();y();S();B();w();P();if(r){A();D();T()}else{p()}}if(n){b();v();C();k();E();R();O();w()}};if(LA(i)){I()}else{F()}return{refreshContentEditable:L,isHidden:M}};const y3=He.DOM;const C3=(e,t)=>{const n=Fe.fromDom(e.getBody());const o=is(rs(n));const s=Fe.fromTag("style");ro(s,"type","text/css");Us(s,Fe.fromText(t));Us(o,s);e.on("remove",()=>{Ue(s)})};const w3=e=>e.inline?e.getElement().nodeName.toLowerCase():undefined;const x3=e=>Xe(e,e=>V(e)===false);const k3=e=>{const t=e.options.get;const n=e.editorUpload.blobCache;return x3({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:w3(e),sanitize:t("xss_sanitization"),validate:true,blob_cache:n,document:e.getDoc()})};const E3=e=>{const t=e.options.get;return x3({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})};const S3=e=>{const t=e.options.get;return{...k3(e),...E3(e),...x3({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}};const _3=c=>{const e=iR(k3(c),c.schema);e.addAttributeFilter("src,href,style,tabindex",(t,n)=>{const o=c.dom;const s="data-mce-"+n;let r=t.length;while(r--){const i=t[r];let e=i.attr(n);if(e&&!i.attr(s)){if(e.indexOf("data:")===0||e.indexOf("blob:")===0){continue}if(n==="style"){e=o.serializeStyle(o.parseStyle(e),i.name);if(!e.length){e=null}i.attr(s,e);i.attr(n,e)}else if(n==="tabindex"){i.attr(s,e);i.attr(n,null)}else{i.attr(s,c.convertURL(e,n,i.name))}}}});e.addNodeFilter("script",t=>{let n=t.length;while(n--){const o=t[n];const e=o.attr("type")||"no/type";if(e.indexOf("mce-")!==0){o.attr("type","mce-"+e)}}});if(xm(c)){e.addNodeFilter("#cdata",e=>{var t;let n=e.length;while(n--){const o=e[n];o.type=8;o.name="#comment";o.value="[CDATA["+c.dom.encode((t=o.value)!==null&&t!==void 0?t:"")+"]]"}})}e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",e=>{let t=e.length;const n=c.schema.getNonEmptyElements();while(t--){const o=e[t];if(o.isEmpty(n)&&o.getAll("br").length===0){o.append(new FC("br",1))}}});return e};const N3=t=>{const n=om(t);if(n){Fy.setEditorTimeout(t,()=>{let e;if(n===true){e=t}else{e=t.editorManager.get(n)}if(e&&!e.destroyed){e.focus();e.selection.scrollIntoView()}},100)}};const R3=o=>{const e=o.dom.getRoot();if(!o.inline&&(!nh(o)||o.selection.getStart(true)===e)){tp(e).each(e=>{const t=e.getNode();const n=Rr(t)?tp(t).getOr(e):e;o.selection.setRng(n.toRange())})}};const A3=e=>{e.bindPendingEventDelegates();e.initialized=true;vb(e);e.focus(true);R3(e);e.nodeChanged({initial:true});const t=tm(e);if(Oe(t)){t.call(e,e)}N3(e)};const D3=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader;const O3=(e,t,n)=>{const o=[D3(e).loadAll(t)];if(e.inline){return o}else{return o.concat([e.ui.styleSheetLoader.loadAll(n)])}};const T3=e=>{const t=D3(e);const n=Cf(e);const o=e.contentCSS;const s=()=>{t.unloadAll(o);if(!e.inline){e.ui.styleSheetLoader.unloadAll(n)}};const r=()=>{if(e.removed){s()}else{e.on("remove",s)}};if(e.contentStyles.length>0){let t="";U.each(e.contentStyles,e=>{t+=e+"\r\n"});e.dom.addStyle(t)}const i=Promise.all(O3(e,o,n)).then(r).catch(r);const c=yf(e);if(c){C3(e,c)}return i};const B3=t=>{const e=t.getDoc(),n=t.getBody();hb(t);if(!sm(t)){e.body.spellcheck=false;y3.setAttrib(n,"spellcheck","false")}t.quirks=v3(t);bb(t);const o=wf(t);if(o!==undefined){n.dir=o}const s=rm(t);if(s){t.on("BeforeSetContent",t=>{U.each(s,e=>{t.content=t.content.replace(e,e=>{return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})})}t.on("SetContent",()=>{t.addVisual(t.getBody())});t.on("compositionstart compositionend",e=>{t.composing=e.type==="compositionstart"})};const P3=e=>{if(!LA(e)){e.load({initial:true,format:"html"})}e.startContent=e.getContent({format:"raw"})};const L3=e=>{if(e.removed!==true){P3(e);A3(e)}};const M3=t=>{const e=t.getElement();let n=t.getDoc();if(t.inline){y3.addClass(e,"mce-content-body");t.contentDocument=n=document;t.contentWindow=window;t.bodyElement=e;t.contentAreaContainer=e}const o=t.getBody();o.disabled=true;t.readonly=qf(t);if(!t.readonly){if(t.inline&&y3.getStyle(o,"position",true)==="static"){o.style.position="relative"}o.contentEditable="true"}o.disabled=false;t.editorUpload=lO(t);t.schema=Aa(E3(t));t.dom=He(n,{keep_values:true,url_converter:t.convertURL,url_converter_scope:t,update_styles:true,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:ff(t),referrerPolicy:mf(t),onSetAttrib:e=>{t.dispatch("SetAttrib",e)}});t.parser=_3(t);t.serializer=zD(S3(t),t);t.selection=ND(t.dom,t.getWin(),t.serializer,t);t.annotator=ib(t);t.formatter=EO(t);t.undoManager=RO(t);t._nodeChangeDispatcher=new Rj(t);t._selectionOverrides=R2(t);ML(t);r$(t);GL(t);if(!LA(t)){h$(t);b3(t)}const s=Nj(t);OL(t,s);VL(t);MO(t);n$(t);const r=IA(t);B3(t);r.fold(()=>{T3(t).then(()=>L3(t))},e=>{t.setProgressState(true);T3(t).then(()=>{e().then(e=>{t.setProgressState(false);L3(t);dD(t)},e=>{t.notificationManager.open({type:"error",text:String(e)});L3(t);dD(t)})})})};const I3=f;const F3=(e,t,n)=>er(e,t,I3,n);const U3=He.DOM;const z3=(e,t,n,o)=>{const s=Fe.fromTag("iframe");o.each(e=>ro(s,"tabindex",e));io(s,n);io(s,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t});xo(s,"tox-edit-area__iframe");return s};const j3=e=>{let t=$u(e)+"<html><head>";if(Vu(e)!==e.documentBaseUrl){t+='<base href="'+e.documentBaseURI.getURI()+'" />'}t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=qu(e);const o=Wu(e);const s=e.translate(Zf(e));if(Ku(e)){t+='<meta http-equiv="Content-Security-Policy" content="'+Ku(e)+'" />'}t+="</head>"+`<body id="${n}" class="mce-content-body ${o}" data-id="${e.id}" aria-label="${s}">`+"<br>"+"</body></html>";return t};const H3=(e,t)=>{const n=e.translate("Rich Text Area");const o=ao(Fe.fromDom(e.getElement()),"tabindex").bind(It);const s=z3(e.id,n,Hu(e),o).dom;s.onload=()=>{s.onload=null;e.dispatch("load")};e.contentAreaContainer=t.iframeContainer;e.iframeElement=s;e.iframeHTML=j3(e);U3.add(t.iframeContainer,s)};const $3=e=>{const t=e.iframeElement;const n=F3(Fe.fromDom(t),"load",()=>{n.unbind();e.contentDocument=t.contentDocument;M3(e)});if(H.browser.isFirefox()){const o=e.getDoc();o.open();o.write(e.iframeHTML);o.close()}else{t.srcdoc=e.iframeHTML}};const V3=(e,t)=>{H3(e,t);if(t.editorContainer){t.editorContainer.style.display=e.orgDisplay;e.hidden=U3.isHidden(t.editorContainer)}e.getElement().style.display="none";U3.setAttrib(e.id,"aria-hidden","true");e.getElement().style.visibility=e.orgVisibility;$3(e)};const q3=He.DOM;const W3=(t,e,n)=>{const o=O1.get(n);const s=O1.urls[n]||t.documentBaseUrl.replace(/\/$/,"");n=U.trim(n);if(o&&U.inArray(e,n)===-1){if(t.plugins[n]){return}try{const r=o(t,s)||{};t.plugins[n]=r;if(Oe(r.init)){r.init(t,s);e.push(n)}}catch(e){q1(t,n,e)}}};const K3=e=>{return e.replace(/^\-/,"")};const G3=t=>{const n=[];Le(Kf(t),e=>{W3(t,n,K3(e))})};const Y3=n=>{const e=U.trim(rf(n));const o=n.ui.registry.getAll().icons;const t={...p1.get("default").icons,...p1.get(e).icons};Me(t,(e,t)=>{if(!Ie(o,t)){n.ui.registry.addIcon(t,e)}})};const X3=e=>{const t=Rf(e);if(Re(t)){const n=T1.get(t);e.theme=n(e,T1.urls[t])||{};if(Oe(e.theme.init)){e.theme.init(e,T1.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}}else{e.theme={}}};const Q3=e=>{const t=Df(e);const n=h1.get(t);e.model=n(e,h1.urls[t])};const J3=e=>{const t=e.theme.renderUI;return t?t():nV(e)};const Z3=e=>{const t=e.getElement();const n=Rf(e);const o=n(e,t);if(o.editorContainer.nodeType){o.editorContainer.id=o.editorContainer.id||e.id+"_parent"}if(o.iframeContainer&&o.iframeContainer.nodeType){o.iframeContainer.id=o.iframeContainer.id||e.id+"_iframecontainer"}o.height=o.iframeHeight?o.iframeHeight:t.offsetHeight;return o};const eV=(e,t)=>{return{editorContainer:e,iframeContainer:t,api:{}}};const tV=e=>{const t=q3.create("div");q3.insertAfter(t,e);return eV(t,t)};const nV=e=>{const t=e.getElement();return e.inline?eV(null):tV(t)};const oV=e=>{const t=e.getElement();e.orgDisplay=t.style.display;if(Re(Rf(e))){return J3(e)}else if(Oe(Rf(e))){return Z3(e)}else{return nV(e)}};const sV=(e,n)=>{const t={show:C.from(n.show).getOr(Te),hide:C.from(n.hide).getOr(Te),isEnabled:C.from(n.isEnabled).getOr(f),setEnabled:t=>{if(!e.mode.isReadOnly()){C.from(n.setEnabled).each(e=>e(t))}}};e.ui={...e.ui,...t}};const rV=async e=>{e.dispatch("ScriptsLoaded");Y3(e);X3(e);Q3(e);G3(e);const t=await oV(e);sV(e,C.from(t.api).getOr({}));e.editorContainer=t.editorContainer;Q1(e);if(e.inline){M3(e)}else{V3(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})}};const iV=He.DOM;const cV=e=>e.charAt(0)==="-";const aV=(e,t)=>{const n=gf(t);const o=pf(t);if(!wl.hasCode(n)&&n!=="en"){const s=Pt(o)?o:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(s).catch(()=>{H1(t,s,n)})}};const lV=(e,t)=>{const n=Rf(e);if(Re(n)&&!cV(n)&&!Ie(T1.urls,n)){const o=Af(e);const s=o?e.documentBaseURI.toAbsolute(o):`themes/${n}/theme${t}.js`;T1.load(n,s).catch(()=>{$1(e,s,n)})}};const dV=(e,t)=>{const n=Df(e);if(n!=="plugin"&&!Ie(h1.urls,n)){const o=Of(e);const s=Re(o)?e.documentBaseURI.toAbsolute(o):`models/${n}/model${t}.js`;h1.load(n,s).catch(()=>{V1(e,s,n)})}};const uV=e=>C.from(cf(e)).filter(Pt).map(e=>({url:e,name:C.none()}));const fV=(t,e,n)=>C.from(e).filter(e=>Pt(e)&&!p1.has(e)).map(e=>({url:`${t.editorManager.baseURL}/icons/${e}/icons${n}.js`,name:C.some(e)}));const mV=(t,n,e)=>{const o=fV(n,"default",e);const s=uV(n).orThunk(()=>fV(n,rf(n),""));Le(Tn([o,s]),e=>{t.add(e.url).catch(()=>{j1(n,e.url,e.name.getOrUndefined())})})};const gV=(n,t)=>{const o=(e,t)=>{O1.load(e,t).catch(()=>{z1(n,t,e)})};Me(Gf(n),(e,t)=>{o(t,e);n.options.set("plugins",Kf(n).concat(t))});Le(Kf(n),e=>{e=U.trim(e);if(e&&!O1.urls[e]&&!cV(e)){o(e,`plugins/${e}/plugin${t}.js`)}})};const pV=e=>{const t=Rf(e);return!Re(t)||De(T1.get(t))};const hV=e=>{const t=Df(e);return De(h1.get(t))};const bV=(e,t)=>{const n=cl.ScriptLoader;const o=()=>{if(!e.removed&&pV(e)&&hV(e)){rV(e)}};lV(e,t);dV(e,t);aV(n,e);mV(n,e,t);gV(e,t);n.loadQueue().then(o,o)};const vV=(e,t)=>$c.forElement(e,{contentCssCors:Wf(t),referrerPolicy:mf(t)});const yV=t=>{const e=t.id;wl.setCode(gf(t));const n=()=>{iV.unbind(window,"ready",n);t.render()};if(!Va.Event.domLoaded){iV.bind(window,"ready",n);return}if(!t.getElement()){return}const o=Fe.fromDom(t.getElement());const s=mo(o);t.on("remove",()=>{ie(o.dom.attributes,e=>uo(o,e.name));io(o,s)});t.ui.styleSheetLoader=vV(o,t);if(!Ff(t)){t.orgVisibility=t.getElement().style.visibility;t.getElement().style.visibility="hidden"}else{t.inline=true}const r=t.getElement().form||iV.getParent(e,"form");if(r){t.formElement=r;if(Uf(t)&&!Dr(t.getElement())){iV.insertAfter(iV.create("input",{type:"hidden",name:e}),e);t.hasHiddenInput=true}t.formEventDelegate=e=>{t.dispatch(e.type,e)};iV.bind(r,"submit reset",t.formEventDelegate);t.on("reset",()=>{t.resetContent()});if(zf(t)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit){r._mceOldSubmit=r.submit;r.submit=()=>{t.editorManager.triggerSave();t.setDirty(false);return r._mceOldSubmit(r)}}}t.windowManager=P1(t);t.notificationManager=D1(t);if(Rm(t)){t.on("GetContent",e=>{if(e.save){e.content=iV.encode(e.content)}})}if(jf(t)){t.on("submit",()=>{if(t.initialized){t.save()}})}if(Hf(t)){t._beforeUnload=()=>{if(t.initialized&&!t.destroyed&&!t.isHidden()){t.save({format:"raw",no_events:true,set_dirty:false})}};t.editorManager.on("BeforeUnload",t._beforeUnload)}t.editorManager.add(t);bV(t,t.suffix)};const CV=(e,t)=>({sections:Be(e),options:Be(t)});const wV=gn().deviceType;const xV=wV.isPhone();const kV=wV.isTablet();const EV=e=>{if(Ae(e)){return[]}else{const t=Ve(e)?e:e.split(/[ ,]/);const n=y(t,Ot);return S(n,Pt)}};const SV=(n,e)=>{const t=Ye(e,(e,t)=>{return m(n,t)});return CV(t.t,t.f)};const _V=(e,t,n={})=>{const o=e.sections();const s=p(o,t).getOr({});return U.extend({},n,s)};const NV=(e,t)=>{return Ie(e.sections(),t)};const RV=(e,t)=>{return NV(e,t)?e.sections()[t]:{}};const AV=(e,t)=>{const n={table_grid:false,object_resizing:false,resize:false,toolbar_mode:p(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:false};const o={menubar:false};return{...n,...t?o:{}}};const DV=(e,t)=>{var n;const o=(n=t.external_plugins)!==null&&n!==void 0?n:{};if(e&&e.external_plugins){return U.extend({},e.external_plugins,o)}else{return o}};const OV=(e,t)=>[...EV(e),...EV(t)];const TV=(e,t,n,o)=>{if(e&&NV(t,"mobile")){return o}else{return n}};const BV=(e,t,n,o)=>{const s=EV(n.forced_plugins);const r=EV(o.plugins);const i=RV(t,"mobile");const c=i.plugins?EV(i.plugins):r;const a=TV(e,t,r,c);const l=OV(s,a);return U.extend(o,{forced_plugins:s,plugins:l})};const PV=(e,t)=>{return e&&NV(t,"mobile")};const LV=(e,t,n,o,s)=>{var r;const i=e?{mobile:AV((r=s.mobile)!==null&&r!==void 0?r:{},t)}:{};const c=SV(["mobile"],hF(i,s));const a=U.extend(n,o,c.options(),PV(e,c)?_V(c,"mobile"):{},{external_plugins:DV(o,c.options())});return BV(e,c,o,a)};const MV=(e,t)=>LV(xV||kV,xV,t,e,t);const IV=(e,t)=>lD(e,t);const FV=n=>{const e=(e,t)=>{n.formatter.toggle(e,t);n.nodeChanged()};const t=t=>()=>{Le("left,center,right,justify".split(","),e=>{if(t!==e){n.formatter.remove("align"+e)}});if(t!=="none"){e("align"+t)}};n.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})};const UV=o=>{const e=n=>()=>{const e=o.selection;const t=e.isCollapsed()?[o.dom.getParent(e.getNode(),o.dom.isBlock)]:e.getSelectedBlocks();return Pe(t,e=>De(o.formatter.matchNode(e,n)))};o.editorCommands.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify")},"state")};const zV=e=>{FV(e);UV(e)};const jV=o=>{o.editorCommands.addCommands({"Cut,Copy,Paste":e=>{const t=o.getDoc();let n;try{t.execCommand(e)}catch(e){n=true}if(e==="paste"&&!t.queryCommandEnabled(e)){n=true}if(n||!t.queryCommandSupported(e)){let e=o.translate(`Your browser doesn't support direct access to the clipboard. `+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(H.os.isMacOS()||H.os.isiOS()){e=e.replace(/Ctrl\+/g,"⌘+")}o.notificationManager.open({text:e,type:"error"})}}})};const HV=(e,t,n)=>{const o=Fe.fromDom(e.getRoot());if(ew(o,M.fromRangeStart(t))){n=n.replace(/^ /,"&nbsp;")}else{n=n.replace(/^&nbsp;/," ")}if(nw(o,M.fromRangeEnd(t))){n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;")}else{n=n.replace(/&nbsp;(<br( \/)?>)?$/," ")}return n};const $V=e=>{if(typeof e!=="string"){const t=U.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}};const VV=(e,t)=>{const n=e.selection;const o=e.dom;if(/^ | $/.test(t)){return HV(o,n.getRng(),t)}else{return t}};const qV=(n,e)=>{if(n.selection.isEditable()){const{content:t,details:o}=$V(e);uR(n,{...o,content:VV(n,t),format:"html",set:false,selection:true}).each(e=>{const t=cD(n,e.content,o);fR(n,t,e);n.addVisual()})}};const WV=o=>{o.editorCommands.addCommands({mceCleanup:()=>{const e=o.selection.getBookmark();o.setContent(o.getContent());o.selection.moveToBookmark(e)},insertImage:(e,t,n)=>{qV(o,o.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{o.execCommand("mceInsertContent",false,"<hr>")},insertText:(e,t,n)=>{qV(o,o.dom.encode(n))},insertHTML:(e,t,n)=>{qV(o,n)},mceInsertContent:(e,t,n)=>{qV(o,n)},mceSetContent:(e,t,n)=>{o.setContent(n)},mceReplaceContent:(e,t,n)=>{o.execCommand("mceInsertContent",false,n.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceNewDocument:()=>{o.setContent("")}})};const KV={"font-size":"size","font-family":"face"};const GV=oo("font");const YV=(e,t,n)=>{const o=t=>Ts(t,e).orThunk(()=>{if(GV(t)){return p(KV,e).bind(e=>ao(t,e))}else{return C.none()}});const s=e=>k(Fe.fromDom(t),e);return gE(Fe.fromDom(n),e=>o(e),s)};const XV=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",");const QV=(e,t)=>C.from(He.DOM.getStyle(t,e,true));const JV=n=>(t,e)=>C.from(e).map(Fe.fromDom).filter(Zn).bind(e=>YV(n,t,e.dom).or(QV(n,e.dom))).getOr("");const ZV=JV("font-size");const eq=K(XV,JV("font-family"));const tq=e=>tp(e.getBody()).bind(e=>{const t=e.container();return C.from(je(t)?t.parentNode:t)});const nq=o=>C.from(o.selection.getRng()).bind(e=>{const t=o.getBody();const n=e.startContainer===t&&e.startOffset===0;return n?C.none():C.from(o.selection.getStart(true))});const oq=(e,t)=>nq(e).orThunk(h(tq,e)).map(Fe.fromDom).filter(Zn).bind(t);const sq=(e,t)=>oq(e,G(C.some,t));const rq=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=_m(e);const s=Nm(e);if(s.length>0){return s[n-1]||t}else{return o[n-1]||t}}else{return t}}else{return t}};const iq=e=>{const t=e.split(/\s*,\s*/);return y(t,e=>{if(e.indexOf(" ")!==-1&&!(Rt(e,'"')||Rt(e,`'`))){return`'${e}'`}else{return e}}).join(",")};const cq=(e,t)=>{const n=rq(e,t);e.formatter.toggle("fontname",{value:iq(n)});e.nodeChanged()};const aq=t=>sq(t,e=>eq(t.getBody(),e.dom)).getOr("");const lq=(e,t)=>{e.formatter.toggle("fontsize",{value:rq(e,t)});e.nodeChanged()};const dq=t=>sq(t,e=>ZV(t.getBody(),e.dom)).getOr("");const uq=s=>sq(s,n=>{const e=Fe.fromDom(s.getBody());const t=gE(n,e=>Ts(e,"line-height"),h(k,e));const o=()=>{const e=parseFloat(Ds(n,"line-height"));const t=parseFloat(Ds(n,"font-size"));return String(e/t)};return t.getOrThunk(o)}).getOr("");const fq=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)});e.nodeChanged()};const mq=o=>{const s=(e,t)=>{o.formatter.toggle(e,t);o.nodeChanged()};o.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{s(e)},"ForeColor,HiliteColor":(e,t,n)=>{s(e,{value:n})},BackColor:(e,t,n)=>{s("hilitecolor",{value:n})},FontName:(e,t,n)=>{cq(o,n)},FontSize:(e,t,n)=>{lq(o,n)},LineHeight:(e,t,n)=>{fq(o,n)},Lang:(e,t,n)=>{var o;s(e,{value:n.code,customValue:(o=n.customCode)!==null&&o!==void 0?o:null})},RemoveFormat:e=>{o.formatter.remove(e)},mceBlockQuote:()=>{s("blockquote")},FormatBlock:(e,t,n)=>{s(Re(n)?n:"p")},mceToggleFormat:(e,t,n)=>{s(n)}})};const gq=t=>{const n=e=>t.formatter.match(e);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>n(e),mceBlockQuote:()=>n("blockquote")},"state");t.editorCommands.addQueryValueHandler("FontName",()=>aq(t));t.editorCommands.addQueryValueHandler("FontSize",()=>dq(t));t.editorCommands.addQueryValueHandler("LineHeight",()=>uq(t))};const pq=e=>{mq(e);gq(e)};const hq=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})};const bq=e=>{e.editorCommands.addCommands({Indent:()=>{SL(e)},Outdent:()=>{_L(e)}});e.editorCommands.addCommands({Outdent:()=>CL(e)},"state")};const vq=r=>{const e=(e,t,n)=>{const o=Re(n)?{href:n}:n;const s=r.dom.getParent(r.selection.getNode(),"a");if(I(o)&&Re(o.href)){o.href=o.href.replace(/ /g,"%20");if(!s||!o.href){r.formatter.remove("link")}if(o.href){r.formatter.apply("link",o,s)}}};r.editorCommands.addCommands({unlink:()=>{if(r.selection.isCollapsed()){const e=r.dom.getParent(r.selection.getStart(),"a");if(e){r.dom.remove(e,true)}return}r.formatter.remove("link")},mceInsertLink:e,createLink:e})};const yq=s=>{s.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{s.getDoc().execCommand(e);const t=s.dom.getParent(s.selection.getNode(),"ol,ul");if(t){const n=t.parentNode;if(n&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){const o=s.selection.getBookmark();s.dom.split(n,t);s.selection.moveToBookmark(o)}}}})};const Cq=n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{const t=n.dom.getParent(n.selection.getNode(),"ul,ol");return t&&(e==="insertunorderedlist"&&t.tagName==="UL"||e==="insertorderedlist"&&t.tagName==="OL")}},"state")};const wq=e=>{yq(e);Cq(e)};const xq=o=>{o.editorCommands.addCommands({insertParagraph:()=>{nj(Sz,o)},mceInsertNewLine:(e,t,n)=>{oj(o,n)},InsertLineBreak:(e,t,n)=>{nj(Uz,o)}})};const kq=s=>{s.editorCommands.addCommands({mceSelectNodeDepth:(e,t,n)=>{let o=0;s.dom.getParent(s.selection.getNode(),e=>{if(ze(e)&&o++===n){s.selection.select(e);return false}else{return true}},s.getBody())},mceSelectNode:(e,t,n)=>{s.selection.select(n)},selectAll:()=>{const e=s.dom.getParent(s.selection.getStart(),Ir);if(e){const t=s.dom.createRng();t.selectNodeContents(e);s.selection.setRng(t)}}})};const Eq=r=>{r.editorCommands.addCommands({mceRemoveNode:(e,t,n)=>{const o=n!==null&&n!==void 0?n:r.selection.getNode();if(o!==r.getBody()){const s=r.selection.getBookmark();r.dom.remove(o,true);r.selection.moveToBookmark(s)}},mcePrint:()=>{r.getWin().print()},mceFocus:(e,t,n)=>{fC(r,n===true)},mceToggleVisualAid:()=>{r.hasVisual=!r.hasVisual;r.addVisual()}})};const Sq=e=>{zV(e);jV(e);hq(e);kq(e);WV(e);vq(e);bq(e);xq(e);wq(e);pq(e);Eq(e)};const _q=["toggleview"];const Nq=e=>m(_q,e.toLowerCase());class Rq{constructor(e){this.commands={state:{},exec:{},value:{}};this.editor=e}execCommand(e,t=false,n,o){const s=this.editor;const r=e.toLowerCase();const i=o===null||o===void 0?void 0:o.skip_focus;if(s.removed){return false}if(r!=="mcefocus"){if(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(r)&&!i){s.focus()}else{By(s)}}const c=s.dispatch("BeforeExecCommand",{command:e,ui:t,value:n});if(c.isDefaultPrevented()){return false}const a=this.commands.exec[r];if(Oe(a)){a(r,t,n);s.dispatch("ExecCommand",{command:e,ui:t,value:n});return true}return false}queryCommandState(e){if(!Nq(e)&&this.editor.quirks.isHidden()||this.editor.removed){return false}const t=e.toLowerCase();const n=this.commands.state[t];if(Oe(n)){return n(t)}return false}queryCommandValue(e){if(!Nq(e)&&this.editor.quirks.isHidden()||this.editor.removed){return""}const t=e.toLowerCase();const n=this.commands.value[t];if(Oe(n)){return n(t)}return""}addCommands(e,n="exec"){const o=this.commands;Me(e,(t,e)=>{Le(e.toLowerCase().split(","),e=>{o[n][e]=t})})}addCommand(e,o,s){const t=e.toLowerCase();this.commands.exec[t]=(e,t,n)=>o.call(s!==null&&s!==void 0?s:this.editor,t,n)}queryCommandSupported(e){const t=e.toLowerCase();if(this.commands.exec[t]){return true}else{return false}}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(n!==null&&n!==void 0?n:this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(n!==null&&n!==void 0?n:this.editor)}}const Aq="data-mce-contenteditable";const Dq=(e,t,n)=>{if(_o(e,t)&&!n){Eo(e,t)}else if(n){xo(e,t)}};const Oq=(e,t,n)=>{try{e.getDoc().execCommand(t,false,String(n))}catch(e){}};const Tq=(e,t)=>{e.dom.contentEditable=t?"true":"false"};const Bq=e=>{Le(hr(e,'*[contenteditable="true"]'),e=>{ro(e,Aq,"true");Tq(e,false)})};const Pq=e=>{Le(hr(e,`*[${Aq}="true"]`),e=>{uo(e,Aq);Tq(e,true)})};const Lq=e=>{C.from(e.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})};const Mq=e=>{e.selection.setRng(e.selection.getRng())};const Iq=(e,t)=>{const n=Fe.fromDom(e.getBody());Dq(n,"mce-content-readonly",t);if(t){e.selection.controlSelection.hideResizeRect();e._selectionOverrides.hideFakeCaret();Lq(e);e.readonly=true;Tq(n,false);Bq(n)}else{e.readonly=false;Tq(n,true);Pq(n);Oq(e,"StyleWithCSS",false);Oq(e,"enableInlineTableEditing",false);Oq(e,"enableObjectResizing",false);if(lC(e)){e.focus()}Mq(e);e.nodeChanged()}};const Fq=e=>e.readonly;const Uq=t=>{t.parser.addAttributeFilter("contenteditable",e=>{if(Fq(t)){Le(e,e=>{e.attr(Aq,e.attr("contenteditable"));e.attr("contenteditable","false")})}});t.serializer.addAttributeFilter(Aq,e=>{if(Fq(t)){Le(e,e=>{e.attr("contenteditable",e.attr(Aq))})}});t.serializer.addTempAttr(Aq)};const zq=e=>{if(e.serializer){Uq(e)}else{e.on("PreInit",()=>{Uq(e)})}};const jq=e=>e.type==="click";const Hq=["copy"];const $q=e=>m(Hq,e.type);const Vq=(t,e)=>{const n=e=>k(e,Fe.fromDom(t.getBody()));return ws(e,"a",n).bind(e=>ao(e,"href"))};const qq=(n,o)=>{if(jq(o)&&!$.metaKeyPressed(o)){const e=Fe.fromDom(o.target);Vq(n,e).each(e=>{o.preventDefault();if(/^#/.test(e)){const t=n.dom.select(`${e},[name="${_t(e,"#")}"]`);if(t.length){n.selection.scrollIntoView(t[0],true)}}else{window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}})}else if($q(o)){n.dispatch(o.type,o)}};const Wq=t=>{t.on("ShowCaret",e=>{if(Fq(t)){e.preventDefault()}});t.on("ObjectSelected",e=>{if(Fq(t)){e.preventDefault()}})};const Kq=U.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Gq{constructor(e){this.bindings={};this.settings=e||{};this.scope=this.settings.scope||this;this.toggleEvent=this.settings.toggleEvent||a}static isNative(e){return!!Kq[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const n=e.toLowerCase();const o=Ma(n,t!==null&&t!==void 0?t:{},this.scope);if(this.settings.beforeFire){this.settings.beforeFire(o)}const s=this.bindings[n];if(s){for(let e=0,t=s.length;e<t;e++){const r=s[e];if(r.removed){continue}if(r.once){this.off(n,r.func)}if(o.isImmediatePropagationStopped()){return o}if(r.func.call(this.scope,o)===false){o.preventDefault();return o}}}return o}on(e,n,o,s){if(n===false){n=a}if(n){const r={func:n,removed:false};if(s){U.extend(r,s)}const i=e.toLowerCase().split(" ");let t=i.length;while(t--){const c=i[t];let e=this.bindings[c];if(!e){e=[];this.toggleEvent(c,true)}if(o){e=[r,...e]}else{e=[...e,r]}this.bindings[c]=e}}return this}off(n,o){if(n){const s=n.toLowerCase().split(" ");let t=s.length;while(t--){const r=s[t];let e=this.bindings[r];if(!r){Me(this.bindings,(e,t)=>{this.toggleEvent(t,false);delete this.bindings[t]});return this}if(e){if(!o){e.length=0}else{const i=ce(e,e=>e.func===o);e=i.fail;this.bindings[r]=e;Le(i.pass,e=>{e.removed=true})}if(!e.length){this.toggleEvent(n,false);delete this.bindings[r]}}}}else{Me(this.bindings,(e,t)=>{this.toggleEvent(t,false)});this.bindings={}}return this}once(e,t,n){return this.on(e,t,n,{once:true})}has(e){e=e.toLowerCase();const t=this.bindings[e];return!(!t||t.length===0)}}const Yq=n=>{if(!n._eventDispatcher){n._eventDispatcher=new Gq({scope:n,toggleEvent:(e,t)=>{if(Gq.isNative(e)&&n.toggleNativeEvent){n.toggleNativeEvent(e,t)}}})}return n._eventDispatcher};const Xq={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(t,e,n){const o=this;if(o.removed&&t!=="remove"&&t!=="detach"){return Ma(t.toLowerCase(),e!==null&&e!==void 0?e:{},o)}const s=Yq(o).dispatch(t,e);if(n!==false&&o.parent){let e=o.parent();while(e&&!s.isPropagationStopped()){e.dispatch(t,s,false);e=e.parent?e.parent():undefined}}return s},on(e,t,n){return Yq(this).on(e,t,n)},off(e,t){return Yq(this).off(e,t)},once(e,t){return Yq(this).once(e,t)},hasEventListeners(e){return Yq(this).has(e)}};const Qq=He.DOM;let Jq;const Zq=(e,t)=>{if(t==="selectionchange"){return e.getDoc()}if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t)){return e.getDoc().documentElement}const n=_f(e);if(n){if(!e.eventRoot){e.eventRoot=Qq.select(n)[0]}return e.eventRoot}return e.getBody()};const e8=e=>!e.hidden&&!Fq(e);const t8=(e,t,n)=>{if(e8(e)){e.dispatch(t,n)}else if(Fq(e)){qq(e,n)}};const n8=(r,i)=>{if(!r.delegates){r.delegates={}}if(r.delegates[i]||r.removed){return}const e=Zq(r,i);if(_f(r)){if(!Jq){Jq={};r.editorManager.on("removeEditor",()=>{if(!r.editorManager.activeEditor){if(Jq){Me(Jq,(e,t)=>{r.dom.unbind(Zq(r,t))});Jq=null}}})}if(Jq[i]){return}const t=e=>{const t=e.target;const n=r.editorManager.get();let o=n.length;while(o--){const s=n[o].getBody();if(s===t||Qq.isChildOf(t,s)){t8(n[o],i,e)}}};Jq[i]=t;Qq.bind(e,i,t)}else{const t=e=>{t8(r,i,e)};Qq.bind(e,i,t);r.delegates[i]=t}};const o8={...Xq,bindPendingEventDelegates(){const t=this;U.each(t._pendingNativeEvents,e=>{n8(t,e)})},toggleNativeEvent(e,t){const n=this;if(e==="focus"||e==="blur"){return}if(n.removed){return}if(t){if(n.initialized){n8(n,e)}else{if(!n._pendingNativeEvents){n._pendingNativeEvents=[e]}else{n._pendingNativeEvents.push(e)}}}else if(n.initialized&&n.delegates){n.dom.unbind(Zq(n,e),e,n.delegates[e]);delete n.delegates[e]}},unbindAllNativeEvents(){const n=this;const e=n.getBody();const t=n.dom;if(n.delegates){Me(n.delegates,(e,t)=>{n.dom.unbind(Zq(n,t),t,e)});delete n.delegates}if(!n.inline&&e&&t){e.onload=null;t.unbind(n.getWin());t.unbind(n.getDoc())}if(t){t.unbind(e);t.unbind(n.getContainer())}}};const s8=e=>{if(Re(e)){return{value:e.split(/[ ,]/),valid:true}}else if(W(e,Re)){return{value:e,valid:true}}else{return{valid:false,message:`The value must be a string[] or a comma/space separated string.`}}};const r8=t=>{const n=(()=>{switch(t){case"array":return Ve;case"boolean":return j;case"function":return Oe;case"number":return q;case"object":return I;case"string":return Re;case"string[]":return s8;case"object[]":return e=>W(e,I);case"regexp":return e=>L(e,RegExp);default:return f}})();return e=>l8(e,n,`The value must be a ${t}.`)};const i8=e=>Re(e.processor);const c8=(e,t)=>{const n=Lt(t.message)?"":`. ${t.message}`;return e+n};const a8=e=>e.valid;const l8=(e,t,n="")=>{const o=t(e);if(j(o)){return o?{value:e,valid:true}:{valid:false,message:n}}else{return o}};const d8=(e,t,n)=>{if(!V(t)){const o=l8(t,n);if(a8(o)){return o.value}else{console.error(c8(`Invalid default value passed for the "${e}" option`,o))}}return undefined};const u8=(e,r)=>{const i={};const c={};const a=(e,t,n)=>{const o=l8(t,n);if(a8(o)){c[e]=o.value;return true}else{console.warn(c8(`Invalid value passed for the ${e} option`,o));return false}};const t=(t,e)=>{const n=i8(e)?r8(e.processor):e.processor;const o=d8(t,e.default,n);i[t]={...e,default:o,processor:n};const s=p(c,t).orThunk(()=>p(r,t));s.each(e=>a(t,e,n))};const o=e=>Ie(i,e);const n=e=>p(c,e).orThunk(()=>p(i,e).map(e=>e.default)).getOrUndefined();const s=(e,t)=>{if(!o(e)){console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`);return false}else{const n=i[e];if(n.immutable){console.error(`"${e}" is an immutable option and cannot be updated`);return false}else{return a(e,t,n.processor)}}};const l=e=>{const t=o(e);if(t){delete c[e]}return t};const d=e=>Ie(c,e);return{register:t,isRegistered:o,get:n,set:s,unset:l,isSet:d}};const f8=["design","readonly"];const m8=(e,t,n,o)=>{const s=n[t.get()];const r=n[o];try{r.activate()}catch(e){console.error(`problem while activating editor mode ${o}:`,e);return}s.deactivate();if(s.editorReadOnly!==r.editorReadOnly){Iq(e,r.editorReadOnly)}t.set(o);mb(e,o)};const g8=(e,t,n,o)=>{if(o===n.get()){return}else if(!Ie(t,o)){throw new Error(`Editor mode '${o}' is invalid`)}if(e.initialized){m8(e,n,t,o)}else{e.on("init",()=>m8(e,n,t,o))}};const p8=(e,t,n)=>{if(m(f8,t)){throw new Error(`Cannot override default mode ${t}`)}return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}};const h8=t=>{const n=al("design");const o=al({design:{activate:Te,deactivate:Te,editorReadOnly:false},readonly:{activate:Te,deactivate:Te,editorReadOnly:true}});zq(t);Wq(t);return{isReadOnly:()=>Fq(t),set:e=>g8(t,o.get(),n,e),get:()=>n.get(),register:(e,t)=>{o.set(p8(o.get(),e,t))}}};const b8=U.each,v8=U.explode;const y8={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};const C8=U.makeMap("alt,ctrl,shift,meta,access");const w8=e=>e in C8;const x8=e=>{const t={};const n=H.os.isMacOS()||H.os.isiOS();b8(v8(e.toLowerCase(),"+"),e=>{if(w8(e)){t[e]=true}else{if(/^[0-9]{2,}$/.test(e)){t.keyCode=parseInt(e,10)}else{t.charCode=e.charCodeAt(0);t.keyCode=y8[e]||e.toUpperCase().charCodeAt(0)}}});const o=[t.keyCode];let s;for(s in C8){if(t[s]){o.push(s)}else{t[s]=false}}t.id=o.join(",");if(t.access){t.alt=true;if(n){t.ctrl=true}else{t.shift=true}}if(t.meta){if(n){t.meta=true}else{t.ctrl=true;t.meta=false}}return t};class k8{constructor(e){this.shortcuts={};this.pendingPatterns=[];this.editor=e;const n=this;e.on("keyup keypress keydown",t=>{if((n.hasModifier(t)||n.isFunctionKey(t))&&!t.isDefaultPrevented()){b8(n.shortcuts,e=>{if(n.matchShortcut(t,e)){n.pendingPatterns=e.subpatterns.slice(0);if(t.type==="keydown"){n.executeShortcutAction(e)}}});if(n.matchShortcut(t,n.pendingPatterns[0])){if(n.pendingPatterns.length===1){if(t.type==="keydown"){n.executeShortcutAction(n.pendingPatterns[0])}}n.pendingPatterns.shift()}}})}add(e,n,t,o){const s=this;const r=s.normalizeCommandFunc(t);b8(v8(U.trim(e)),e=>{const t=s.createShortcut(e,n,r,o);s.shortcuts[t.id]=t});return true}remove(e){const t=this.createShortcut(e);if(this.shortcuts[t.id]){delete this.shortcuts[t.id];return true}return false}normalizeCommandFunc(e){const t=this;const n=e;if(typeof n==="string"){return()=>{t.editor.execCommand(n,false,null)}}else if(U.isArray(n)){return()=>{t.editor.execCommand(n[0],n[1],n[2])}}else{return n}}createShortcut(e,t,n,o){const s=U.map(v8(e,">"),x8);s[s.length-1]=U.extend(s[s.length-1],{func:n,scope:o||this.editor});return U.extend(s[0],{desc:this.editor.translate(t),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return e.type==="keydown"&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){if(!t){return false}if(t.ctrl!==e.ctrlKey||t.meta!==e.metaKey){return false}if(t.alt!==e.altKey||t.shift!==e.shiftKey){return false}if(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode){e.preventDefault();return true}return false}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const E8=()=>{const e={};const t={};const n={};const o={};const s={};const r={};const i={};const c={};const a=(n,o)=>(e,t)=>{n[e.toLowerCase()]={...t,type:o}};const l=(e,t)=>o[e.toLowerCase()]=t;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(s,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addView:a(c,"views"),addIcon:l,getAll:()=>({buttons:e,menuItems:t,icons:o,popups:n,contextMenus:s,contextToolbars:r,sidebars:i,views:c})}};const S8=()=>{const e=E8();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}};const _8=He.DOM;const N8=U.extend,R8=U.each;class A8{constructor(e,t,n){this.plugins={};this.contentCSS=[];this.contentStyles=[];this.loadedCSS={};this.isNotDirty=false;this.composing=false;this.destroyed=false;this.hasHiddenInput=false;this.iframeElement=null;this.initialized=false;this.readonly=false;this.removed=false;this.startContent="";this._pendingNativeEvents=[];this._skinLoaded=false;this.editorManager=n;this.documentBaseUrl=n.documentBaseURL;N8(this,o8);const o=this;this.id=e;this.hidden=false;const s=MV(n.defaultOptions,t);this.options=u8(o,s);ju(o);const r=this.options.get;if(r("deprecation_warnings")){i1(t,s)}const i=r("suffix");if(i){n.suffix=i}this.suffix=n.suffix;const c=r("base_url");if(c){n._setBaseUrl(c)}this.baseUri=n.baseURI;const a=mf(o);if(a){cl.ScriptLoader._setReferrerPolicy(a);He.DOM.styleSheetLoader._setReferrerPolicy(a)}const l=Wf(o);if(De(l)){He.DOM.styleSheetLoader._setContentCssCors(l)}xl.languageLoad=r("language_load");xl.baseURL=n.baseURL;this.setDirty(false);this.documentBaseURI=new HN(Vu(o),{base_uri:this.baseUri});this.baseURI=this.baseUri;this.inline=Ff(o);this.hasVisual=Xf(o);this.shortcuts=new k8(this);this.editorCommands=new Rq(this);Sq(this);const d=r("cache_suffix");if(d){H.cacheSuffix=d.replace(/^[\?\&]+/,"")}this.ui={registry:S8(),styleSheetLoader:undefined,show:Te,hide:Te,setEnabled:Te,isEnabled:f};this.mode=h8(o);n.dispatch("SetupEditor",{editor:this});const u=em(o);if(Oe(u)){u.call(o,o)}}render(){yV(this)}focus(e){this.execCommand("mceFocus",false,e)}hasFocus(){return aC(this)}translate(e){return wl.translate(e)}getParam(e,t,n){const o=this.options;if(!o.isRegistered(e)){if(De(n)){o.register(e,{processor:n,default:t})}else{o.register(e,{processor:f,default:t})}}return!o.isSet(e)&&!V(t)?t:o.get(e)}hasPlugin(e,t){const n=m(Kf(this),e);if(n){return t?O1.get(e)!==undefined:true}else{return false}}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,o){this.shortcuts.add(e,t,n,o)}execCommand(e,t,n,o){return this.editorCommands.execCommand(e,t,n,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;if(e.hidden){e.hidden=false;if(e.inline){e.getBody().contentEditable="true"}else{_8.show(e.getContainer());_8.hide(e.id)}e.load();e.dispatch("show")}}hide(){const e=this;if(!e.hidden){e.save();if(e.inline){e.getBody().contentEditable="false";if(e===e.editorManager.focusedEditor){e.editorManager.focusedEditor=null}}else{_8.hide(e.getContainer());_8.setStyle(e.id,"display",e.orgDisplay)}e.hidden=true;e.dispatch("hide")}}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(n={}){const o=this;const s=o.getElement();if(o.removed){return""}if(s){const r={...n,load:true};const e=Dr(s)?s.value:s.innerHTML;const t=o.setContent(e,r);if(!r.no_events){o.dispatch("LoadContent",{...r,element:s})}return t}else{return""}}save(e={}){const t=this;let n=t.getElement();if(!n||!t.initialized||t.removed){return""}const o={...e,save:true,element:n};let s=t.getContent(o);const r={...o,content:s};if(!r.no_events){t.dispatch("SaveContent",r)}if(r.format==="raw"){t.dispatch("RawSaveContent",r)}s=r.content;if(!Dr(n)){if(e.is_removing||!t.inline){n.innerHTML=s}const i=_8.getParent(t.id,"form");if(i){R8(i.elements,e=>{if(e.name===t.id){e.value=s;return false}else{return true}})}}else{n.value=s}r.element=o.element=n=null;if(r.set_dirty!==false){t.setDirty(false)}return s}setContent(e,t){return WD(this,e,t)}getContent(e){return $D(this,e)}insertContent(e,t){if(t){e=N8({content:e},t)}this.execCommand("mceInsertContent",false,e)}resetContent(e){if(e===undefined){WD(this,this.startContent,{format:"raw"})}else{WD(this,e)}this.undoManager.reset();this.setDirty(false);this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e;if(e&&e!==t){this.dispatch("dirty")}}getContainer(){const e=this;if(!e.container){e.container=e.editorContainer||_8.get(e.id+"_parent")}return e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){if(!this.targetElm){this.targetElm=_8.get(this.id)}return this.targetElm}getWin(){const e=this;if(!e.contentWindow){const t=e.iframeElement;if(t){e.contentWindow=t.contentWindow}}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const t=e.getWin();if(t){e.contentDocument=t.document}}return e.contentDocument}getBody(){var e,t;const n=this.getDoc();return(t=(e=this.bodyElement)!==null&&e!==void 0?e:n===null||n===void 0?void 0:n.body)!==null&&t!==void 0?t:null}convertURL(e,t,n){const o=this,s=o.options.get;const r=nm(o);if(Oe(r)){return r.call(o,e,n,true,t)}if(!s("convert_urls")||n==="link"||I(n)&&n.nodeName==="LINK"||e.indexOf("file:")===0||e.length===0){return e}if(s("relative_urls")){return o.documentBaseURI.toRelative(e)}e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"));return e}addVisual(e){IV(this,e)}remove(){f1(this)}destroy(e){m1(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const D8=He.DOM;const O8=U.each;let T8=false;let B8;let P8=[];const L8=t=>{const n=t.type;O8(z8.get(),e=>{switch(n){case"scroll":e.dispatch("ScrollWindow",t);break;case"resize":e.dispatch("ResizeWindow",t);break}})};const M8=t=>{if(t!==T8){const e=He.DOM;if(t){e.bind(window,"resize",L8);e.bind(window,"scroll",L8)}else{e.unbind(window,"resize",L8);e.unbind(window,"scroll",L8)}T8=t}};const I8=t=>{const e=P8;P8=S(P8,e=>{return t!==e});if(z8.activeEditor===t){z8.activeEditor=P8.length>0?P8[0]:null}if(z8.focusedEditor===t){z8.focusedEditor=null}return e.length!==P8.length};const F8=e=>{if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode){I8(e);e.unbindAllNativeEvents();e.destroy(true);e.removed=true}};const U8=document.compatMode!=="CSS1Compat";const z8={...Xq,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.1",releaseDate:"2023-03-29",i18n:wl,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="";let n="";let o=HN.getDocumentBaseUrl(document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(o)){o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(o)){o+="/"}}const s=window.tinymce||window.tinyMCEPreInit;if(s){t=s.base||s.baseURL;n=s.suffix}else{const r=document.getElementsByTagName("script");for(let e=0;e<r.length;e++){const i=r[e].src||"";if(i===""){continue}const c=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){if(c.indexOf(".min")!==-1){n=".min"}t=i.substring(0,i.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;if(i.indexOf(".min")!==-1){n=".min"}t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new HN(o).toAbsolute(t);e.documentBaseURL=o;e.baseURI=new HN(e.baseURL);e.suffix=n;Jy(e)},overrideDefaults(e){const t=e.base_url;if(t){this._setBaseUrl(t)}const n=e.suffix;if(n){this.suffix=n}this.defaultOptions=e;const o=e.plugin_base_urls;if(o!==undefined){Me(o,(e,t)=>{xl.PluginManager.urls[t]=e})}},init(n){const c=this;let o;const s=U.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track "+"colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");const a=(e,t)=>e.inline&&t.tagName.toLowerCase()in s;const l=e=>{let t=e.id;if(!t){t=p(e,"name").filter(e=>!D8.get(e)).getOrThunk(D8.uniqueId);e.setAttribute("id",t)}return t};const e=e=>{const t=n[e];if(!t){return}return t.apply(c,[])};const d=e=>{if(H.browser.isIE()||H.browser.isEdge()){W1("TinyMCE does not support the browser you are using. For a list of supported"+" browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers");return[]}else if(U8){W1("Failed to initialize the editor as the document is not in standards mode. "+"TinyMCE requires standards mode.");return[]}else if(Re(e.selector)){return D8.select(e.selector)}else if(De(e.target)){return[e.target]}else{return[]}};let u=e=>{o=e};const f=()=>{let s=0;const r=[];let i;const t=(e,t,n)=>{const o=new A8(e,t,c);r.push(o);o.on("init",()=>{if(++s===i.length){u(r)}});o.targetElm=o.targetElm||n;o.render()};D8.unbind(window,"ready",f);e("onpageload");i=ke(d(n));U.each(i,e=>{F8(c.get(e.id))});i=U.grep(i,e=>{return!c.get(e.id)});if(i.length===0){u([])}else{O8(i,e=>{if(a(n,e)){W1("Could not initialize inline editor on invalid inline target element",e)}else{t(l(e),n,e)}})}};D8.bind(window,"ready",f);return new Promise(t=>{if(o){t(o)}else{u=e=>{t(e)}}})},get(t){if(arguments.length===0){return P8.slice(0)}else if(Re(t)){return ue(P8,e=>{return e.id===t}).getOr(null)}else if(q(t)){return P8[t]?P8[t]:null}else{return null}},add(e){const n=this;const t=n.get(e.id);if(t===e){return e}if(t===null){P8.push(e)}M8(true);n.activeEditor=e;n.dispatch("AddEditor",{editor:e});if(!B8){B8=e=>{const t=n.dispatch("BeforeUnload");if(t.returnValue){e.preventDefault();e.returnValue=t.returnValue;return t.returnValue}};window.addEventListener("beforeunload",B8)}return e},createEditor(e,t){return this.add(new A8(e,t,this))},remove(e){const t=this;let n;if(!e){for(let e=P8.length-1;e>=0;e--){t.remove(P8[e])}return}if(Re(e)){O8(D8.select(e),e=>{n=t.get(e.id);if(n){t.remove(n)}});return}n=e;if(z(t.get(n.id))){return null}if(I8(n)){t.dispatch("RemoveEditor",{editor:n})}if(P8.length===0){window.removeEventListener("beforeunload",B8)}n.remove();M8(P8.length>0);return n},execCommand(e,t,n){var o;const s=this;const r=I(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(e){case"mceAddEditor":{if(!s.get(r)){const i=n.options;new A8(r,i,s).render()}return true}case"mceRemoveEditor":{const c=s.get(r);if(c){c.remove()}return true}case"mceToggleEditor":{const c=s.get(r);if(!c){s.execCommand("mceAddEditor",false,n);return true}if(c.isHidden()){c.show()}else{c.hide()}return true}}if(s.activeEditor){return s.activeEditor.execCommand(e,t,n)}return false},triggerSave:()=>{O8(P8,e=>{e.save()})},addI18n:(e,t)=>{wl.add(e,t)},translate:e=>{return wl.translate(e)},setActive(e){const t=this.activeEditor;if(this.activeEditor!==e){if(t){t.dispatch("deactivate",{relatedTarget:e})}e.dispatch("activate",{relatedTarget:t})}this.activeEditor=e},_setBaseUrl(e){this.baseURL=new HN(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,""));this.baseURI=new HN(this.baseURL)}};z8.setup();const j8=()=>{const t=Sl();const e=t=>({items:t,types:Ee(t),getType:e=>p(t,e).getOrUndefined()});const n=e=>{t.set(e)};const o=()=>t.get().getOrUndefined();const s=t.clear;return{FakeClipboardItem:e,write:n,read:o,clear:s}};const H8=j8();const $8=Math.min,V8=Math.max,q8=Math.round;const W8=(e,t,n)=>{let o=t.x;let s=t.y;const r=e.w;const i=e.h;const c=t.w;const a=t.h;const l=(n||"").split("");if(l[0]==="b"){s+=a}if(l[1]==="r"){o+=c}if(l[0]==="c"){s+=q8(a/2)}if(l[1]==="c"){o+=q8(c/2)}if(l[3]==="b"){s-=i}if(l[4]==="r"){o-=r}if(l[3]==="c"){s-=q8(i/2)}if(l[4]==="c"){o-=q8(r/2)}return Q8(o,s,r,i)};const K8=(t,n,o,s)=>{for(let e=0;e<s.length;e++){const r=W8(t,n,s[e]);if(r.x>=o.x&&r.x+r.w<=o.w+o.x&&r.y>=o.y&&r.y+r.h<=o.h+o.y){return s[e]}}return null};const G8=(e,t,n)=>{return Q8(e.x-t,e.y-n,e.w+t*2,e.h+n*2)};const Y8=(e,t)=>{const n=V8(e.x,t.x);const o=V8(e.y,t.y);const s=$8(e.x+e.w,t.x+t.w);const r=$8(e.y+e.h,t.y+t.h);if(s-n<0||r-o<0){return null}return Q8(n,o,s-n,r-o)};const X8=(e,t,n)=>{let o=e.x;let s=e.y;let r=e.x+e.w;let i=e.y+e.h;const c=t.x+t.w;const a=t.y+t.h;const l=V8(0,t.x-o);const d=V8(0,t.y-s);const u=V8(0,r-c);const f=V8(0,i-a);o+=l;s+=d;if(n){r+=l;i+=d;o-=u;s-=f}r-=u;i-=f;return Q8(o,s,r-o,i-s)};const Q8=(e,t,n,o)=>{return{x:e,y:t,w:n,h:o}};const J8=e=>{return Q8(e.left,e.top,e.width,e.height)};const Z8={inflate:G8,relativePosition:W8,findBestRelativePosition:K8,intersect:Y8,clamp:X8,create:Q8,fromClientRect:J8};const e5=(e,t,n=1e3)=>{let o=false;let s=null;const r=t=>(...e)=>{if(!o){o=true;if(s!==null){clearTimeout(s);s=null}t.apply(null,e)}};const i=r(e);const c=r(t);const a=(...e)=>{if(!o&&s===null){s=setTimeout(()=>c.apply(null,e),n)}};return{start:a,resolve:i,reject:c}};const t5=()=>{const n={};const c={};const e=(o,s)=>{const r=`Script at URL "${s}" failed to load`;const i=`Script at URL "${s}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(n[o]!==undefined){return n[o]}else{const e=new Promise((e,t)=>{const n=e5(e,t);c[o]=n.resolve;cl.ScriptLoader.loadScript(s).then(()=>n.start(i),()=>n.reject(r))});n[o]=e;return e}};const t=(e,t)=>{if(c[e]!==undefined){c[e](t);delete c[e]}n[e]=Promise.resolve(t)};const o=e=>{delete n[e]};return{load:e,add:t,unload:o}};const n5=t5();const o5=()=>(()=>{let n={};let o=[];const e={getItem:e=>{const t=n[e];return t?t:null},setItem:(e,t)=>{o.push(e);n[e]=String(t)},key:e=>{return o[e]},removeItem:t=>{o=o.filter(e=>e===t);delete n[t]},clear:()=>{o=[];n={}},length:0};Object.defineProperty(e,"length",{get:()=>o.length,configurable:false,enumerable:false});return e})();let s5;try{const d5="__storage_test__";s5=window.localStorage;s5.setItem(d5,d5);s5.removeItem(d5)}catch(e){s5=o5()}var r5=s5;const i5={geom:{Rect:Z8},util:{Delay:Fy,Tools:U,VK:$,URI:HN,EventDispatcher:Gq,Observable:Xq,I18n:wl,LocalStorage:r5,ImageUploader:aO},dom:{EventUtils:Va,TreeWalker:vr,TextSeeker:Zl,DOMUtils:He,ScriptLoader:cl,RangeUtils:Fv,Serializer:zD,StyleSheetLoader:jc,ControlSelection:Ub,BookmarkManager:cb,Selection:ND,Event:Va.Event},html:{Styles:Da,Entities:pa,Node:FC,Schema:Aa,DomParser:iR,Writer:JC,Serializer:ZC},Env:H,AddOnManager:xl,Annotator:ib,Formatter:EO,UndoManager:RO,EditorCommands:Rq,WindowManager:P1,NotificationManager:D1,EditorObservable:o8,Shortcuts:k8,Editor:A8,FocusManager:Ly,EditorManager:z8,DOM:He.DOM,ScriptLoader:cl.ScriptLoader,PluginManager:O1,ThemeManager:T1,ModelManager:h1,IconManager:p1,Resource:n5,FakeClipboard:H8,trim:U.trim,isArray:U.isArray,is:U.is,toArray:U.toArray,makeMap:U.makeMap,each:U.each,map:U.map,grep:U.grep,inArray:U.inArray,extend:U.extend,walk:U.walk,resolve:U.resolve,explode:U.explode,_addCacheSuffix:U._addCacheSuffix};const c5=U.extend(z8,i5);const a5=e=>{if(typeof module==="object"){try{module.exports=e}catch(e){}}};const l5=e=>{window.tinymce=e;window.tinyMCE=e};l5(c5);a5(c5)})();